(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{147:function(e,t,a){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isInRange=t.copyNestedObject=t.deepReplace=t.replace=t.equals=void 0;t.equals=function(e){return function(t,a){return e[a.field]===t}};var r=function(e,t){for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];n&&(e=e.replace(new RegExp("<".concat(a,">"),"g"),n))}return e};t.replace=r;t.deepReplace=function e(t,a,o){if("string"===typeof t&&a.test(t))t=r(t,o);else if(Array.isArray(t))t=t.map(function(t){return e(t,a,o)});else if("object"===n(t))for(var i in t)t.hasOwnProperty(i)&&(t[i]=e(t[i],a,o));return t};t.copyNestedObject=function e(t){var a={};if(Array.isArray(t))a=t.map(function(t){return e(t)});else if("object"===n(t))for(var r in t)t.hasOwnProperty(r)&&(a[r]=e(t[r]));else a=t;return a};t.isInRange=function(){return function(e,t){e=Number(e);var a=t.min,n=t.max;a=Number(t.min),n=Number(t.max);var r=!0;return console.log(t.message()),r="_"===t.min?r&&!0:isNaN(a)?r&&!1:e<a?r&&!1:r&&!0,r="_"===t.max?r&&!0:isNaN(n)?r&&!1:e>n?r&&!1:r&&!0,isNaN(e)&&(r=!1),r}}},148:function(e,t,a){},164:function(e,t,a){"use strict";(function(e){var n=a(14),r=a(3),o=a(4),i=a(5),c=a(6),s=a(7),l=a(0),u=a.n(l),p=a(340),m=a(67),f=a(165),d=a(166),h=a(30),g=function(t){function a(){var e,t;Object(r.a)(this,a);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(s)))).state={username:"",password:"",confirmPassword:""},t.handleChange=function(e){var a=e.target,r=a.name,o=a.value;t.setState(Object(n.a)({},r,o))},t}return Object(s.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this;e.nextTick(function(){return t.setState({username:h.a.getUser().name})})}},{key:"render",value:function(){return u.a.createElement(p.a,{container:!0,justify:"center"},u.a.createElement(m.a,{variant:"h2",className:"mt-3 mb-5 pb-5"},"Work In Progress"),u.a.createElement(f.a,{onChange:this.handleChange,state:this.state}),u.a.createElement(d.a,{onChange:this.handleChange,state:this.state}))}}]),a}(u.a.Component);t.a=g}).call(this,a(95))},165:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(41),i=a(35);t.a=function(e){var t=e.state,a=e.onChange;return r.a.createElement(i.a,{title:"Account settings"},r.a.createElement(i.a.Sub,null,r.a.createElement("span",null,"Username:"),r.a.createElement(o.a,{name:"username",value:t.username,onChange:a})))}},166:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(41),i=a(35);t.a=function(e){var t=e.state,a=e.onChange;return r.a.createElement(i.a,{title:"Update password"},r.a.createElement(i.a.Sub,null,r.a.createElement("span",null,"Password:"),r.a.createElement(o.a,{name:"password",label:"Password",value:t.password,onChange:a})),r.a.createElement(i.a.Sub,null,r.a.createElement("span",null,"Password confirmation:"),r.a.createElement(o.a,{name:"confirmPassword",label:"Password confirmation",value:t.confirmPassword,onChange:a})))}},179:function(e,t,a){e.exports=a(338)},188:function(e,t,a){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(s){r=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(e){return function(t){if(!t)return!1;if(!e)return console.warn("mapDynamicState: didn't received the wanted props from the state"),{};var a={};if("string"===typeof e){var r=e.split(":").map(function(e){return e.trim()});if(r.length<2)return console.error(new Error('mapDynamicState: should be used with "reducerName: propName", instead received:\n"'.concat(e,'"'))),!1;var o=n(r,2),i=o[0];o[1].split(/\s/).forEach(function(e){t["".concat(i,"Reducer")]?a[e]=t["".concat(i,"Reducer")][e]:console.warn('mapDynamicState: There is no props called "'.concat(i,'Reducer" in the state'))})}else if("Object"===e.constructor.name){var c=function(n){if(e.hasOwnProperty(n)){var r=e[n],o=[];if(Array.isArray(r))(r=r.map(function(e){return e.trim()})).map(function(e){return e.split(/\s/)}).forEach(function(e){"string"===typeof e?o.push(e):Array.isArray(e)&&e.forEach(function(e){return o.push(e)})});else"string"===typeof r?(r=r.trim(),o=r.split(/\s/)):console.error(new Error('mapDynamicState: The element in an object in mapDynamicState must be of type Array or String, instead received the type "'.concat(r.constructor.name,'"')));o.forEach(function(e){t["".concat(n,"Reducer")]?a[e]=t["".concat(n,"Reducer")][e]:console.warn('mapDynamicState: There is no props called "'.concat(n,'Reducer" in the state'))})}};for(var s in e)c(s)}else console.error(new Error('mapDynamicState: The element in mapDynamicState must be of type Object or String, instead received the type "'.concat(e.constructor.name,'"')));return a}}},189:function(e,t,a){"use strict";e.exports=function(e,t){return function(a){var n={},r=[];return"string"===typeof t?r=t.split(/\s/g):Array.isArray(t)||console.warn(new Error('the second parameter of "mapDynamicDispatch" must be of type array or string, instead received "'.concat(t.constructor.name,'"'))),r.forEach(function(t){""!==t.charAt(0)&&(e[t]?n[t]=function(n){return a(e[t](n))}:console.warn(new Error('mapDynamicDispatch: the action "'.concat(t,"\" doesn't exists"))))}),n}}},190:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=a(74),i=o.createStore,c=o.applyMiddleware,s=o.compose;e.exports=function(e,t){if("object"===r(t)&&!Array.isArray(t)){var a=[],o=0;for(var l in t)a[o++]=t[l];t=a}var u,p=[];return window.devToolsExtension,u=t?s.apply(void 0,[c.apply(void 0,n(t))].concat(p)):p[0],i(e,u)}},191:function(e,t,a){"use strict";var n=a(192);function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.exports=function e(t,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"actions",{}),o(this,"reducerConditions",[]),o(this,"stateName",""),o(this,"capitalize",function(e){return e.charAt(0).toUpperCase()+e.substring(1)}),o(this,"camelCasify",function(e){return(e=(e=e.toLowerCase().split("set_"))[1]||e[0]).split(/[_-]/g).map(function(e,t){return t>0?i.capitalize(e):e}).join("")}),o(this,"dynamicReducer",function(e,t,a){if(t.type==="RESET_"+i.stateName.toUpperCase()+"_REDUCER")return i.initialState;var o={};for(var c in e)e.hasOwnProperty(c)&&(o[c]=e[c]);return a.forEach(function(a){var c=a.type,s=a.prop;if(c===t.type)if(s=s||i.camelCasify(c),(0,n.inArray)(s,Object.keys(e))||t.multi||console.error(new Error('Received "'.concat(s,"\" as prop but it doesn't exists in the state"))),t.multi){if(t.multi&&"object"===r(t.payload))for(var l in t.payload)if(t.payload.hasOwnProperty(l)){var u=t.payload[l];o[l]=u}}else o[s]=t.payload}),o}),o(this,"createAction",function(e){return function(t){var a,n;return"string"===typeof e?a=e:(a=e.type,n=e.multi),{type:a,payload:t,multi:n}}}),o(this,"dynamicActions",function(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];i.actions[t]=i.createAction(a)}}),o(this,"createState",function(e){e.resetReducer="RESET_"+i.stateName.toUpperCase()+"_REDUCER";var t={},a=[];for(var n in e)if(e.hasOwnProperty(n)){var r=void 0,o=void 0,c=void 0,s=e[n];"string"===typeof e[n]?r=s:(r=s.type,o=s.prop,c=s.multi),t[n]={type:r,multi:c},a.push({type:r,prop:o})}i.reducerConditions=a,i.dynamicActions(t)}),"string"===typeof t?this.stateName=t:a=t,this.initialState=a,this.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;return i.dynamicReducer(e,t,i.reducerConditions)}}},192:function(e,t,a){"use strict";t.inArray=function(e,t){for(var a=0,n=t.length;a<n;a++)if(t[a].toLowerCase()===e.toLowerCase())return!0;return!1}},193:function(e,t,a){},218:function(e,t,a){},22:function(e,t,a){"use strict";var n=a(8),r=new n.DynamicState("uploader",{formView:"Uploader",imageData:{},canvasData:{color:"rgba(0,0,0,0.5)",eraseSize:10,fontSize:16,displayMainLayer:!0,displayInputs:!0,alpha:.5,lineWidth:3,contextAction:"draw",drawing:!1,context:null,hasTextCanvas:!0,hasDrawingCanvas:!0,draggingOut:!1,imageBounds:{},canvas:null,img:null},imagesToUpload:{},inputs:[],labels:[]});r.createState({setFormView:"SET_FORM_VIEW",setImageData:"SET_IMAGE_DATA",setCanvasData:"SET_CANVAS_DATA",setImagesToUpload:"SET_IMAGES_TO_UPLOAD",setCanvasField:{type:"SET_CANVAS_FIELD",prop:"inputs"},setCanvasLabel:{type:"SET_CANVAS_LABEL",prop:"labels"},resetReducer:"RESET_REDUCER"}),t.a=r},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},251:function(e,t){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(104))&&n.__esModule?n:{default:n};function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validations=t}var t,a,n;return t=e,(a=[{key:"validate",value:function(e){var t=this.valid();return this.validations.forEach(function(a){if(!t[a.field].isInvalid){var n=e[a.field],o=a.args||[];("string"===typeof a.method?r.default[a.method]:a.method(e)).apply(void 0,[n].concat(i(o)))!==a.validWhen&&(t[a.field]={isInvalid:!0,message:a.message},t.isValid=!1)}}),t}},{key:"valid",value:function(){var e={};return this.validations.map(function(t){return e[t.field]={isInvalid:!1,message:""}}),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){o(e,t,a[t])})}return e}({isValid:!0},e)}}])&&c(t.prototype,a),n&&c(t,n),e}();t.default=s},30:function(e,t,a){"use strict";var n=a(3),r=a(91),o=a.n(r),i=a(92),c=a.n(i),s=a(8),l=a(68),u=a(49),p=a(75),m=Object(s.mapDynamicDispatch)(u.a.actions,"login")(l.a.dispatch),f=function e(){Object(n.a)(this,e)};f.cookieName="cookieSession-Dorg-Gallery",f.secretKey="draconity.org gallery; secret key",f.getUser=function(){return Object(s.mapDynamicState)("auth: user")(l.a.getState()).user},f.getUserRoles=function(e){return Array.isArray(e.roles)?e.roles.map(function(e){return e.value}):[]},f.isLogged=function(){return f.getUser().logged},f.isUser=function(){var e=f.getUser();return f.getUserRoles(e).includes(p.a.user)},f.hasRole=function(e){var t=f.getUser();return f.getUserRoles(t).includes(e)},f.encrypt=function(e){return o.a.AES.encrypt(JSON.stringify(e),f.secretKey)},f.decrypt=function(e){if(e){var t=o.a.AES.decrypt(e.toString(),f.secretKey);return JSON.parse(t.toString(o.a.enc.Utf8))}},f.addRolesValue=function(e){e.roles.forEach(function(e){e.value=p.a[e.name]})},f.signup=function(e){"object"===typeof e&&f.saveUser(e)},f.login=function(e){e||(e=f.decrypt(c.a.get(f.cookieName))),e&&f.saveUser(e)},f.logout=function(){c.a.remove(f.cookieName),m.login({})},f.saveUser=function(e){e.logged=!0,f.addRolesValue(e),m.login(e),f.setCookieSession(e)},f.setCookieSession=function(e){var t=f.encrypt(e);c.a.set(f.cookieName,t,{expires:1})},t.a=f},31:function(e,t,a){"use strict";var n=a(8),r=new n.DynamicState("gallery",{showOverlay:["text","draw"],images:[],filteredImages:[],filter:["*"],currentPage:1,currentUser:"",requestReceived:!1,searchOptions:{search:"",haveOverlays:["*"],rating:["general","suggestive","nsfw"],sort:{criteria:"date",order:"ASC"}},currentImage:null,searchOptionsPanel:!1});r.createState({setShowOverlay:{type:"SET_SHOW_OVERLAY_ON_IMAGES",prop:"showOverlay"},setImages:"SET_IMAGES",setFilteredImages:"SET_FILTERED_IMAGES",setFilter:"SET_FILTER",setCurrentPage:"SET_CURRENT_PAGE",setCurrentUser:"SET_CURRENT_USER",setCurrentImage:"SET_CURRENT_IMAGE",setRequestReceived:"SET_REQUEST_RECEIVED",setSearchOptions:"SET_SEARCH_OPTIONS",setSearchOptionsPanel:"SET_SEARCH_OPTIONS_PANEL"}),t.a=r},320:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a(0)),r=c(a(321)),o=c(a(322)),i=c(a(323));function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e){var t=e.elementType,a=e.name;t=t||"text";return n.default.createElement("span",null,"text"===t&&function(){var t=e.name,a=e.label,o=e.field,i=e.placeholder;i=i||a;var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){l(e,t,a[t])})}return e}({},e);return delete c.elementType,delete c.rangeField,delete c.selectField,n.default.createElement(r.default,s({},c,{placeholder:o?i:"",id:t,className:t}))}(),"select"===t&&n.default.createElement(o.default,s({},e,{id:a,className:a})),"range"===t&&n.default.createElement(i.default,e),function(){var t=e.validation,a=e.name;return n.default.createElement(n.default.Fragment,null,n.default.createElement("br",null),t&&t[a]&&n.default.createElement("span",{className:"help-block"},t[a].message),n.default.createElement("br",null))}())};t.default=u},321:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(0)),r=o(a(142));function o(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){s(e,t,a[t])})}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function(e){var t=e.content,a=e.field,o=e.placeholder,s=a||r.default;return o=o||t,n.default.createElement(s,i({},e,{inputProps:c({},e),placeholder:o}))};t.default=l},322:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),r=s(a(143)),o=s(a(103)),i=s(a(144)),c=s(a(145));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=function(e){var t=e.selectField,a=e.options,s=e.name,p=e.label,m=t||r.default,f=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){u(e,t,a[t])})}return e}({},e);return delete f.selectField,delete f.elementType,delete f.rangeField,n.default.createElement(o.default,null,n.default.createElement(i.default,{htmlFor:s},p),n.default.createElement(m,l({},f,{inputProps:{name:s,id:s}}),a.map(function(e){return n.default.createElement(c.default,{key:e.value,value:e.value},e.text)})))};t.default=p},323:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(0)),r=i(a(146)),o=i(a(72));function i(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function(e){var t=e.rangeField,a=e.label,i=e.name,l=e.onChange,u=e.min,p=e.max,m=e.value,f=t||r.default,d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){s(e,t,a[t])})}return e}({},e);return delete d.rangeField,delete d.elementType,delete d.selectField,n.default.createElement(n.default.Fragment,null,n.default.createElement(o.default,{id:"label-".concat(i)},a),n.default.createElement(f,c({},d,{min:u||0,max:p||100,value:m||0,onChange:function(e,t){return l(e,t,i)},style:t?{}:{padding:"10px 0"},"aria-labelledby":"label-".concat(i)})))};t.default=l},324:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fields=void 0;t.fields={username:{name:"username",label:"Username",validations:["required","length:3-40"]},password:{name:"password",label:"Password",type:"password",validations:["required","length:8-100"]},confirmPassword:{name:"confirmPassword",label:"Password confirmation",type:"password",validations:["required","passwordMatch"]},email:{name:"email",label:"Email",validations:["email"]}}},325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validations=void 0;var n=a(147),r={required:{method:"isEmpty",validWhen:!1,message:"<label> is required."},length:{method:"isLength",args:[{min:"<min>",max:"<max>"}],validWhen:!0,message:"<label> must have between <min> and <max> characters."},passwordMatch:{method:n.equals,args:[{field:"password"}],validWhen:!0,message:"Both passwords doesn't match."},equals:{method:n.equals,validWhen:!0,args:[{field:"<match>"}],message:"<label> and <match> <not> match."},email:{method:"isEmail",validWhen:!0,message:"You must provide a valid email address."},range:{method:n.isInRange,validWhen:!0,args:[{min:"<min>",max:"<max>"}],message:"<label> must be between <min> and <max>"}};t.validations=r},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Displayer",function(){return Fa}),a.d(n,"Requester",function(){return Wa}),a.d(n,"RightPanel",function(){return hn});var r={};a.r(r),a.d(r,"Displayer",function(){return wn}),a.d(r,"Requester",function(){return Dn}),a.d(r,"RightPanel",function(){return Fn});var o=a(3),i=a(4),c=a(5),s=a(6),l=a(7),u=a(0),p=a.n(u),m=a(21),f=a.n(m),d=a(36),h=a(13),g=a(8),b=(a(193),a(68)),v=a(83),y=a(38),O=a.n(y),j=a(380),E=a(381),w=a(340),D=a(67),C=a(30),S=a(25),P=a(168),k=[{to:"/",label:"home"},{to:"/signup",label:"signup"},{to:"/login",label:"login"}],N=[{to:"/",label:"home"},{to:"/upload",label:"upload"},{to:function(){return"/gallery/"+C.a.getUser().slug},label:"my gallery"},{to:"/profile",label:"profile"},{label:"logout",onClick:C.a.logout,className:"color-red-darken-2"}],x=a(14),I=a(2),A=a(153);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).getProps=function(){var e=a.props,t=e.onClick,n=e.to,r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},Object(I.a)(e,["onClick","to"]));return"function"===typeof t&&(r.onClick=t),"function"===typeof n?r.to=n():n&&(r.to=n),r},a.getComponent=function(){return a.props.to?d.b:"div"},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,a=e.children,n=e.className,r=this.getComponent();return p.a.createElement(A.a,{onClick:t,className:"p-0"},p.a.createElement(r,Object.assign({},this.getProps(),{className:O()("color-black d-block h-100 w-100 nav-link",n)}),a))}}]),t}(p.a.Component),T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={menu:null},a.getMenu=function(){var e=a.getDataLinks();return a.parseDataToMenu(e)},a.getDataLinks=function(){var e=[];return C.a.isLogged()?(C.a.isUser()&&(e=Object(S.a)(N)),e):e=Object(S.a)(k)},a.parseDataToMenu=function(e){var t=[];return e.forEach(function(e){t[t.length]=p.a.createElement(R,Object.assign({key:e.label,onClose:a.handleClose},e),e.label)}),t},a.handleClick=function(e){return a.setState({menu:e.currentTarget})},a.handleClose=function(){return a.setState({menu:null})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.menu;return p.a.createElement("div",null,p.a.createElement("i",{className:"fa fa-bars fa-2x color-white pointer","aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:this.handleClick}),p.a.createElement(P.a,{id:"navbar-menu",keepMounted:!0,anchorEl:e,open:Boolean(e),onClose:this.handleClose,MenuListProps:{className:"bg-color-grey-lighten-1"}},this.getMenu()))}}]),t}(p.a.Component),U=(a(218),Object(g.mapDynamicState)("auth: user")),L=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return p.a.createElement(j.a,{position:"fixed",className:"navbar",id:"Navbar"},p.a.createElement(E.a,null,p.a.createElement(w.a,{container:!0,justify:"space-between",alignItems:"center"},p.a.createElement(w.a,{item:!0},p.a.createElement(D.a,{variant:"h6"},p.a.createElement(d.b,{className:"color-white",to:"/"},"Dorg gallery"))),p.a.createElement(w.a,{item:!0},C.a.isLogged()&&p.a.createElement(d.b,{to:"/upload"}),p.a.createElement(T,{user:e})))))}}]),t}(p.a.Component),_=Object(h.b)(U)(L),M=a(46),z=a(75),H=a(18),W=a.n(H),q=a(49),B=Object(g.mapDynamicState)("auth: user"),V=Object(g.mapDynamicDispatch)(q.a.actions,"setDeniedPage"),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},a.setDeniedPageIfAccessDenied=function(){var e=a.props,t=e.setDeniedPage,n=e.role;C.a.hasRole(n)||(t({path:window.location.href,require:n}),a.setState({redirect:!0}))},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setDeniedPageIfAccessDenied()}},{key:"componentDidUpdate",value:function(e){var t=this.props.user;W.a.isEqual(e.user,t)||this.setDeniedPageIfAccessDenied()}},{key:"render",value:function(){var e=this.state.redirect,t=this.props,a=t.role,n=Object(I.a)(t,["role"]);return C.a.hasRole(a)?p.a.createElement(M.Route,n):e&&p.a.createElement(M.Redirect,{to:"/login"})}}]),t}(p.a.Component),Y=Object(M.withRouter)(Object(h.b)(B,V)(G)),K=(a(220),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement(w.a,{container:!0,className:"Home",justify:"center"},p.a.createElement("h1",{className:"color-white"},"There is nothing here yet \xaf\\_(\u30c4)_/\xaf"))}}]),t}(p.a.Component)),X=a(384),J=a(117),$=a(391),Q=a(382),Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=a.props,n=t.value,r=t.onChange,o=t.name,i=a.getCheckboxValue(e.target),c=Object(S.a)(n);r(c=c.includes(i)?c.filter(function(e){return e!==i}):[].concat(Object(S.a)(c),[i]),o)},a.getCheckboxValue=function(e){return e.value||e.name},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.name,r=t.value,o=t.className;return p.a.createElement(p.a.Fragment,null,a.map(function(t){return p.a.createElement(re,{key:e.getCheckboxValue(t),label:t.label,value:e.getCheckboxValue(t),name:n+"-"+t.name,onChange:e.handleChange,checked:r.includes(e.getCheckboxValue(t)),className:o})}))}}]),t}(p.a.Component),ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).checkboxData=[{label:"Yes",name:"yes"},{label:"No",name:"no"}],a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.value,n=e.onChange;return p.a.createElement(re.Multiple,{data:this.checkboxData,name:t,value:a,onChange:n})}}]),t}(p.a.Component),te=(a(221),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.label,n=e.checked,r=e.name,o=e.onChange,i=e.className;return p.a.createElement(Q.a,{className:O()("checkbox-control-label",i),value:t,control:p.a.createElement($.a,{onChange:o,checked:n,name:r,id:r}),label:a})}}]),t}(p.a.Component));te.Multiple=Z,te.YesNo=ee;var ae,ne,re=te,oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleFiles=function(e){var t=e.target.files;a.changeFormData("image",t[0])},a.handleCheckboxChange=function(e){var t=e.target,n=t.name,r=t.checked;a.changeFormData(n,r)},a.changeFormData=function(e,t){(0,a.props.changeFormData)(Object(x.a)({},e,t))},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.formData;return p.a.createElement(p.a.Fragment,null,p.a.createElement(X.a,{row:!0,className:"justify-content-center"},p.a.createElement(re,{onChange:this.handleCheckboxChange,checked:e.withOverlay,name:"withOverlay",label:"Draw an overlay over the image?"})),p.a.createElement(X.a,{row:!0,className:"justify-content-center"},p.a.createElement("input",{type:"file",id:"image",className:"d-none",accept:"image/*",onChange:this.handleFiles}),p.a.createElement("label",{htmlFor:"image"},p.a.createElement(J.a,{variant:"contained",component:"span",className:"bg-color-grey-darken-1 color-white"},"Browse"))))}}]),t}(p.a.Component),ie=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={error:""},a.submit=function(e){var t=a.props,n=t.onSubmit,r=t.formData,o=t.validate;e.preventDefault();try{o(r)&&n(e,r)}catch(i){if(!W.a.isError(i))throw new Error('validate must throw an Error. Got "'.concat(i,'"'));a.setState({error:i.message})}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.error,t=this.props,a=t.formData,n=t.changeFormData,r=t.Form;return p.a.createElement("form",{onSubmit:this.submit,className:"d-flex justify-content-center flex-column w-100"},p.a.createElement(r,{formData:a,changeFormData:n}),p.a.createElement(X.a,{row:!0,className:"d-flex justify-content-center mt-3"},p.a.createElement(J.a,{color:"primary",variant:"contained",type:"submit"},"submit")),p.a.createElement(X.a,{row:!0,className:"d-flex justify-content-center mt-3"},p.a.createElement("p",{className:"color-red-darken-1"},e)))}}]),t}(p.a.Component),ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){if(!e.image)throw new Error("You must choose an image");return!0},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formData,a=e.changeFormData,n=e.onSubmit;return p.a.createElement(ie,{formData:t,changeFormData:a,Form:oe,onSubmit:n,validate:this.validate})}}]),t}(p.a.Component),se=a(151),le=a(41),ue=[{name:"title",label:"Title"},{name:"artistName",label:"Artist name"},{name:"artistLink",label:"Artist link"},{name:"tags",label:"Keywords"},{name:"description",label:"Description",multiline:!0,rows:5}],pe=(a(223),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.changeFormData(n,r)},a.changeFormData=function(e,t){(0,a.props.changeFormData)(Object(x.a)({},e,t))},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.formData;return p.a.createElement(p.a.Fragment,null,ue.map(function(a){return p.a.createElement(X.a,{row:!0,key:a.name,className:"justify-content-center"},p.a.createElement(le.a,Object.assign({},a,{fullWidth:!0,value:t[a.name],onChange:e.handleChange})))}),p.a.createElement(X.a,{row:!0,className:"justify-content-center"},p.a.createElement(se.a,{className:"svg-color-white",fullWidth:!0,value:t.rate,onChange:this.handleChange,input:p.a.createElement(le.a,{name:"rate",label:"Rate"}),MenuProps:{MenuListProps:{className:"bg-color-grey color-grey-darken-4"}}},p.a.createElement(A.a,{value:"general"},"General"),p.a.createElement(A.a,{value:"suggestive"},"Suggestive"),p.a.createElement(A.a,{value:"nsfw"},"NSFW"))))}}]),t}(p.a.Component)),me=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).validate=function(e){if(!e.rate)throw new Error("You must rate your image!");return!0},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formData,a=e.changeFormData,n=e.onSubmit;return p.a.createElement(ie,{formData:t,changeFormData:a,Form:pe,onSubmit:n,validate:this.validate})}}]),t}(p.a.Component),fe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",artistName:"",artistLink:"",tags:[],withOverlay:!1,rate:"general",image:null,step:1},a.getForm=function(){var e=a.state.step;switch(e){case 1:return ce;case 2:return me;default:throw new Error('Invalid step. got "'.concat(e,'"'))}},a.submit=function(e){var t=a.state.step,n=a.props.onSubmit;2===t?n(a.state,e):a.setState({step:t+1})},a._setState=function(e){return a.setState(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.getForm();return p.a.createElement(e,{formData:this.state,changeFormData:this._setState,onSubmit:this.submit})}}]),t}(p.a.Component),de=a(386),he=(a(224),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={canRedirect:!1},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props,r=n.redirection,o=n.success,i=n.timeout;r&&o&&o!==e.success&&setTimeout(function(){return a.setState({canRedirect:!0})},null==i?1500:i)}},{key:"render",value:function(){var e=this.props,t=e.color,a=e.size,n=e.thickness,r=e.successMessage,o=e.success,i=e.loading,c=e.redirection,s=e.error,l=e.errorMessage,u=e.empty,m=e.emptyMessage,f=this.state.canRedirect;return!i||o||s?o&&!u?p.a.createElement("p",{className:"success"},r,f&&p.a.createElement(M.Redirect,{to:c})):s?p.a.createElement("p",{className:"error"},l):u&&o?p.a.createElement("p",null,m):null:p.a.createElement("div",null,p.a.createElement(de.a,{color:t||"primary",size:a||40,thickness:n||5}))}}]),t}(p.a.Component)),ge=a(35),be=a(22),ve=a(160),ye=a.n(ve);ne=8001,ae=/localhost/.test(window.location)?"http://localhost:"+ne:"https://dorg-gallery.zougui.fr:"+ne;var Oe=ye()(ae,{secure:!0}),je=function e(){Object(o.a)(this,e)};je.imageUploaded=function(e){return Oe.on("imageUploaded",e)},je.imageUploadFailed=function(e){return Oe.on("imageUploadFailed",e)};var Ee=function e(){Object(o.a)(this,e)};Ee.uploadImage=function(e){return Oe.emit("uploadImage",e)};var we=function e(){Object(o.a)(this,e)};we.imageUploaded=function(e){return Oe.removeListener("imageUploaded",e)},we.imageUploadFailed=function(e){return Oe.removeListener("imageUploadFailed",e)};var De={On:je,Emit:Ee,Remove:we};function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Pe=Object(g.mapDynamicState)({misc:"tags",auth:"user"}),ke=Object(g.mapDynamicDispatch)(be.a.actions,"setFormView setImageData"),Ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",loader:{loading:!1,success:!1,error:!1,errorMessage:""}},a.submit=function(e){var t=a.props,n=t.setImageData,r=t.setFormView,o=t.user;a.setState({loader:{loading:!0}}),a.transformFormData(e).then(function(e){e.withOverlay?(n(e),r("Overlay")):De.Emit.uploadImage(Se({},e,{tags:e.tags,user:o}))}).catch(function(e){console.error(e),a.setState({loader:{error:!0,errorMessage:"An error occured and your image couldn't be uploaded"}})})},a.transformFormData=function(e){return new Promise(function(t){var a=Se({},e);a.artistLink&&(a.artistLink=a.artistLink.trim()),/^https?:\/\//.test(e.artistLink)||(a.artistLink="http://"+a.artistLink),W.a.isString(a.tags)&&(a.tags=a.tags.trim().split(" ").filter(function(e){return e.trim()})),a.artist={name:a.artistName,link:a.artistLink},delete a.artistName,delete a.artistLink;var n=new FileReader;n.readAsDataURL(a.image),n.addEventListener("load",function(){a.image=e.image,a.imageBase64=n.result,t(a)})})},a.imageUploaded=function(){a.setState({loader:{success:!0}})},a.imageUploadFailed=function(e){a.setState({loader:{error:!0,errorMessage:e.error}})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){De.On.imageUploaded(this.imageUploaded),De.On.imageUploadFailed(this.imageUploadFailed)}},{key:"componentWillUnmount",value:function(){De.Remove.imageUploaded(this.imageUploaded),De.Remove.imageUploadFailed(this.imageUploadFailed)}},{key:"render",value:function(){var e=this.state,t=e.loader,a=e.error;return p.a.createElement("div",{className:"Uploader d-flex justify-content-center text-center"},p.a.createElement(w.a,{container:!0,item:!0,xs:11,md:6,sm:9,className:"d-flex flex-column align-items-center"},p.a.createElement(ge.a,null,p.a.createElement(fe,{onSubmit:this.submit}),p.a.createElement(he,Object.assign({},t,{redirection:"/",errorMessage:a||t.errorMessage,successMessage:"The image has been uploaded"})))))}}]),t}(p.a.Component),xe=Object(h.b)(Pe,ke)(Ne);a(254);function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ae=Object(g.mapDynamicState)("uploader: canvasData imageData inputs labels"),Fe=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData setCanvasField setCanvasLabel"),Re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).draggingOut=!1,a.state={inputId:0},a.calculateRelativePosition=function(e,t){var n=a.props.canvasData.imageBounds,r=n.top;return{x:e-n.left+window.pageXOffset,y:t-r+window.pageYOffset}},a.canvasAction=function(e,t,n,r){var o=a.props.canvasData,i=a.calculateRelativePosition(e,t);e=i.x,t=i.y,n=(i=a.calculateRelativePosition(n,r)).x,r=i.y,"draw"===o.contextAction?a.drawLine(e,t,n,r):"erase"===o.contextAction&&a.eraseArea(e,t)},a.drawLine=function(e,t,n,r){var o=a.props.canvasData,i=o.context,c=o.lineWidth,s=o.color;i.beginPath(),i.moveTo(e,t),i.lineTo(n,r),i.strokeStyle=s,i.lineWidth=c,i.lineCap="butt",i.stroke(),i.closePath()},a.eraseArea=function(e,t){var n=a.props.canvasData,r=n.context,o=n.eraseSize;e-=o/2,t-=o/2,r.clearRect(e,t,o,o)},a.mouseDownHandler=function(e){var t=a.props,n=t.setCanvasData,r=t.canvasData;r.x=e.clientX,r.y=e.clientY,r.drawing=!0,n(r)},a.mouseUpHandler=function(e){var t=a.props,n=t.setCanvasData,r=t.canvasData;r.drawing&&(n(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},r,{drawing:!1})),a.canvasAction(r.x,r.y,e.clientX,e.clientY))},a.mouseMoveHandler=function(e){var t=a.props,n=t.setCanvasData,r=t.canvasData;r.drawing&&(a.canvasAction(r.x,r.y,e.clientX,e.clientY),r.x=e.clientX,r.y=e.clientY,n(r))},a.persister=function(e){return function(t){return t.persist(),e(t)}},a.pixelToNumber=function(e){return+e.replace("px","")},a.dragOverHandler=function(e,t){e.preventDefault(),console.log("dragOver"),!t&&a.draggingOut&&(a.draggingOut=!1)},a.dragLeaveHandler=function(){a.draggingOut||(a.draggingOut=!0)},a.dropHandler=function(e){var t=a.props,n=t.inputs,r=t.labels,o=t.setCanvasField,i=t.setCanvasLabel,c=+e.dataTransfer.getData("id");if(a.draggingOut){var s=n.filter(function(e){return e.id!==c}),l=r.filter(function(e,t){return t!==c});o(s),i(l)}else for(var u=0;u<n.length;u++){var p=n[u];if((!p||p.id===c)&&p){var m=a.calculateRelativePosition(e.clientX,e.clientY),f=m.x,d=m.y,h=p.label,g=a.pixelToNumber(h.style.top),b=a.pixelToNumber(h.style.left);h.style.top=g+(d-g)+82+"px",h.style.left=b+(f-b)+"px",o(n),i(r);break}}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("dragover",function(t){return Object(H.throttle)(e.dragOverHandler,200)(t,!0)}),document.body.addEventListener("drop",this.dropHandler),document.body.addEventListener("mouseup",this.mouseUpHandler)}},{key:"render",value:function(){var e=this.props,t=e.canvasData,a=e.inputs,n=t.imageBounds,r=n.width,o=n.height,i=a.map(function(e){return e.element});return p.a.createElement("div",null,p.a.createElement("div",{className:"select-none canvas-container",onDragLeave:this.dragLeaveHandler,onDragOver:this.persister(Object(H.throttle)(this.dragOverHandler,100))},p.a.createElement("canvas",{className:"select-none canvas droppable",id:"canvas",width:r&&r-300,height:o,onMouseDown:this.mouseDownHandler,onMouseMove:this.persister(Object(H.throttle)(this.mouseMoveHandler,20))}),i))}}]),t}(p.a.Component),Te=Object(h.b)(Ae,Fe)(Re),Ue=a(167),Le=(a(255),[{id:1,color:"rgba(255,255,255,1)"},{id:2,color:"rgba(255,251,13,1)"},{id:3,color:"rgba(5,50,255,1)"},{id:4,color:"rgba(255,147,0,1)"},{id:5,color:"rgba(0,249,26,1)"},{id:6,color:"rgba(255,39,0,1)"},{id:7,color:"rgba(0,0,0,1)"},{id:8,color:"rgba(104,104,104,1)"},{id:9,color:"rgba(210,122,238,1)"},{id:10,color:"rgba(91,168,196,1)"},{id:11,color:"rgba(230,74,169,1)"},{id:12,color:"erase"}]),_e=a(150),Me=function(e){var t=e.name,a=e.label,n=e.value,r=e.step,o=e.min,i=e.max,c=e.onChange;return p.a.createElement(p.a.Fragment,null,p.a.createElement("label",{className:"color-white",htmlFor:t},a),p.a.createElement(_e.a,{style:{padding:"10px 0"},id:t,name:t,value:n,step:r,min:o,max:i,onChange:c}))},ze=function(e){return function(t){var a=t.show,n=Object(I.a)(t,["show"]);return a?p.a.createElement(e,n):null}};function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var We=ze(Ue.a),qe=Object(g.mapDynamicState)("uploader: canvasData imageData inputs labels imagesToUpload"),Be=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData resetReducer"),Ve=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={alpha:a.props.canvasData.alpha},a.updateCanvasData=function(e){var t=a.props,n=t.canvasData;(0,t.setCanvasData)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{},e))},a.onColorUpdate=function(e,t){var n=a.props.canvasData,r=a.state.alpha;e&&("erase"!==t?(n.color=t,n.contextAction="draw"):n.contextAction="erase");var o=n.color.replace(/[0-1]+([.][0-9]*)?\)$/,r+")");n.color=o,a.updateCanvasData(n)},a.onAlphaChange=function(e,t){var n=a.props.canvasData;a.setState({alpha:t}),n.alpha=t,a.onColorUpdate()},a.getUnifiedColor=function(e){var t=a.props.canvasData;return"draw"===t.contextAction?e.indexOf("rgba")>=0&&(e=e.replace(/ /g,"").substring(0,e.lastIndexOf(",")),e+=",1)"):e=t.contextAction,e},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.canvasData,a=this.state.alpha,n=this.getUnifiedColor(t.color,!0);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"panel-row"},Le.map(function(t){return p.a.createElement("div",{key:t.color,className:"c".concat(t.id," swatch color ").concat(n===t.color?"active":""),onClick:function(a){return e.onColorUpdate(a,t.color)}},p.a.createElement(We,{show:"erase"===t.color,className:"color-black p-0 m-0 eraser-icon"}))})),p.a.createElement("div",{className:"panel-row"},p.a.createElement(Me,{name:"alpha",label:"Alpha",value:a,onChange:this.onAlphaChange,step:.05,min:.05,max:1})))}}]),t}(p.a.Component),Ge=Object(h.b)(qe,Be)(Ve),Ye=Object(g.mapDynamicState)("uploader: canvasData imageData inputs labels imagesToUpload"),Ke=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData resetReducer"),Xe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={fontSize:a.props.canvasData.fontSize,eraseSize:a.props.canvasData.eraseSize},a.updateCanvasData=function(){var e=a.props,t=e.canvasData;(0,e.setCanvasData)(t)},a.onSlideChange=function(e){return function(t,n){var r=a.props.canvasData;a.setState(Object(x.a)({},e,n)),r[e]=n,a.updateCanvasData()}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.canvasData,t=this.state,a=t.fontSize,n=t.eraseSize;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(Me,{label:"Font size",name:"fontSize",value:a,onChange:this.onSlideChange("fontSize"),step:1,min:16,max:100}),"erase"===e.contextAction&&p.a.createElement(Me,{show:"erase"===e.contextAction,label:"Erase size",name:"eraseSize",value:n,onChange:this.onSlideChange("eraseSize"),step:1,min:10,max:100}))}}]),t}(p.a.Component),Je=Object(h.b)(Ye,Ke)(Xe),$e=function(e){var t=e.label,a=e.checked,n=e.name,r=e.onChange;return p.a.createElement(X.a,{row:!0,className:"d-flex justify-content-center"},p.a.createElement(Q.a,{control:p.a.createElement($.a,{onChange:r,checked:a,name:n,id:n}),label:t}))};function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ze=Object(g.mapDynamicState)("uploader: canvasData imageData inputs labels imagesToUpload"),et=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData resetReducer"),tt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).updateCanvasData=function(e){var t=a.props,n=t.canvasData;(0,t.setCanvasData)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{},e))},a.displayInputs=function(){var e=a.props.canvasData,t=document.getElementById("overlay-container");e.displayInputs?t.classList.add("hideInputs"):t.classList.remove("hideInputs"),a.updateCanvasData({displayInputs:!e.displayInputs})},a.displayMainLayer=function(){var e=a.props.canvasData;e.displayMainLayer?e.context.canvas.classList.add("d-none"):e.context.canvas.classList.remove("d-none"),a.updateCanvasData({displayMainLayer:!e.displayMainLayer})},a.clearCanvas=function(){var e=a.props.canvasData,t=e.context,n=e.imageBounds;t.clearRect(0,0,n.width,n.height)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.canvasData;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"panel-row"},p.a.createElement($e,{label:"Display text",name:"displayInputs",checked:e.displayInputs,onChange:this.displayInputs}),p.a.createElement($e,{label:"Display drawing",name:"displayMainLayer",checked:e.displayMainLayer,onChange:this.displayMainLayer})),p.a.createElement("div",{className:"panel-row"},p.a.createElement(J.a,{className:"color-white",id:"clear",onClick:this.clearCanvas},"Clear overlay")))}}]),t}(p.a.Component),at=Object(h.b)(Ze,et)(tt),nt=Object(g.mapDynamicState)("uploader: imageData canvasSize canvasData imagesToUpload inputs labels"),rt=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasLabel setCanvasField setImageData setCanvasData"),ot=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).shouldComponentUpdate=function(e){return e.inputs!==a.props.inputs},a.pixelToNumber=function(e){return+e.replace("px","")},a.getHeight=function(e){return e>=35?e-=10:25},a.onInputClick=function(e){for(var t=a.props,n=t.inputs,r=t.setCanvasField,o=t.canvasData,i=+e.target.getAttribute("data-id"),c=0;c<n.length;c++)if(n[c].id===i){var s=n[c].label,l=s.childNodes[1];l.style.color=o.color,s.style.color=o.color,l.style.borderColor=o.color,l.style.fontSize=o.fontSize+"px",s.style.fontSize=o.fontSize+"px",l.style.height=a.getHeight(o.fontSize)+"px",r(n);break}},a.inputChangeHandler=function(e){var t=a.props.inputs,n=e.target.value;n=n.trim();for(var r=+e.target.getAttribute("data-id"),o=0;o<t.length;o++)if(t[o].id===r){var i=t[o].label.childNodes[0];n.length>0?i.textContent="":i.textContent="Input"}},a.dragStartHandler=function(e){var t=e.target.getAttribute("data-id");e.dataTransfer.setData("id",t)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.setCanvasLabel,n=t.inputs,r=t.labels,o=t.setCanvasField,i=r.map(function(t,a){return a===e.props.id&&(t=document.getElementById("label-"+e.props.id)),t}),c=n.map(function(t,a){return a===e.props.id&&(t.label=document.getElementById("label-"+e.props.id)),t});a(i),o(c)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.client,n=e.currentCanvasData;return p.a.createElement("label",{htmlFor:"input-"+t,draggable:!0,id:"label-"+t,style:{top:a.y,left:a.x,color:n.color,fontSize:n.fontSize+"px"},className:"canvas-label draggable","data-id":t,onClick:this.onInputClick,onDragStart:this.dragStartHandler},p.a.createElement("span",null,"Input"),p.a.createElement("input",{id:"input-"+t,"data-id":t,style:{borderColor:n.color,color:n.color,fontSize:n.fontSize+"px",height:this.getHeight(n.fontSize)+"px"},className:"canvas-input",onChange:this.inputChangeHandler}))}}]),t}(p.a.Component),it=Object(h.b)(nt,rt)(ot),ct=Object(g.mapDynamicState)("uploader: canvasData imageData inputs labels imagesToUpload"),st=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData setCanvasField setCanvasLabel resetReducer"),lt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={inputId:0},a.updateCanvasData=function(){var e=a.props,t=e.canvasData;(0,e.setCanvasData)(t)},a.createInput=function(){var e=a.state.inputId,t=a.props,n=t.inputs,r=t.canvasData,o=t.labels,i=t.setCanvasLabel,c=t.setCanvasField,s=r.imageBounds,l={x:s.x+10,y:s.y+10};n=n.slice(),(o=Object(S.a)(o).slice())[e]=p.a.createRef(),console.log(o),i(o);var u={element:p.a.createElement(it,{key:e,id:e,client:l,currentCanvasData:r}),id:e,label:o[e]};n[e]=u,c(n),a.setState({inputId:e+1,lastInput:u})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"panel-row"},p.a.createElement(J.a,{className:"color-white",onClick:this.createInput},"Create a textbox"))}}]),t}(p.a.Component),ut=Object(h.b)(ct,st)(lt);function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function mt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pt(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ft=ze(J.a),dt=Object(g.mapDynamicState)({uploader:"canvasData imageData inputs labels imagesToUpload",auth:"user"}),ht=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData setImagesToUpload resetReducer"),gt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={loader:{loading:!1,redirection:"/",success:!1,error:!1,errorMessage:""},uploading:!1},a.updateCanvasData=function(){var e=a.props,t=e.canvasData;(0,e.setCanvasData)(t)},a.pixelToNumber=function(e){return+e.replace("px","")},a.uploadHanler=function(){a.setState({loader:mt({},a.state.loader,{loading:!0}),uploading:!0}),a.setImagesToUpload(),a.upload()},a.setImagesToUpload=function(){var e=a.props,t=e.imagesToUpload,n=e.setImagesToUpload,r=e.canvasData,o=a.createTextCanvas(),i=a.getDrawingCanvas();i?t.draw=i.toDataURL():r.hasDrawingCanvas=!1,o?t.text=o.toDataURL():r.hasTextCanvas=!1,a.updateCanvasData(),n(t)},a.getDrawingCanvas=function(){var e=a.props.canvasData,t=e.imageBounds,n=t.width,r=t.height;if(new Uint32Array(e.context.getImageData(0,0,n,r).data.buffer).some(function(e){return 0!==e}))return e.canvas},a.createTextCanvas=function(){var e=a.props,t=e.canvasData,n=e.inputs;if(n.length){var r=t.imageBounds,o=r.width,i=r.height,c=document.createElement("canvas"),s=c.getContext("2d");return c.width=o-300,c.height=i,n.forEach(function(e){var t=e.label,n=t.style,r=t.getElementsByClassName("canvas-input")[0],o=a.pixelToNumber(r.style.fontSize);o=o+3+"px";var i=a.pixelToNumber(n.left),c=a.pixelToNumber(n.top)+12;s.fillStyle=n.color,s.font=o+" sans-serif",s.fillText(r.value,i,c)}),c}console.log("no input")},a.upload=function(){setTimeout(function(){var e=a.props,t=e.imagesToUpload,n=e.canvasData,r=e.user,o=n.hasTextCanvas,i=n.hasDrawingCanvas,c=t.draw,s=t.text,l=!c&&!s&&!o&&!i,u=c&&i&&!s&&!o||s&&o&&!c&&!i,p=c&&s&&o;if(console.log(n),console.log(t),l||u||p){console.log("uploading");var m=mt({},a.props.imageData,{},t,{user:r});De.Emit.uploadImage(m),De.On.imageUploaded(a.imageUploaded),De.On.imageUploadFailed(a.imageUploadFailed)}else console.log("not uploading")},1e3)},a.imageUploaded=function(){return a.setState({loader:mt({},a.state.loader,{success:!0})})},a.imageUploadFailed=function(){return a.setState({loader:mt({},a.state.loader,{error:!0})})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){De.Remove.imageUploaded(this.imageUploaded),De.Remove.imageUploadFailed(this.imageUploadFailed)}},{key:"render",value:function(){var e=this.state,t=e.uploading,a=e.loader;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(ft,{className:"color-white",show:!t,onClick:this.uploadHanler},"Upload"),p.a.createElement(he,Object.assign({},a,{successMessage:"The image has been uploaded"})))}}]),t}(p.a.Component),bt=Object(h.b)(dt,ht)(gt),vt=a(390),yt=a(394),Ot=a(387),jt=a(388),Et=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.contentProps,n=e.textProps;return p.a.createElement(Ot.a,a,p.a.createElement(jt.a,n,t))}}]),t}(p.a.Component),wt=a(389),Dt=a(395),Ct=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.onClose;return p.a.createElement(w.a,{container:!0,justify:"space-between"},p.a.createElement(w.a,{item:!0},p.a.createElement("span",null,t)),p.a.createElement(w.a,{item:!0},p.a.createElement(Dt.a,{title:"Close"},p.a.createElement("i",{className:"fas fa-times pointer",onClick:a}))))}}]),t}(p.a.Component),St=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).childrenWrapper=function(){return a.props.closer?Ct:function(e){return e.children}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.onClose,n=(e.closer,Object(I.a)(e,["children","onClose","closer"])),r=this.childrenWrapper();return p.a.createElement(wt.a,n,p.a.createElement(r,{onClose:a},t))}}]),t}(p.a.Component),Pt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).getChildrenElement=function(e){return W.a.isFunction(e.type)?e.type:W.a.isObject(e.type)?e.type.type:void 0},a.getUniqueKey=function(e,t){return t},a.singleChildren=function(e,t){var n=a.props,r=(n.children,Object(I.a)(n,["children"])),o=a.getUniqueKey(e,t),i=a.getChildrenElement(e);return p.a.createElement(i,Object.assign({},e.props,r,{key:o}))},a.overrideChildren=function(){var e=a.props,t=e.children,n=e.index;if(W.a.isArray(t)){var r=t.filter(W.a.isObject);return W.a.isSafeInteger(n)?r.map(function(e,t){return t===n?a.singleChildren(e,t):e}):r.map(a.singleChildren)}return W.a.isObject(t)?a.singleChildren(t,0):null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.overrideChildren()}}]),t}(p.a.Component),kt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).getChildren=function(){var e=a.props,t=e.children,n=e.onClose;return W.a.isArray(t)&&W.a.isObject(t[0])&&"DialogTitle"===t[0].type.name&&!0===t[0].props.closer?p.a.createElement(Pt,{onClose:n,index:0},t):t},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.children,Object(I.a)(e,["children"]));return p.a.createElement(yt.a,t,this.getChildren())}}]),t}(p.a.Component);kt.Content=Ot.a,kt.Text=jt.a,kt.ContentText=Et,kt.Title=St;var Nt=kt,xt=(a(256),Object(vt.a)()(function(e){var t=e.onClose,a=e.open;return p.a.createElement(Nt,{"aria-labelledby":"simple-dialog-title",open:a,onClose:t,PaperProps:{className:"bg-color-grey-darken-3 color-grey-lighten-4"}},p.a.createElement(Nt.Title,{closer:!0},"Tutorial"),p.a.createElement(Nt.ContentText,{textProps:{component:"div"}},p.a.createElement("div",{className:"text-content color-grey-lighten-1"},p.a.createElement("span",{className:"subtitle"},"You can:"),p.a.createElement("ul",null,p.a.createElement("li",null,"Change the color/alpha of the brush/text"),p.a.createElement("li",null,"Create a textbox"),p.a.createElement("li",null,"Move the textboxes"),p.a.createElement("li",null,"To remove a textbox you must drop it out of the image, re-drag it and quickly re-drop it"),p.a.createElement("li",null,"Change the text size"),p.a.createElement("li",null,"Erase what you drew"),p.a.createElement("li",null,"Change the eraser size"),p.a.createElement("li",null,"Remove everything you drew"),p.a.createElement("li",null,"Display/hide the textboxes and/or the drawing")),p.a.createElement("p",null,"The textboxes are created on the top left of the image,"))))})),It=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){return a.setState({open:!0})},a.handleClose=function(){return a.setState({open:!1})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.open;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(xt,{onClose:this.handleClose,open:e}),p.a.createElement("span",{className:"pointer",onClick:this.handleOpen},"Need help to draw an overlay?"))}}]),t}(p.a.Component);function At(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?At(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):At(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Rt=Object(g.mapDynamicState)("uploader: imageData"),Tt=Object(g.mapDynamicDispatch)(be.a.actions,"setImageData"),Ut=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",artistLink:"",artistName:"",tags:"",rate:""},a.updateState=function(){var e=a.props.imageData,t=Ft({},e,{artistName:"",artistLink:""});W.a.isObject(e)&&(t.artistName=e.artist.name,t.artistLink=e.artist.link),a.setState(t)},a.submit=function(e){var t=a.props,n=t.setImageData,r=t.onSubmit;n(a.transformFormData(a.state)),r(e)},a.transformFormData=function(e){var t=Ft({},e);return t.artistLink&&(t.artistLink=t.artistLink.trim(),/^https?:\/\//.test(t.artistLink)||(t.artistLink="http://"+t.artistLink)),t.artist={name:t.artistName,link:t.artistLink},delete t.artistName,delete t.artistLink,t},a._setState=function(e){return a.setState(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentDidUpdate",value:function(e){var t=this.props.imageData;W.a.isEqual(t,e.imageData)||this.updateState()}},{key:"render",value:function(){return p.a.createElement(me,{formData:this.state,changeFormData:this._setState,onSubmit:this.submit})}}]),t}(p.a.Component),Lt=Object(h.b)(Rt,Tt)(Ut),_t=(a(257),Object(vt.a)()(function(e){var t=e.open,a=e.onClose,n=e.onSubmit;return p.a.createElement(Nt,{className:"form-dialog",classes:{paper:"paper"},"aria-labelledby":"form of edition of the data associated to the image",open:t,onClose:a,PaperProps:{className:"bg-color-grey-darken-3 color-grey-lighten-4"}},p.a.createElement(Nt.Title,{closer:!0},"Change infos"),p.a.createElement(Nt.Content,null,p.a.createElement(Lt,{onSubmit:n})))})),Mt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.submit=function(){a.handleClose()},a.handleClick=function(){return a.setState({open:!0})},a.handleClose=function(){return a.setState({open:!1})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.open;return p.a.createElement("span",{className:"panel-row"},p.a.createElement(_t,{open:e,onClose:this.handleClose,onSubmit:this.submit}),p.a.createElement(J.a,{className:"color-white",onClick:this.handleClick},"Change infos"))}}]),t}(p.a.Component),zt=Object(g.mapDynamicDispatch)(be.a.actions,"setCanvasData"),Ht=Object(h.b)(null,zt)(function(){return p.a.createElement("div",{className:"ColorPanel colors color-picker-panel color-white text-center"},p.a.createElement(Ge,null),p.a.createElement(Je,null),p.a.createElement(at,null),p.a.createElement(ut,null),p.a.createElement(Mt,null),p.a.createElement(bt,null),p.a.createElement(It,null))});function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function qt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wt(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Bt=Object(g.mapDynamicState)("uploader: imageData canvasSize canvasData imagesToUpload inputs"),Vt=Object(g.mapDynamicDispatch)(be.a.actions,"setImageData setCanvasData resetReducer"),Gt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).canvas=null,a.img=p.a.createRef(),a.state={imageBounds:{}},a.setImageSize=function(){var e=a.props,t=e.imageData,n=e.setImageData,r=e.canvasData,o=e.setCanvasData;a.img.addEventListener("load",function(){var e=a.img.getBoundingClientRect();a.setState({imageBounds:e}),n(qt({},t,{width:e.width,height:e.height})),o(qt({},r,{context:a.canvas.getContext("2d"),imageBounds:e,canvas:a.canvas,img:a.img})),a.setCanvasPosition(e)})},a.setCanvasPosition=function(e){a.canvas.style.top=e.top+"px",a.canvas.style.left=e.left+"px"},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.canvas=document.getElementById("canvas"),this.setImageSize(),document.body.addEventListener("click",this.handleModalClose)}},{key:"componentWillUnmount",value:function(){(0,this.props.resetReducer)()}},{key:"render",value:function(){var e=this,t=this.props.imageData;return p.a.createElement("div",{id:"overlay-container"},p.a.createElement("img",{className:"draw-on",src:t.imageBase64,ref:function(t){return e.img=t},alt:""}),p.a.createElement(Te,null),p.a.createElement(Ht,{modalOpen:this.modalOpen}))}}]),t}(p.a.Component),Yt=Object(h.b)(Bt,Vt)(Gt),Kt=Object(g.mapDynamicState)("uploader: formView"),Xt=Object(g.mapDynamicDispatch)(be.a.actions,"resetReducer"),Jt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).components={Uploader:xe,Overlay:Yt},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.resetReducer()}},{key:"render",value:function(){var e=this.components[this.props.formView];return p.a.createElement(e,null)}}]),t}(p.a.Component),$t=Object(h.b)(Kt,Xt)(Jt),Qt=a(89),Zt=a.n(Qt),ea=(a(326),function e(){Object(o.a)(this,e)});ea.signupSuccess=function(e){return Oe.on("signupSuccess",e)},ea.signupFailed=function(e){return Oe.on("signupFailed",e)};var ta=function e(){Object(o.a)(this,e)};ta.signup=function(e){return Oe.emit("signup",e)};var aa=function e(){Object(o.a)(this,e)};function na(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ra(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?na(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):na(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}aa.signupSuccess=function(e){return Oe.removeListener("signupSuccess",e)},aa.signupFailed=function(e){return Oe.removeListener("signupFailed",e)};var oa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={loader:{loading:!1,success:!1,error:!1,errorMessage:"",redirection:"/"}},a.changeLoader=function(e){a.setState({loader:ra({},a.state.loader,{},e)})},a.submit=function(e){a.changeLoader({loading:!0}),ta.signup(e),ea.signupSuccess(function(e){return a.signupSuccess(e.user)}),ea.signupFailed(a.signupFailed)},a.signupSuccess=function(e){a.changeLoader({success:!0}),C.a.signup(e)},a.signupFailed=function(e){a.changeLoader({error:!0,errorMessage:e.error})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){var e=this;aa.signupSuccess(function(t){return e.signupSuccess(t.user)}),aa.signupFailed(this.signupFailed)}},{key:"render",value:function(){var e=this.state.loader;return p.a.createElement(w.a,{container:!0,className:"text-center Signup",justify:"center"},p.a.createElement(ge.a,{md:8},p.a.createElement(w.a,{container:!0,className:"text-center Signup",justify:"center"},p.a.createElement(Zt.a,{onSubmit:this.submit,field:le.a.Override,title:"Signup",fields:["username","password","confirmPassword"],submitText:"Signup",errorMessage:""},p.a.createElement(w.a,{container:!0,className:"mt-2",justify:"center"},p.a.createElement(he,Object.assign({},e,{successMessage:"Your account has been created"})))))))}}]),t}(p.a.Component),ia=function e(){Object(o.a)(this,e)};ia.loginSuccess=function(e){return Oe.on("loginSuccess",e)},ia.loginFailed=function(e){return Oe.on("loginFailed",e)};var ca=function e(){Object(o.a)(this,e)};ca.login=function(e){return Oe.emit("login",e)};var sa=function e(){Object(o.a)(this,e)};sa.loginSuccess=function(e){return Oe.removeListener("loginSuccess",e)},sa.loginFailed=function(e){return Oe.removeListener("loginFailed",e)};var la=a(383),ua=(a(327),Object(g.mapDynamicState)("auth: deniedPage")),pa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={deniedPage:a.props.deniedPage},a.supplementText=function(){if("ROLE_USER"===a.state.deniedPage.require)return"You must be logged to access this page."},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.deniedPage,t=this.props,a=t.open,n=t.onClose;return p.a.createElement(yt.a,{className:"Alert",open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement(wt.a,{className:"py-2",id:"alert-dialog-title"},p.a.createElement(w.a,{container:!0,justify:"space-between",alignItems:"center"},p.a.createElement("span",null,"Access denied!"),p.a.createElement(Dt.a,{title:"Close","aria-label":"close"},p.a.createElement(la.a,{onClick:n,className:"pointer bg-color-transparent-and-hover"},p.a.createElement("i",{className:"fas fa-times square-icon"}))))),p.a.createElement(Ot.a,null,p.a.createElement(jt.a,{id:"alert-dialog-description"},"You do not have access to ",p.a.createElement("span",{className:"bb-1"},e.path),p.a.createElement("br",null),this.supplementText())))}}]),t}(p.a.Component),ma=Object(h.b)(ua)(pa);function fa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function da(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fa(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ha=Object(g.mapDynamicState)("auth: deniedPage"),ga=Object(g.mapDynamicDispatch)(q.a.actions,"setDeniedPage"),ba=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={deniedAlert:!1,loader:{loading:!1,success:!1,error:!1,errorMessage:"",redirection:"/"}},a.changeLoader=function(e){a.setState({loader:da({},a.state.loader,{},e)})},a.submit=function(e){a.changeLoader({loading:!0}),ca.login(e),ia.loginSuccess(function(e){return a.loginSuccess(e.user)}),ia.loginFailed(a.loginFailed)},a.loginSuccess=function(e){a.changeLoader({success:!0}),C.a.login(e)},a.loginFailed=function(e){a.changeLoader({error:!0,errorMessage:e.error})},a.handleClose=function(){var e=a.props.setDeniedPage;a.setState({deniedAlert:!1}),e({})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.deniedPage.require&&this.setState({deniedAlert:!0})}},{key:"componentWillUnmount",value:function(){var e=this;this.handleClose(),sa.loginSuccess(function(t){return e.loginSuccess(t.user)}),sa.loginFailed(this.loginFailed)}},{key:"render",value:function(){var e=this.state,t=e.loader,a=e.deniedAlert;return p.a.createElement(w.a,{container:!0,className:"text-center Login",justify:"center"},p.a.createElement(ge.a,{md:8},p.a.createElement(w.a,{container:!0,className:"text-center Login",justify:"center"},p.a.createElement(ma,{open:a,onClose:this.handleClose}),p.a.createElement(Zt.a,{onSubmit:this.submit,field:le.a.Override,title:"Login",fields:["username","password"],submitText:"Login",errorMessage:""},p.a.createElement(w.a,{container:!0,direction:"column",className:"mt-2",justify:"center"},p.a.createElement(d.b,{className:"color-blue-lighten-1 mb-2",to:"/signup"},"You do not have an account yet?"),p.a.createElement(he,Object.assign({},t,{timeout:0})))))))}}]),t}(p.a.Component),va=Object(h.b)(ha,ga)(ba),ya=a(69),Oa=(a(328),a(31)),ja=a(393),Ea=a(162),wa=a.n(Ea),Da=(a(332),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.currentPage;return e=+e-1,p.a.createElement(wa.a,Object.assign({forcePage:e},this.props))}}]),t}(p.a.Component));Da.defaultProps={currentPage:1,previousLabel:p.a.createElement(p.a.Fragment,null,p.a.createElement("i",{className:"fas fa-angle-left translate-y-11"}),p.a.createElement("span",{className:"ml-2"},"previous")),nextLabel:p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"mr-2"},"next"),p.a.createElement("i",{className:"fas fa-angle-right translate-y-11"})),breakLabel:"...",breakClassName:"break",marginPagesDisplayed:1,pageRangeDisplayed:5,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"};var Ca=Da,Sa=Object(g.mapDynamicState)("gallery: currentImage showOverlay"),Pa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).renderOverlays=function(e){var t=a.props.showOverlay,n=[];if(e.canvas){var r=e.canvas;for(var o in r)if(t.includes(o)&&r[o]){var i=p.a.createElement("img",{key:r[o],className:"image overlay "+o,src:r[o],alt:""});n.push(i)}}return n},a.loadHandler=function(e){var t=a.props.onLoad;W.a.isFunction(t)&&t(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.image,a=e.src;return t?(console.log(this.renderOverlays(t)),p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{onLoad:this.loadHandler,src:a,className:"image mainImage ".concat(t.rate),alt:""}),this.renderOverlays(t))):null}}]),t}(p.a.Component),ka=Object(h.b)(Sa)(Pa),Na=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).loadHandler=function(e){var t=a.props.onLoad;console.log("loadHandler");var n=e.target;n.offsetParent.style.height=n.naturalHeight+"px",n.offsetParent.style.width=n.naturalWidth+"px",W.a.isFunction(t)&&t(e)},a.getSubContainer=function(){var e=a.props.subContainer;return W.a.isFunction(e)?e:p.a.Fragment},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=this.getSubContainer();return p.a.createElement("div",{className:O()("image-container",a)},p.a.createElement(n,null,p.a.createElement(Pt,{onLoad:this.loadHandler},t)))}}]),t}(p.a.Component),xa=(a(333),Object(g.mapDynamicState)("gallery: images showOverlay currentPage currentUser")),Ia=Object(g.mapDynamicDispatch)(Oa.a.actions,"setImages setCurrentPage setSearchOptionsPanel"),Aa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={pageCount:150},a.handlePageChange=function(e){var t=a.props,n=t.history,r=t.currentUser,o=t.setCurrentPage;(0,t.setImages)([]),n.push("/gallery/".concat(r,"/").concat(e.selected+1)),o(e.selected+1)},a.openPanel=function(){(0,a.props.setSearchOptionsPanel)(!0)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.pageCount,t=this.props,a=t.images,n=t.currentPage;t.size;return W.a.isArray(a)||(a=[]),p.a.createElement(w.a,{container:!0,justify:"center",className:"Images"},p.a.createElement(ge.a,null,p.a.createElement(w.a,{container:!0,alignItems:"center",direction:"column"},p.a.createElement(ja.a,{mdUp:!0},p.a.createElement(w.a,{container:!0,item:!0,justify:"flex-end"},p.a.createElement(w.a,{item:!0,className:"px-5 mt-4"},p.a.createElement("div",{onClick:this.openPanel,className:"pointer"},p.a.createElement("span",{className:"mr-2"},"Search options"),p.a.createElement("i",{className:"fas fa-caret-right lg"}))))),p.a.createElement(w.a,{item:!0,container:!0,direction:"row",wrap:"wrap",justify:"center",className:"px-2 mt-4"},a.map(function(e){return p.a.createElement(Na,{className:"z-elevation-3 z-elevation-7-hover shadow-trans",subContainer:function(t){var a=t.children;return p.a.createElement(d.b,{to:"/image/"+e._id},a)},key:e._id},p.a.createElement(ka,{src:e.thumb,image:e}))})),p.a.createElement(w.a,{item:!0},p.a.createElement(Ca,{onPageChange:this.handlePageChange,currentPage:n,pageCount:e})))))}}]),t}(p.a.Component),Fa=Object(h.b)(xa,Ia)(Aa),Ra=function e(){Object(o.a)(this,e)};Ra.sendImage=function(e){return Oe.on("sendImage",e)},Ra.getImageFailed=function(e){return Oe.on("getImageFailed",e)},Ra.sendImagesCount=function(e){return Oe.on("sendImagesCount",e)},Ra.getImagesCountFailed=function(e){return Oe.on("getImagesCountFailed",e)};var Ta=function e(){Object(o.a)(this,e)};Ta.getImagesPage=function(e){return Oe.emit("getImagesPage",e)},Ta.getImagesCount=function(e){return Oe.emit("getImagesCount",e)};var Ua=function e(){Object(o.a)(this,e)};function La(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?La(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):La(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Ua.sendImage=function(e){return Oe.removeListener("sendImage",e)},Ua.getImageFailed=function(e){return Oe.removeListener("getImageFailed",e)},Ua.sendImagesCount=function(e){return Oe.removeListener("sendImagesCount",e)},Ua.getImagesCountFailed=function(e){return Oe.removeListener("getImagesCountFailed",e)};var Ma=Object(g.mapDynamicState)({gallery:"searchOptions currentPage currentUser",auth:"user"}),za=Object(g.mapDynamicDispatch)(Oa.a.actions,"setImages"),Ha=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={pageCount:150},a.request=function(){var e=a.props,t=e.user,n=e.currentPage,r=e.searchOptions,o=e.currentUser;"string"===typeof r.search&&(r.search=r.search.trim().split(" ").filter(function(e){return e}));var i={tags:Object(S.a)(r.search),page:n,searchOptions:_a({},r,{match:{user:{slug:o}}}),user:t};Ta.getImagesPage(i)},a.setImages=function(e){(0,a.props.setImages)(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ra.sendImage(function(t){return e.setImages(t.images)}),this.request()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.user,n=t.searchOptions,r=t.currentPage,o=t.currentUser,i=!W.a.isEqual(e.user,a);(i=(i=(i=i||!W.a.isEqual(e.searchOptions,n))||r!==e.currentPage)||o!==e.currentUser)&&this.request()}},{key:"componentWillUnmount",value:function(){var e=this;Ua.sendImage(function(t){return e.setImages(t.images)})}},{key:"render",value:function(){return null}}]),t}(p.a.Component),Wa=Object(h.b)(Ma,za)(Ha),qa=(a(334),Object(g.mapDynamicState)({gallery:"showOverlay",auth:"user"})),Ba=Object(g.mapDynamicDispatch)(Oa.a.actions,"setShowOverlay"),Va=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,a.props.setShowOverlay)(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.showOverlay;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(D.a,{variant:"h6",className:"color-blue-darken-3"},"Display overlays"),p.a.createElement(re.Multiple,{name:"display",value:e,data:[{label:"Drawing",name:"draw"},{label:"Text",name:"text"}],onChange:this.handleChange}))}}]),t}(p.a.Component),Ga=Object(h.b)(qa,Ba)(Va),Ya=a(149),Ka=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.type,n=e.label,r=e.field,o=e.className,i=void 0===o?"":o,c=Object(I.a)(e,["name","type","label","field","className"]),s=r||Ya.a;return p.a.createElement(s,Object.assign({},c,{name:t,label:n,id:t,className:t+" "+i,type:a||"text"}))}}]),t}(p.a.Component);function Xa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ja=Object(g.mapDynamicState)({gallery:"showOverlay images filter currentPage",auth:"user"}),$a=Object(g.mapDynamicDispatch)(Oa.a.actions,"setFilter setImages setSearchOptions"),Qa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).submit=function(e){var t=a.props,n=t.search,r=t.searchOptions,o=t.setSearchOptions;e.preventDefault(),o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xa(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},r,{search:n}))},a.setImages=function(e){(0,a.props.setImages)(e)},a.handleChange=function(e){var t=e.target.value;a.props.setState({search:t})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"panel-row"},p.a.createElement(D.a,{variant:"h6",className:"color-blue-darken-3"},"Search"),p.a.createElement("form",{onSubmit:this.submit,className:"d-flex"},p.a.createElement(Ka,{className:"field",label:"Search",name:"search",type:"text",onChange:this.handleChange}),p.a.createElement(J.a,{className:"color-white bold-nested"},"Search")))}}]),t}(p.a.Component),Za=Object(h.b)(Ja,$a)(Qa),en=a(159),tn=a(163),an=a.n(tn),nn=function(e){return function(t){return an()(t,e)}},rn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){a.props.setState(nn({searchOptions:{$merge:{sort:Object(x.a)({},e,t.target.value)}}}))}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.searchOptions;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(D.a,{variant:"h6",className:"color-blue-darken-3"},"Sorting"),p.a.createElement(en.a,{className:"field",value:e.sort.criteria,onChange:this.handleChange("criteria")},p.a.createElement("option",{className:"color-black",value:"date"},"date")),p.a.createElement("span",null,"in the"),p.a.createElement(en.a,{className:"field ml-2",value:e.sort.order,onChange:this.handleChange("order")},p.a.createElement("option",{className:"color-black",value:"ASC"},"ascending"),p.a.createElement("option",{className:"color-black",value:"DESC"},"descending")),p.a.createElement("span",null,"order"))}}]),t}(p.a.Component);function on(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var cn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.setState(function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?on(a,!0).forEach(function(t){Object(x.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):on(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t.searchOptions);return t.searchOptions.haveOverlays.includes("*")?e.length>1?a.haveOverlays=e.filter(function(e){return"*"!==e}):a.haveOverlays=e:e.includes("*")?a.haveOverlays=["*"]:a.haveOverlays=e,{searchOptions:a}})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.searchOptions;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(D.a,{variant:"h6",className:"color-blue-darken-3"},"Have overlays"),p.a.createElement("div",{className:"d-flex justify-content-between"},p.a.createElement(re.Multiple,{name:"have",value:e.haveOverlays,className:"resize scale-1 m-0",data:[{label:"Drawing",name:"draw"},{label:"Text",name:"text"},{label:"No matter",name:"no matter",value:"*"}],onChange:this.handleChange})))}}]),t}(p.a.Component),sn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.setState(nn({searchOptions:{$merge:{rating:e}}}))},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.searchOptions;return p.a.createElement("div",{className:"panel-row"},p.a.createElement(D.a,{variant:"h6",className:"color-blue-darken-3"},"Rating"),p.a.createElement("div",{className:"d-flex justify-content-between"},p.a.createElement(re.Multiple,{name:"rating",value:e.rating,className:"resize scale-1 m-0",data:[{label:"General",name:"general"},{label:"Suggestive",name:"suggestive"},{label:"NSFW",name:"nsfw"}],onChange:this.handleChange})))}}]),t}(p.a.Component),ln=Object(g.mapDynamicState)("gallery: searchOptionsPanel"),un=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={inputTags:[],search:"",searchOptions:{haveOverlays:["*"],rating:["general","suggestive","nsfw"],sort:{criteria:"date",order:"ASC"}}},a._setState=function(e){a.setState(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.searchOptions,a=e.search,n=this.props,r=n.children,o=n.size,i=n.searchOptionsPanel;return p.a.createElement("div",{className:O()("RightPanel color-white h-100",o,{open:i})},p.a.createElement(Pt,{setState:this._setState,searchOptions:t,search:a,size:o},r))}}]),t}(p.a.Component);un.DisplayRow=Ga,un.SearchRow=Za,un.SortRow=rn,un.HaveOverlaysRow=cn,un.RatingRow=sn;var pn=Object(h.b)(ln)(un),mn=Object(g.mapDynamicDispatch)(Oa.a.actions,"setSearchOptionsPanel"),fn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){(0,a.props.setSearchOptionsPanel)(!1)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return"large"===this.props.size?null:p.a.createElement("div",{className:"panel-row d-flex justify-content-end px-2"},p.a.createElement("i",{className:"fas fa-times fa-2x pointer",onClick:this.handleClose}))}}]),t}(p.a.Component),dn=Object(h.b)(null,mn)(fn),hn=function(e){var t=e.setState,a=e.searchOptions,n=e.search,r=e.size,o=Object(I.a)(e,["setState","searchOptions","search","size"]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(dn,{size:r}),p.a.createElement(pn.DisplayRow,o),p.a.createElement(pn.SearchRow,Object.assign({},o,{setState:t,searchOptions:a,search:n})),p.a.createElement(pn.SortRow,Object.assign({},o,{setState:t,searchOptions:a})),p.a.createElement(pn.HaveOverlaysRow,Object.assign({},o,{setState:t,searchOptions:a})),p.a.createElement(pn.RatingRow,Object.assign({},o,{setState:t,searchOptions:a})))},gn=Object(g.mapDynamicState)("gallery: currentImage"),bn=Object(h.b)(gn)(function(e){var t=e.currentImage;return p.a.createElement(w.a,{container:!0,item:!0,justify:"space-between"},p.a.createElement(w.a,{item:!0},p.a.createElement(D.a,{variant:"h6"},t.user.name)),p.a.createElement(w.a,{item:!0},p.a.createElement("span",{className:"rating ".concat(t.rate)},W.a.capitalize(t.rate))))}),vn=Object(g.mapDynamicState)("gallery: currentImage"),yn=Object(h.b)(vn)(function(e){var t=e.currentImage;return p.a.createElement(w.a,{container:!0,direction:"column"},p.a.createElement(w.a,{item:!0},p.a.createElement(D.a,{variant:"h5"},t.title)),p.a.createElement(w.a,{item:!0},p.a.createElement("p",null,t.description)))}),On=(a(335),function(){return p.a.createElement(w.a,{container:!0,item:!0,className:"bg-color-grey-darken-1 color-white pt-2 px-3 Description"},p.a.createElement(bn,null),p.a.createElement("hr",{className:"gradient color-grey my-2"}),p.a.createElement(yn,null))}),jn=(a(336),Object(g.mapDynamicState)("gallery: currentImage showOverlay")),En=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).getImgSize=function(e,t){var a,n;return W.a.isObject(e)?(t?(a=e.offsetWidth,n=e.offsetHeight):(a=e.naturalWidth,n=e.naturalHeight),{width:a,height:n}):{width:0,height:0}},a.resizeContainer=function(e,t){var n=document.getElementsByClassName("mainImage")[0],r=document.getElementsByClassName("image-container")[0],o=a.getImgSize(n,t).height;r.style.height=o+"px"},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(t){return e.resizeContainer(t,!0)})}},{key:"render",value:function(){var e=this.props.currentImage;return e?p.a.createElement(w.a,{container:!0,className:"Image"},p.a.createElement(w.a,{container:!0,item:!0,justify:"center",className:"bg-color-grey-darken-4"},p.a.createElement(Na,null,p.a.createElement(ka,{src:e.link,image:e}))),p.a.createElement(w.a,{container:!0,item:!0,justify:"center",className:"bg-color-grey-darken-3 p-2"},p.a.createElement(On,null))):null}}]),t}(p.a.Component),wn=Object(h.b)(jn)(En),Dn=function(){return null},Cn=(a(148),Object(g.mapDynamicState)("gallery: currentImage")),Sn=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.currentImage;return e?(e.tags=e.tags.filter(function(e){return"*"!==e.name}),p.a.createElement("div",{className:"panel-row Tags"},p.a.createElement(w.a,{container:!0},e.tags.map(function(e){return p.a.createElement("span",{className:"tag py-1 px-3 m-1 bg-color-grey-darken-2",key:e._id},e.name)})))):null}}]),t}(p.a.Component),Pn=Object(h.b)(Cn)(Sn),kn=a(104),Nn=a.n(kn),xn=Object(g.mapDynamicState)("gallery: currentImage"),In=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).getValidElement=function(){var e=a.props.currentImage;return Nn.a.isURL(e.artist.link)?function(t){var a=t.children,n=Object(I.a)(t,["children"]);return p.a.createElement("a",Object.assign({},n,{rel:"noreferrer",href:e.artist.link}),a)}:function(e){var t=e.children,a=Object(I.a)(e,["children"]);return p.a.createElement("span",a,t)}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.currentImage;if(!e)return null;var t=this.getValidElement();return p.a.createElement("div",{className:"panel-row AdditionalData"},p.a.createElement("span",{className:"fw-500"},"Artist name:")," ",p.a.createElement(t,{className:"color-white"},e.artist.name))}}]),t}(p.a.Component),An=Object(h.b)(xn)(In),Fn=function(e){e.setState,e.searchOptions,e.search;var t=Object(I.a)(e,["setState","searchOptions","search"]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(pn.DisplayRow,t),p.a.createElement(Pn,null),p.a.createElement(An,null))},Rn=Object(g.mapDynamicState)("gallery: showOverlay filteredImages images"),Tn=Object(g.mapDynamicDispatch)(Oa.a.actions,"setCurrentPage"),Un=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={topSize:"0px"},a.setTopSize=function(){var e=document.getElementById("Navbar").offsetHeight+"px";a.setState({topSize:e})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setTopSize(),window.addEventListener("resize",this.setTopSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setTopSize)}},{key:"render",value:function(){var e=this.state.topSize,a=this.props,o=a.history,i=a.kind,c=n,s=i===t.kind.multiple,l=i===t.kind.single;if(s)c=n;else{if(!l)throw new Error('Kind must be of value "Gallery.kind", got "'.concat(i,'"'));c=r}return p.a.createElement("div",{className:"Gallery"},p.a.createElement(c.Requester,null),p.a.createElement(ya.Fill,null,p.a.createElement(ya.Top,{size:e}),p.a.createElement(ya.Fill,null,p.a.createElement(ya.Fill,{scrollable:!0},p.a.createElement(c.Displayer,{history:o})),p.a.createElement(ja.a,{smDown:!0},p.a.createElement(ya.Right,{size:"297px"},p.a.createElement(pn,{size:"large"},p.a.createElement(c.RightPanel,null)))),s&&p.a.createElement(ja.a,{mdUp:!0},p.a.createElement(pn,{size:"small"},p.a.createElement(c.RightPanel,null))))))}}]),t}(p.a.Component);Un.kind={multiple:0,single:1},Un.defaultProps={currentPage:1};var Ln=Object(h.b)(Rn,Tn)(Un),_n=Object(g.mapDynamicState)("gallery: currentPage"),Mn=Object(g.mapDynamicDispatch)(Oa.a.actions,"setCurrentPage setCurrentUser"),zn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).initGallery=function(){var e=a.props,t=e.match,n=e.setCurrentPage,r=e.setCurrentUser;t.params.page&&n(t.params.page),r(t.params.user_slug)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.initGallery()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.match,n=t.setCurrentUser;a.params.user_slug!==e.match.params.user_slug&&n(a.params.user_slug)}},{key:"render",value:function(){var e=this.props.history;return p.a.createElement(Ln,{history:e,kind:Ln.kind.multiple})}}]),t}(p.a.Component),Hn=Object(h.b)(_n,Mn)(zn),Wn=function e(){Object(o.a)(this,e)};Wn.sendImage=function(e){return Oe.on("sendImage",e)},Wn.getImageFailed=function(e){return Oe.on("getImageFailed",e)};var qn=function e(){Object(o.a)(this,e)};qn.getImageById=function(e){return Oe.emit("getImageById",e)};var Bn=function e(){Object(o.a)(this,e)};Bn.sendImage=function(e){return Oe.removeListener("sendImage",e)},Bn.getImageFailed=function(e){return Oe.removeListener("getImageFailed",e)};var Vn=Object(g.mapDynamicState)("gallery: currentImage showOverlay"),Gn=Object(g.mapDynamicDispatch)(Oa.a.actions,"setCurrentImage setShowOverlay"),Yn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).request=function(){var e=a.props.match;qn.getImageById({id:e.params.id})},a.setImages=function(e){(0,a.props.setImages)(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.setCurrentImage;Wn.sendImage(function(e){return a(e.image)}),t.params.id&&this.request()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.request()}},{key:"componentWillUnmount",value:function(){var e=this.props.setCurrentImage;Bn.sendImage(function(t){return e(t.image)})}},{key:"render",value:function(){var e=this.props.history;return p.a.createElement(Ln,{history:e,kind:Ln.kind.single})}}]),t}(p.a.Component),Kn=Object(h.b)(Vn,Gn)(Yn),Xn=a(164),Jn=(a(337),function(){return p.a.createElement(w.a,{container:!0,className:"NotFound",justify:"center"},p.a.createElement("h1",{className:"py-2 by-2 border-gradient color-blue"},p.a.createElement("span",{className:"color-black"},"The page you're trying to acces doesn't exists")))}),$n=function(){return p.a.createElement(M.Switch,null,p.a.createElement(M.Route,{exact:!0,path:["/","/home"],component:K}),p.a.createElement(Y,{exact:!0,path:"/upload",role:z.a.user,component:$t}),p.a.createElement(M.Route,{exact:!0,path:"/signup",component:oa}),p.a.createElement(M.Route,{exact:!0,path:"/login",component:va}),p.a.createElement(M.Route,{exact:!0,path:"/gallery/:user_slug/:page?",component:Hn}),p.a.createElement(M.Route,{exact:!0,path:"/image/:id",component:Kn}),p.a.createElement(M.Route,{exact:!0,path:"/profile",component:Xn.a}),p.a.createElement(M.Route,{exact:!0,component:Jn}))},Qn=Object(g.mapDynamicDispatch)(v.a.actions,"setTags")(b.a.dispatch),Zn=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){C.a.login(),Oe.emit("getAllTags"),Oe.on("sendTags",function(e){Qn.setTags(e.tags)})}},{key:"render",value:function(){return p.a.createElement(h.a,{store:b.a},p.a.createElement(d.a,null,p.a.createElement(p.a.Fragment,null,p.a.createElement(_,null),p.a.createElement($n,null))))}}]),t}(p.a.Component);f.a.render(p.a.createElement(Zn,null),document.getElementById("root"))},35:function(e,t,a){"use strict";var n=a(2),r=a(0),o=a.n(r),i=a(38),c=a.n(i),s=a(340),l=a(67),u=function(e){var t=e.children,a=e.title,r=e.className,i=Object(n.a)(e,["children","title","className"]);return o.a.createElement(s.a,Object.assign({},i,{sm:11,container:!0,item:!0,className:c()("bg-color-grey-darken-4 color-grey-lighten-2 p-4 border-gradient by-1 my-2",r)}),o.a.createElement(l.a,{variant:"h5"},a),t)};u.Sub=function(e){var t=e.children;return o.a.createElement(s.a,{container:!0,item:!0,alignItems:"center"},o.a.createElement(s.a,{md:4,item:!0},t[0]),o.a.createElement(s.a,{item:!0},t[1]))};t.a=u},41:function(e,t,a){"use strict";var n=a(2),r=a(3),o=a(4),i=a(5),c=a(6),s=a(7),l=a(0),u=a.n(l),p=a(118),m=a(152),f=a(341),d=a(385),h=a(38),g=a.n(h),b=function(e){var t=e.name,a=e.label,n=e.value,r=e.onChange,o=e.type,i=e.fullWidth,c=e.elevation;return u.a.createElement(y,{name:t,label:a,value:n,onChange:r,type:o,fullWidth:i,elevation:c})},v=(a(222),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.elevation,r=e.name,o=e.label,i=e.error,c=e.type,s=e.value,l=e.helperText,h=e.errorMessage,b=e.fullWidth,v=e.onChange,y=Object(n.a)(e,["className","elevation","name","label","error","type","value","helperText","errorMessage","fullWidth","onChange"]),O="".concat(r,"-helper");return u.a.createElement(p.a,{className:"custom-field",error:i,fullWidth:b},u.a.createElement(m.a,{variant:"standard",htmlFor:r},o),u.a.createElement(f.a,Object.assign({},y,{value:s,onChange:v,type:c,fullWidth:b,name:r,id:r,"aria-describedby":O,className:g()("custom-input z-elevation-".concat(a),t)})),u.a.createElement(d.a,{className:"helper",id:O},i?h:l))}}]),t}(u.a.Component));v.Override=b,v.defaultProps={elevation:2};var y=t.a=v},49:function(e,t,a){"use strict";var n=a(8),r=new n.DynamicState("auth",{user:{},deniedPage:{}});r.createState({login:{type:"LOGIN",prop:"user"},setDeniedPage:"SET_DENIED_PAGE"}),t.a=r},68:function(e,t,a){"use strict";var n=a(8),r=a(74),o=a(31),i=a(83),c=a(49),s=a(22),l=Object(r.combineReducers)({miscReducer:i.a.reducer,uploaderReducer:s.a.reducer,galleryReducer:o.a.reducer,authReducer:c.a.reducer});t.a=Object(n.createStore)(l)},75:function(e,t,a){"use strict";t.a={user:"ROLE_USER"}},8:function(e,t,a){"use strict";t.mapDynamicState=a(188),t.mapDynamicDispatch=a(189),t.createStore=a(190),t.DynamicState=a(191)},83:function(e,t,a){"use strict";var n=a(8),r=new n.DynamicState("misc",{tags:[]});r.createState({setTags:"SET_TAGS"}),t.a=r},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(a(0)),r=p(a(258)),o=p(a(320)),i=a(46),c=p(a(81)),s=a(324),l=a(325),u=a(147);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(s){r=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){y(e,t,a[t])})}return e}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var O=function(e){function t(e){var a,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=g(t).call(this,e),a=!o||"object"!==f(o)&&"function"!==typeof o?b(n):o,y(b(a),"getFields",function(e){a.fields=[];var n=[];e&&e.fields&&e.fields.forEach(function(e){var r;if(!(r="string"===typeof e?s.fields[e]:"Object"===e.constructor.name?d({},s.fields[e.name],e):{}))return console.error(new Error('"'.concat(e,'" is not a pre-defined field')));for(var o in r.label=r.label||r.name,r&&Array.isArray(r.validations)?r.validations=d({},t.validations(r.label,r.validations)):r.validations={},e.validations&&"Object"===e.validations.constructor.name&&(r=d({},r,e,{validations:d({},r.validations,e.validations)})),a.fields.push(r),r.validations)if(r.validations.hasOwnProperty(o)){var i=r.validations[o];i.field=r.name,n.push(i)}}),a.validator=new r.default(n),a.submitted=!1}),y(b(a),"handleChange",function(e){return function(t,n,r){t.preventDefault();var o=a.props.onChange;e?e(t,n,r):o&&o(t,n,r),a.setState(y({},r||t.target.name,n||t.target.value))}}),y(b(a),"handleSubmit",function(e){e.preventDefault();var t=a.validator.validate(a.state);a.setState({validation:t}),a.submitted=!0,t.isValid&&a.props.onSubmit(a.state,e)}),a.getFields(e);var i={};return a.fields.forEach(function(e){return i[e.name]=e.value||""}),a.state=d({},i,{validation:a.validator.valid()}),a}var a,l,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,n.default.Component),a=t,(l=[{key:"render",value:function(){var e=this,t=this.props,a=t.submitText,r=t.redirection,s=t.title,l=t.field,u=t.errorMessage,p=t.redirect,m=t.children,f=t.rangeField,d=t.selectField,h=t.onFocus,g=t.onBlur,b=this.submitted?this.validator.validate(this.state):this.state.validation;return n.default.createElement("form",{onSubmit:this.handleSubmit},n.default.createElement("h1",null,s),this.fields.map(function(t){return n.default.createElement(o.default,{key:t.name,value:e.state[t.name],name:t.name,label:t.label,type:t.type||"text",validation:b,onFocus:t.onFocus||h,onBlur:t.onBlur||g,onChange:e.handleChange(t.onChange),field:t.field||l,placeholder:t.placeholder,elementType:t.elementType,options:t.options,min:t.min,max:t.max,step:t.step,rangeField:t.field||f,selectField:t.field||d,minlength:t.minlength,maxlength:t.maxlength})}),n.default.createElement(c.default,{variant:"contained",color:"primary",type:"submit"},a||"Submit"),n.default.createElement("br",null),n.default.createElement("span",{className:"externalError"},u),p&&r&&n.default.createElement(i.Redirect,{to:r}),m)}}])&&h(a.prototype,l),u&&h(a,u),t}();y(O,"validations",function(e,t){var a={};return t.forEach(function(t){var n=m(t.split(":"),2),r=n[0],o=n[1],i=!1;for(var c in"!"===r.charAt(0)&&(r=r.substring(1),i=!0),a[r]=(0,u.copyNestedObject)(l.validations[r]),i&&(a[r].validWhen=!a[r].validWhen),a[r])if(a[r].hasOwnProperty(c)&&"method"!==c){var s=o?o.split("-"):[],p=o?o.split("$")[1]:"";a[r]=(0,u.deepReplace)(a[r],/<.+>/,{label:e,min:s[0],max:s[1],match:p,not:(i?"should":"does")+"n't"})}}),a});var j=O;t.default=j}},[[179,1,2]]]);
//# sourceMappingURL=main.0a243f2b.chunk.js.map
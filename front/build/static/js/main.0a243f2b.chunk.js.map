{"version":3,"sources":["../locale_modules/dynamic-form/dist/utils.js","components/Pages/Profile/index.js","components/Pages/Profile/AccountSettings.js","components/Pages/Profile/UpdatePassword.js","../locale_modules/dynamic-redux/dist/mapDynamicState.js","../locale_modules/dynamic-redux/dist/mapDynamicDispatch.js","../locale_modules/dynamic-redux/dist/createStore.js","../locale_modules/dynamic-redux/dist/DynamicState.js","../locale_modules/dynamic-redux/dist/utils.js","store/states/uploader.js","../locale_modules/dynamic-form/locale_modules/form-validator/dist/index.js","services/Auth.js","store/states/gallery.js","../locale_modules/dynamic-form/dist/Field/index.js","../locale_modules/dynamic-form/dist/Field/TextField.js","../locale_modules/dynamic-form/dist/Field/Select.js","../locale_modules/dynamic-form/dist/Field/Range.js","../locale_modules/dynamic-form/dist/fields.js","../locale_modules/dynamic-form/dist/validations.js","components/Globals/Navbar/Menu/data.js","components/Globals/Navbar/Menu/MenuItem.js","components/Globals/Navbar/Menu/index.js","components/Globals/Navbar/index.js","components/Partials/ProtectedRoute/index.js","components/Pages/Home/index.js","components/Partials/Checkbox/Multiple.js","components/Partials/Checkbox/YesNo.js","components/Partials/Checkbox/index.js","socket/config.js","components/Pages/Upload/Uploader/Forms/NonEditableFields/NonEditableFields.js","components/Pages/Upload/Uploader/Forms/FormWrapper.js","components/Pages/Upload/Uploader/Forms/NonEditableFields/index.js","components/Pages/Upload/Uploader/Forms/EditableFields/fields.js","components/Pages/Upload/Uploader/Forms/EditableFields/EditableFields.js","components/Pages/Upload/Uploader/Forms/EditableFields/index.js","components/Pages/Upload/Uploader/FormDisplayer.js","components/Partials/Loader/index.js","components/Pages/Upload/Uploader/socket.js","components/Pages/Upload/Uploader/index.js","components/Pages/Upload/Overlay/Canvas.js","components/Pages/Upload/Overlay/Panel/ColorPanel/swatches.js","components/Pages/Upload/Overlay/Panel/PanelSlider.js","containers/show.js","components/Pages/Upload/Overlay/Panel/ColorPanel/index.js","components/Pages/Upload/Overlay/Panel/SizesPanel/index.js","components/Pages/Upload/Overlay/Panel/DisplayPanel/Checkbox.js","components/Pages/Upload/Overlay/Panel/DisplayPanel/index.js","components/Pages/Upload/Overlay/CanvasField.js","components/Pages/Upload/Overlay/Panel/InputCreator/index.js","components/Pages/Upload/Overlay/Panel/Uploader.js","components/Partials/Dialog/DialogContentText.js","components/Partials/Dialog/DialogTitle/DialogTitleCloser.js","components/Partials/Dialog/DialogTitle/index.js","components/Partials/OverrideReactElement/index.js","components/Partials/Dialog/index.js","components/Pages/Upload/Overlay/Panel/HelperPanel/CanvasHelper.js","components/Pages/Upload/Overlay/Panel/HelperPanel/index.js","components/Pages/Upload/Overlay/Panel/DataEditionDialog/Form.js","components/Pages/Upload/Overlay/Panel/DataEditionDialog/FormDialog.js","components/Pages/Upload/Overlay/Panel/DataEditionDialog/index.js","components/Pages/Upload/Overlay/Panel/index.js","components/Pages/Upload/Overlay/index.js","components/Pages/Upload/index.js","components/Pages/Signup/socket.js","components/Pages/Signup/index.js","components/Pages/Login/socket.js","components/Pages/Login/Alert.js","components/Pages/Login/index.js","components/Partials/Pagination/index.js","components/Partials/OverlayedImage/index.js","components/Partials/ImageContainer/index.js","components/Partials/Gallery/Images/Displayer.js","components/Partials/Gallery/Images/socket.js","components/Partials/Gallery/Images/Requester.js","components/Partials/Gallery/RightPanel/DisplayRow.js","components/Partials/Field/index.js","components/Partials/Gallery/RightPanel/SearchRow.js","utils/misc.js","components/Partials/Gallery/RightPanel/SortRow.js","components/Partials/Gallery/RightPanel/HaveOverlaysRow.js","components/Partials/Gallery/RightPanel/RatingRow.js","components/Partials/Gallery/RightPanel/index.js","components/Partials/Gallery/Images/RightPanel/CloseRow.js","components/Partials/Gallery/Images/RightPanel/index.js","components/Partials/Gallery/Image/Displayer/Description/Header.js","components/Partials/Gallery/Image/Displayer/Description/Content.js","components/Partials/Gallery/Image/Displayer/Description/index.js","components/Partials/Gallery/Image/Displayer/index.js","components/Partials/Gallery/Image/Requester.js","components/Partials/Gallery/Image/RightPanel/Tags.js","components/Partials/Gallery/Image/RightPanel/AdditionalData.js","components/Partials/Gallery/Image/RightPanel/index.js","components/Partials/Gallery/index.js","components/Pages/Gallery/index.js","components/Partials/Gallery/Image/socket.js","components/Pages/Show/index.js","components/Pages/NotFound/index.js","Router.js","index.js","components/Partials/Section/index.js","components/Partials/Section/SubSection.js","components/Partials/Input/InputOverride.js","components/Partials/Input/index.js","store/states/auth.js","store/states/index.js","store/index.js","data/roles.js","../locale_modules/dynamic-redux/dist/index.js","store/states/misc.js","../locale_modules/dynamic-form/dist/index.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","isInRange","copyNestedObject","deepReplace","replace","equals","state","confirmation","options","field","string","replaces","key","hasOwnProperty","_replace","RegExp","concat","element","regex","test","Array","isArray","map","outputObject","Number","min","max","condition","console","log","message","isNaN","Profile","username","password","confirmPassword","handleChange","e","target","name","setState","process","nextTick","Auth","getUser","container","justify","variant","className","onChange","this","React","Component","AccountSettings","title","Sub","UpdatePassword","label","_slicedToArray","arr","i","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","_iterableToArrayLimit","TypeError","_nonIterableRest","module","stateList","warn","tempState","stateParts","split","str","trim","error","Error","_stateParts","reducerName","forEach","prop","_loop","_reducerName","propsTemp","_props","actionsContainer","actionList","dispatch","tempObject","actions","action","charAt","arg","_toConsumableArray","arr2","_arrayWithoutHoles","iter","toString","call","from","_iterableToArray","_nonIterableSpread","_require","createStore","applyMiddleware","compose","reducer","middlewares","middlewaresArr","enhancers","devTools","window","devToolsExtension","apply","_utils","_defineProperty","enumerable","configurable","writable","DynamicState","stateName","initialState","_this","instance","Constructor","_classCallCheck","toUpperCase","substring","toLowerCase","capitalize","join","typesAndProps","type","_ref","camelCasify","inArray","keys","multi","payload","_key","actionName","createAction","resetReducer","reducerConditions","dynamicActions","arguments","dynamicReducer","needle","haystack","len","uploaderState","formView","imageData","canvasData","color","eraseSize","fontSize","displayMainLayer","displayInputs","alpha","lineWidth","contextAction","drawing","context","hasTextCanvas","hasDrawingCanvas","draggingOut","imageBounds","canvas","img","imagesToUpload","inputs","labels","createState","setFormView","setImageData","setCanvasData","setImagesToUpload","setCanvasField","setCanvasLabel","_validator","__esModule","_defineProperties","props","descriptor","_default","FormValidator","validations","protoProps","staticProps","validation","valid","rule","isInvalid","fieldValue","args","method","validWhen","isValid","source","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","mapDynamicDispatch","authState","store","cookieName","secretKey","mapDynamicState","getState","user","getUserRoles","roles","role","isLogged","logged","isUser","includes","hasRole","encrypt","data","CryptoJS","AES","JSON","stringify","decrypt","bytes","parse","enc","Utf8","addRolesValue","signup","saveUser","login","Cookies","get","logout","remove","setCookieSession","encryptedData","set","expires","galleryState","showOverlay","images","filteredImages","currentPage","currentUser","requestReceived","searchOptions","search","haveOverlays","rating","sort","criteria","order","currentImage","searchOptionsPanel","setShowOverlay","setImages","setFilteredImages","setFilter","setCurrentPage","setCurrentUser","setCurrentImage","setRequestReceived","setSearchOptions","setSearchOptionsPanel","default","_react","_interopRequireDefault","_TextField","_Select","_Range","_extends","assign","elementType","createElement","placeholder","htmlAttributes","rangeField","selectField","id","textField","Fragment","displayMessage","content","Field","inputProps","_FormControl","_InputLabel","_MenuItem","Select2","htmlFor","option","text","_Slider","_Typography","_onChange","Range","style","padding","fields","email","required","passwordMatch","range","guest","to","slug","onClick","MenuItem","getProps","getComponent","Link","onClose","children","classNames","Menu","menu","getMenu","dataLinks","getDataLinks","parseDataToMenu","links","link","handleClose","handleClick","currentTarget","aria-label","aria-controls","aria-haspopup","keepMounted","anchorEl","open","Boolean","MenuListProps","mapStateToProps","Navbar","AppBar","position","Toolbar","Grid","alignItems","item","Typography","connect","mapDispatchToProps","ProtectedRoute","redirect","setDeniedPageIfAccessDenied","setDeniedPage","path","location","href","require","prevProps","_","isEqual","rest","withRouter","Home","Multiple","propsValue","getCheckboxValue","newValue","v","checkbox","checked","YesNo","checkboxData","Checkbox","FormControlLabel","control","url","port","NonEditableFields","handleFiles","files","changeFormData","handleCheckboxChange","formData","FormGroup","row","withOverlay","accept","Button","component","FormWrapper","submit","onSubmit","validate","preventDefault","isError","Form","NonEditableForm","image","multiline","rows","EditableFields","Input","fullWidth","Select","rate","input","MenuProps","EditableForm","FormDisplayer","artistName","artistLink","tags","step","getForm","_setState","Loader","canRedirect","prevState","redirection","success","timeout","setTimeout","size","thickness","successMessage","loading","errorMessage","empty","emptyMessage","CircularProgress","socket","openSocket","secure","On","imageUploaded","callback","on","imageUploadFailed","Emit","uploadImage","emit","Remove","removeListener","misc","auth","Uploader","loader","transformFormData","then","catch","Promise","resolve","newFormData","isString","artist","reader","FileReader","readAsDataURL","addEventListener","imageBase64","result","xs","md","sm","Section","Canvas","inputId","calculateRelativePosition","x","y","top","left","pageXOffset","pageYOffset","canvasAction","x0","y0","x1","y1","pos","drawLine","eraseArea","beginPath","moveTo","lineTo","strokeStyle","lineCap","stroke","closePath","clearRect","mouseDownHandler","clientX","clientY","mouseUpHandler","mouseMoveHandler","persister","persist","pixelToNumber","dragOverHandler","preventUpdate","dragLeaveHandler","dropHandler","dataTransfer","getData","inputsUpdate","labelsUpdate","prevY","prevX","document","body","throttle","_inputs","width","height","onDragLeave","onDragOver","onMouseDown","onMouseMove","swatches","PanelSlider","Slider","show","FaEraser","_FaEraser","ColorPanel","updateCanvasData","newData","onColorUpdate","newColor","onAlphaChange","getUnifiedColor","indexOf","lastIndexOf","swatch","SizesPanel","onSlideChange","slider","DisplayPanel","overlayContainer","getElementById","classList","add","clearCanvas","CanvasField","shouldComponentUpdate","nextProps","getHeight","onInputClick","getAttribute","childNodes","borderColor","inputChangeHandler","labelContent","textContent","dragStartHandler","setData","updatedLabels","updatedFields","client","currentCanvasData","draggable","data-id","onDragStart","InputCreator","createInput","slice","createRef","lastInput","_Button","uploader","uploading","uploadHanler","upload","textCanvas","createTextCanvas","drawingCanvas","getDrawingCanvas","draw","toDataURL","Uint32Array","getImageData","buffer","some","getContext","getElementsByClassName","fillStyle","font","fillText","upload1Image","upload2Images","upload3Images","DialogContentText","contentProps","textProps","DialogContent","DialogTitleCloser","Tooltip","DialogTitle","childrenWrapper","closer","ChildrenWrapper","OverrideReactElement","getChildrenElement","isFunction","isObject","getUniqueKey","singleChildren","overrideChildren","index","childrens","isSafeInteger","c","Dialog","getChildren","Content","Text","MuiDialogContentText","ContentText","Title","withMobileDialog","aria-labelledby","PaperProps","HelperPanel","handleOpen","updateState","newState","classes","paper","DataEditionDialog","Overlay","setImageSize","getBoundingClientRect","setCanvasPosition","handleModalClose","src","ref","alt","modalOpen","Upload","components","signupSuccess","signupFailed","Signup","changeLoader","userData","Override","submitText","loginSuccess","loginFailed","Alert","deniedPage","supplementText","aria-describedby","IconButton","Login","deniedAlert","direction","Pagination","forcePage","defaultProps","previousLabel","nextLabel","breakLabel","breakClassName","marginPagesDisplayed","pageRangeDisplayed","containerClassName","subContainerClassName","activeClassName","OverlayedImage","renderOverlays","overlays","imageElement","loadHandler","onLoad","ImageContainer","self","offsetParent","naturalHeight","naturalWidth","getSubContainer","subContainer","SubContainer","Displayer","pageCount","handlePageChange","history","selected","openPanel","Hidden","mdUp","wrap","_id","thumb","onPageChange","sendImage","getImageFailed","sendImagesCount","getImagesCountFailed","getImagesPage","getImagesCount","gallery","Requester","request","emitData","page","match","canRequest","DisplayRow","TextField","SearchRow","functionUpdate","object","update","SortRow","$merge","NativeSelect","HaveOverlaysRow","newSearchOptions","RatingRow","RightPanel","inputTags","CloseRow","description","Description","getImgSize","useOffsetSize","offsetWidth","offsetHeight","resizeContainer","imgContainer","Tags","t","tag","getValidElement","validator","isURL","rel","AdditionalData","Gallery","topSize","setTopSize","navbarHeight","removeEventListener","kind","GalleryKind","Images","isMultiple","multiple","isSingle","single","Image","scrollable","smDown","initGallery","params","user_slug","PGallery","getImageById","Show","NotFound","Router","exact","miscState","Root","setTags","ReactDOM","render","InputOverride","elevation","helperText","helperName","FormControl","InputLabel","FormHelperText","reducers","combineReducers","miscReducer","uploaderReducer","galleryReducer","authReducer","_formValidator","_Field","_reactRouter","_fields","_validations2","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","_setPrototypeOf","p","_React$Component","_validations","currentField","submitted","fieldOnChange","getFields","fieldsName","subClass","superClass","create","_inherits","_this2","_this$props","_field","onFocus","onBlur","handleSubmit","minlength","maxlength","Redirect","validationsArr","validationsObj","validationAndArg","_validationAndArg$spl2","not","validationRange"],"mappings":"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","file":"static/js/main.0a243f2b.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isInRange = exports.copyNestedObject = exports.deepReplace = exports.replace = exports.equals = void 0;\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar equals = function equals(state) {\n  return function (confirmation, options) {\n    return state[options.field] === confirmation;\n  };\n};\n\nexports.equals = equals;\n\nvar replace = function replace(string, replaces) {\n  for (var key in replaces) {\n    if (replaces.hasOwnProperty(key)) {\n      var _replace = replaces[key];\n      if (_replace) string = string.replace(new RegExp(\"<\".concat(key, \">\"), 'g'), _replace);\n    }\n  }\n\n  return string;\n};\n\nexports.replace = replace;\n\nvar deepReplace = function deepReplace(element, regex, replaces) {\n  if (typeof element === 'string' && regex.test(element)) element = replace(element, replaces);else if (Array.isArray(element)) element = element.map(function (element) {\n    return deepReplace(element, regex, replaces);\n  });else if (_typeof(element) === 'object') {\n    for (var key in element) {\n      if (element.hasOwnProperty(key)) element[key] = deepReplace(element[key], regex, replaces);\n    }\n  }\n  return element;\n}; // copy nested objects and arrays if we don't want their reference\n\n\nexports.deepReplace = deepReplace;\n\nvar copyNestedObject = function copyNestedObject(element) {\n  var outputObject = {};\n  if (Array.isArray(element)) outputObject = element.map(function (element) {\n    return copyNestedObject(element);\n  });else if (_typeof(element) === 'object') {\n    for (var key in element) {\n      if (element.hasOwnProperty(key)) outputObject[key] = copyNestedObject(element[key]);\n    }\n  } else outputObject = element;\n  return outputObject;\n};\n\nexports.copyNestedObject = copyNestedObject;\n\nvar isInRange = function isInRange() {\n  return function (value, options) {\n    value = Number(value);\n    var min = options.min,\n        max = options.max;\n    min = Number(options.min);\n    max = Number(options.max);\n    var condition = true;\n    console.log(options.message());\n    if (options.min === '_') condition = condition && true;else if (isNaN(min)) condition = condition && false;else if (value < min) condition = condition && false;else condition = condition && true;\n    if (options.max === '_') condition = condition && true;else if (isNaN(max)) condition = condition && false;else if (value > max) condition = condition && false;else condition = condition && true;\n    if (isNaN(value)) condition = false;\n    return condition;\n  };\n};\n\nexports.isInRange = isInRange;","import React from 'react';\r\nimport { Grid, Typography } from '@material-ui/core';\r\n\r\nimport AccountSettings from './AccountSettings';\r\nimport UpdatePassword from './UpdatePassword';\r\nimport Auth from '../../../services/Auth';\r\n\r\nclass Profile extends React.Component {\r\n\r\n  state = {\r\n    username: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    process.nextTick(() => this.setState({ username: Auth.getUser().name }));\r\n  }\r\n\r\n  handleChange = e => {\r\n    const { name, value } = e.target;\r\n\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Grid container justify=\"center\">\r\n        <Typography variant=\"h2\" className=\"mt-3 mb-5 pb-5\">Work In Progress</Typography>\r\n        <AccountSettings onChange={this.handleChange} state={this.state} />\r\n        <UpdatePassword onChange={this.handleChange} state={this.state} />\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport { Grid, Typography } from '@material-ui/core';\r\n\r\nimport Input from '../../Partials/Input';\r\nimport Section from '../../Partials/Section';\r\n\r\nconst AccountSettings = ({ state, onChange }) => (\r\n  <Section title=\"Account settings\">\r\n    <Section.Sub>\r\n      <span>Username:</span>\r\n      <Input\r\n        name=\"username\"\r\n        value={state.username}\r\n        onChange={onChange}\r\n      />\r\n    </Section.Sub>\r\n  </Section>\r\n);\r\n\r\nexport default AccountSettings;\r\n\r\n/*\r\n\r\n  <Grid md={11} container item className=\"bg-color-grey-darken-4 color-grey-lighten-2 p-4\">\r\n    <Grid container item direction=\"column\">\r\n      <Typography variant=\"h6\">Update your password</Typography>\r\n\r\n      <Grid container item alignItems=\"center\">\r\n        <Grid md={4} item>\r\n          <span>Password:</span>\r\n        </Grid>\r\n        <Grid item>\r\n          <Input\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            value={state.password}\r\n            onChange={onChange}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container item alignItems=\"center\">\r\n        <Grid md={4} item>\r\n          <span>Password confirmation:</span>\r\n        </Grid>\r\n        <Grid item>\r\n          <Input\r\n            name=\"confirmPassword\"\r\n            label=\"Password confirmation\"\r\n            value={state.confirmPassword}\r\n            onChange={onChange}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  </Grid>\r\n  */\r\n","import React from 'react';\r\nimport { Grid, Typography } from '@material-ui/core';\r\n\r\nimport Input from '../../Partials/Input';\r\nimport Section from '../../Partials/Section';\r\n\r\nconst UpdatePassword = ({ state, onChange }) => (\r\n  <Section title=\"Update password\">\r\n    <Section.Sub>\r\n      <span>Password:</span>\r\n      <Input\r\n        name=\"password\"\r\n        label=\"Password\"\r\n        value={state.password}\r\n        onChange={onChange}\r\n      />\r\n    </Section.Sub>\r\n\r\n    <Section.Sub>\r\n      <span>Password confirmation:</span>\r\n      <Input\r\n        name=\"confirmPassword\"\r\n        label=\"Password confirmation\"\r\n        value={state.confirmPassword}\r\n        onChange={onChange}\r\n      />\r\n    </Section.Sub>\r\n  </Section>\r\n);\r\n\r\nexport default UpdatePassword;\r\n","\"use strict\";\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar mapDynamicState = function mapDynamicState(stateList) {\n  return function (state) {\n    if (!state) return false;\n\n    if (!stateList) {\n      console.warn('mapDynamicState: didn\\'t received the wanted props from the state');\n      return {};\n    }\n\n    var tempState = {};\n\n    if (typeof stateList === 'string') {\n      var stateParts = stateList.split(':').map(function (str) {\n        return str.trim();\n      });\n\n      if (stateParts.length < 2) {\n        console.error(new Error(\"mapDynamicState: should be used with \\\"reducerName: propName\\\", instead received:\\n\\\"\".concat(stateList, \"\\\"\")));\n        return false;\n      }\n\n      var _stateParts = _slicedToArray(stateParts, 2),\n          reducerName = _stateParts[0],\n          propsStr = _stateParts[1];\n\n      var props = propsStr.split(/\\s/);\n      props.forEach(function (prop) {\n        if (state[\"\".concat(reducerName, \"Reducer\")]) tempState[prop] = state[\"\".concat(reducerName, \"Reducer\")][prop];else console.warn(\"mapDynamicState: There is no props called \\\"\".concat(reducerName, \"Reducer\\\" in the state\"));\n      });\n    } else if (stateList.constructor.name === 'Object') {\n      var _loop = function _loop(_reducerName) {\n        if (stateList.hasOwnProperty(_reducerName)) {\n          var propsTemp = stateList[_reducerName];\n          var _props = [];\n\n          if (Array.isArray(propsTemp)) {\n            propsTemp = propsTemp.map(function (str) {\n              return str.trim();\n            });\n            var dirtyArr = propsTemp.map(function (str) {\n              return str.split(/\\s/);\n            });\n            dirtyArr.forEach(function (str) {\n              if (typeof str === 'string') _props.push(str);else if (Array.isArray(str)) str.forEach(function (str) {\n                return _props.push(str);\n              });\n            });\n          } else if (typeof propsTemp === 'string') {\n            propsTemp = propsTemp.trim();\n            _props = propsTemp.split(/\\s/);\n          } else {\n            console.error(new Error(\"mapDynamicState: The element in an object in mapDynamicState must be of type Array or String, instead received the type \\\"\".concat(propsTemp.constructor.name, \"\\\"\")));\n          }\n\n          _props.forEach(function (prop) {\n            if (state[\"\".concat(_reducerName, \"Reducer\")]) tempState[prop] = state[\"\".concat(_reducerName, \"Reducer\")][prop];else console.warn(\"mapDynamicState: There is no props called \\\"\".concat(_reducerName, \"Reducer\\\" in the state\"));\n          });\n        }\n      };\n\n      for (var _reducerName in stateList) {\n        _loop(_reducerName);\n      }\n    } else {\n      console.error(new Error(\"mapDynamicState: The element in mapDynamicState must be of type Object or String, instead received the type \\\"\".concat(stateList.constructor.name, \"\\\"\")));\n    }\n\n    return tempState;\n  };\n};\n\nmodule.exports = mapDynamicState;","\"use strict\";\n\nvar mapDynamicDispatch = function mapDynamicDispatch(actionsContainer, actionList) {\n  return function (dispatch) {\n    var tempObject = {};\n    var actions = [];\n\n    if (typeof actionList === 'string') {\n      actions = actionList.split(/\\s/g);\n    } else if (!Array.isArray(actionList)) console.warn(new Error(\"the second parameter of \\\"mapDynamicDispatch\\\" must be of type array or string, instead received \\\"\".concat(actionList.constructor.name, \"\\\"\")));\n\n    actions.forEach(function (action) {\n      if (action.charAt(0) !== '') {\n        if (actionsContainer[action]) tempObject[action] = function (arg) {\n          return dispatch(actionsContainer[action](arg));\n        };else console.warn(new Error(\"mapDynamicDispatch: the action \\\"\".concat(action, \"\\\" doesn't exists\")));\n      }\n    });\n    return tempObject;\n  };\n};\n\nmodule.exports = mapDynamicDispatch;","\"use strict\";\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar _require = require('redux'),\n    createStore = _require.createStore,\n    applyMiddleware = _require.applyMiddleware,\n    compose = _require.compose;\n\nvar _createStore = function _createStore(reducer, middlewares) {\n  if (_typeof(middlewares) === 'object' && !Array.isArray(middlewares)) {\n    var middlewaresArr = [];\n    var i = 0;\n\n    for (var key in middlewares) {\n      middlewaresArr[i++] = middlewares[key];\n    }\n\n    middlewares = middlewaresArr;\n  }\n\n  var enhancers;\n  var devTools = [];\n\n  if (window.devToolsExtension && process.env.NODE_ENV !== 'production') {\n    devTools.push(window.__REDUX_DEVTOOLS_EXTENSION__({\n      trace: true\n    }));\n  }\n\n  if (middlewares) enhancers = compose.apply(void 0, [applyMiddleware.apply(void 0, _toConsumableArray(middlewares))].concat(devTools));else enhancers = devTools[0];\n  return createStore(reducer, enhancers);\n};\n\nmodule.exports = _createStore;","\"use strict\";\n\nvar _utils = require(\"./utils\");\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DynamicState = function DynamicState(stateName, initialState) {\n  var _this = this;\n\n  _classCallCheck(this, DynamicState);\n\n  _defineProperty(this, \"actions\", {});\n\n  _defineProperty(this, \"reducerConditions\", []);\n\n  _defineProperty(this, \"stateName\", '');\n\n  _defineProperty(this, \"capitalize\", function (str) {\n    return str.charAt(0).toUpperCase() + str.substring(1);\n  });\n\n  _defineProperty(this, \"camelCasify\", function (str) {\n    str = str.toLowerCase().split('set_');\n    str = str[1] || str[0];\n    return str.split(/[_-]/g).map(function (str, i) {\n      return i > 0 ? _this.capitalize(str) : str;\n    }).join('');\n  });\n\n  _defineProperty(this, \"dynamicReducer\", function (state, action, typesAndProps) {\n    if (action.type === 'RESET_' + _this.stateName.toUpperCase() + '_REDUCER') return _this.initialState;\n    var tempState = {};\n\n    for (var key in state) {\n      if (state.hasOwnProperty(key)) tempState[key] = state[key];\n    }\n\n    typesAndProps.forEach(function (_ref) {\n      var type = _ref.type,\n          prop = _ref.prop;\n\n      if (type === action.type) {\n        prop = prop || _this.camelCasify(type);\n        if (!(0, _utils.inArray)(prop, Object.keys(state)) && !action.multi) console.error(new Error(\"Received \\\"\".concat(prop, \"\\\" as prop but it doesn't exists in the state\")));\n        if (!action.multi) tempState[prop] = action.payload;else if (action.multi && _typeof(action.payload) === 'object') {\n          for (var _key in action.payload) {\n            if (action.payload.hasOwnProperty(_key)) {\n              var value = action.payload[_key];\n              tempState[_key] = value;\n            }\n          }\n        }\n      }\n    });\n    return tempState;\n  });\n\n  _defineProperty(this, \"createAction\", function (action) {\n    return function (value) {\n      var type, multi;\n      if (typeof action === 'string') type = action;else {\n        type = action.type;\n        multi = action.multi;\n      }\n      return {\n        type: type,\n        payload: value,\n        multi: multi\n      };\n    };\n  });\n\n  _defineProperty(this, \"dynamicActions\", function (actions) {\n    for (var actionName in actions) {\n      if (actions.hasOwnProperty(actionName)) {\n        var action = actions[actionName];\n        _this.actions[actionName] = _this.createAction(action);\n      }\n    }\n  });\n\n  _defineProperty(this, \"createState\", function (options) {\n    options.resetReducer = 'RESET_' + _this.stateName.toUpperCase() + '_REDUCER';\n    var actions = {};\n    var reducerConditions = [];\n\n    for (var actionName in options) {\n      if (options.hasOwnProperty(actionName)) {\n        var type = void 0,\n            prop = void 0,\n            multi = void 0;\n        var action = options[actionName];\n        if (typeof options[actionName] === 'string') type = action;else {\n          type = action.type;\n          prop = action.prop;\n          multi = action.multi;\n        }\n        actions[actionName] = {\n          type: type,\n          multi: multi\n        };\n        reducerConditions.push({\n          type: type,\n          prop: prop\n        });\n      }\n    }\n\n    _this.reducerConditions = reducerConditions;\n\n    _this.dynamicActions(actions);\n  });\n\n  if (typeof stateName === 'string') {\n    this.stateName = stateName;\n  } else {\n    initialState = stateName;\n  }\n\n  this.initialState = initialState;\n\n  this.reducer = function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    return _this.dynamicReducer(state, action, _this.reducerConditions);\n  };\n};\n\nmodule.exports = DynamicState; // the props are the actions's name, their values are either a string that is the action's type\n// either an object that can have 3 values\n\n/*\r\n * type {string} = action's type\r\n * prop {string} = the prop that will be repleiced in the state; default = camelcasified type without 'set'\r\n * multi {boolean} = set if there's several props that should be modified; default = false\r\n*/\n\n/* example:\r\n * (init)\r\n * setImages: {\r\n *  type: 'SET_IMAGES',\r\n *  prop: 'images'\r\n * }\r\n * will results by:\r\n * (in reducer)\r\n * case 'SET_IMAGES':\r\n *  return {\r\n *    ...state,\r\n *    images: action.payload, // payload is the prob that contains the value\r\n *  }\r\n * (action's usage)\r\n * setImage('value');\r\n *\r\n * (init)\r\n * setImages: {\r\n *   type: 'SET_IMAGES',\r\n *   multi: true\r\n * }\r\n * will results by:\r\n * (in reducer)\r\n * case 'SET_IMAGES':\r\n *  return {\r\n *    ...state,\r\n *    something: action.payload.something,\r\n *    somethingElse: action.payload.somethingElse,\r\n *    anotherProp: action.payload.anotherProp,\r\n *  }\r\n * (action's usage)\r\n * setImages({ something: 'val', somethingElse: 'val', anotherProp: 'val' });\r\n*/","\"use strict\";\n\nvar inArray = function inArray(needle, haystack) {\n  for (var i = 0, len = haystack.length; i < len; i++) {\n    if (haystack[i].toLowerCase() === needle.toLowerCase()) return true;\n  }\n\n  return false;\n};\n\nexports.inArray = inArray;","import { DynamicState } from 'dynamic-redux';\r\n\r\nconst uploaderState = new DynamicState('uploader', {\r\n  formView: 'Uploader',\r\n  imageData: {},\r\n  canvasData: {\r\n    color: 'rgba(0,0,0,0.5)',\r\n    eraseSize: 10,\r\n    fontSize: 16,\r\n    displayMainLayer: true,\r\n    displayInputs: true,\r\n    alpha: 0.5,\r\n    lineWidth: 3,\r\n    contextAction: 'draw',\r\n    drawing: false,\r\n    context: null,\r\n    hasTextCanvas: true,\r\n    hasDrawingCanvas: true,\r\n    draggingOut: false,\r\n    imageBounds: {},\r\n    canvas: null,\r\n    img: null,\r\n  },\r\n  imagesToUpload: {},\r\n  inputs: [],\r\n  labels: [],\r\n});\r\n\r\nuploaderState.createState({\r\n  setFormView: 'SET_FORM_VIEW',\r\n  setImageData: 'SET_IMAGE_DATA',\r\n  setCanvasData: 'SET_CANVAS_DATA',\r\n  setImagesToUpload: 'SET_IMAGES_TO_UPLOAD',\r\n  setCanvasField: { type: 'SET_CANVAS_FIELD', prop: 'inputs' },\r\n  setCanvasLabel: { type: 'SET_CANVAS_LABEL', prop: 'labels' },\r\n  resetReducer: 'RESET_REDUCER'\r\n});\r\n\r\nexport default uploaderState;\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _validator = _interopRequireDefault(require(\"validator\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar FormValidator =\n/*#__PURE__*/\nfunction () {\n  function FormValidator(validations) {\n    _classCallCheck(this, FormValidator);\n\n    this.validations = validations;\n  }\n\n  _createClass(FormValidator, [{\n    key: \"validate\",\n    value: function validate(state) {\n      var validation = this.valid();\n      this.validations.forEach(function (rule) {\n        if (!validation[rule.field].isInvalid) {\n          var fieldValue = state[rule.field];\n          var args = rule.args || [];\n          var validationMethod;\n          if (typeof rule.method === 'string') validationMethod = _validator[\"default\"][rule.method];else {\n            validationMethod = rule.method(state);\n          }\n\n          if (validationMethod.apply(void 0, [fieldValue].concat(_toConsumableArray(args))) !== rule.validWhen) {\n            validation[rule.field] = {\n              isInvalid: true,\n              message: rule.message\n            };\n            validation.isValid = false;\n          }\n        }\n      });\n      return validation;\n    }\n  }, {\n    key: \"valid\",\n    value: function valid() {\n      var validation = {};\n      this.validations.map(function (rule) {\n        return validation[rule.field] = {\n          isInvalid: false,\n          message: ''\n        };\n      });\n      return _objectSpread({\n        isValid: true\n      }, validation);\n    }\n  }]);\n\n  return FormValidator;\n}();\n\nvar _default = FormValidator;\nexports[\"default\"] = _default;","import CryptoJS from 'crypto-js';\r\nimport Cookies from 'js-cookie';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport store from '../store';\r\nimport authState from '../store/states/auth';\r\nimport roles from '../data/roles';\r\n\r\nconst actions = mapDynamicDispatch(authState.actions, 'login')(store.dispatch);\r\n\r\nclass Auth {\r\n\r\n  // the name of the cookieSession to save\r\n  static cookieName = 'cookieSession-Dorg-Gallery';\r\n  // the secret key to encrypt/decrypt data\r\n  static secretKey = 'draconity.org gallery; secret key';\r\n\r\n  /**\r\n   * get the user data from the state\r\n   */\r\n  static getUser = () => {\r\n    return mapDynamicState('auth: user')(store.getState()).user;\r\n  }\r\n\r\n  /**\r\n   * get the roles of the client\r\n   *\r\n   * @param {Object} user\r\n   * @param {Object[]} user.roles\r\n   * @param {String} user.roles[].value\r\n   * @returns {String[]}\r\n   */\r\n  static getUserRoles = user => {\r\n    if (Array.isArray(user.roles)) {\r\n      return user.roles.map(role => role.value);\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * get if the client is logged\r\n   * @returns {Boolean}\r\n   */\r\n  static isLogged = () => {\r\n    const user = Auth.getUser();\r\n    return user.logged;\r\n  }\r\n\r\n  /**\r\n   * get if the client is a user\r\n   * @returns {Boolean}\r\n   */\r\n  static isUser = () => {\r\n    const user = Auth.getUser();\r\n    return Auth.getUserRoles(user).includes(roles.user);\r\n  }\r\n\r\n  /**\r\n   * get if the client has given role\r\n   * @returns {Boolean}\r\n   */\r\n  static hasRole = role => {\r\n    const user = Auth.getUser();\r\n    return Auth.getUserRoles(user).includes(role);\r\n  }\r\n\r\n  /**\r\n   * encrypt data\r\n   * @param {any} data\r\n   * @returns {String}\r\n   */\r\n  static encrypt = data => {\r\n    return CryptoJS.AES.encrypt(JSON.stringify(data), Auth.secretKey);\r\n  }\r\n\r\n  /**\r\n   * decrypt data\r\n   * @param {String} data\r\n   * @returns {any}\r\n   */\r\n  static decrypt = data => {\r\n    if (!data) {\r\n      return;\r\n    }\r\n\r\n    const bytes = CryptoJS.AES.decrypt(data.toString(), Auth.secretKey);\r\n    return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n  }\r\n\r\n  /**\r\n   * add the 'role value' to each role the user have\r\n   * @param {Object} user\r\n   * @param {Object[]} user.roles\r\n   * @param {String} user.roles[].name\r\n   * @returns {Object} user\r\n   */\r\n  static addRolesValue = user => {\r\n    user.roles.forEach(role => {\r\n      role.value = roles[role.name];\r\n    });\r\n  }\r\n\r\n  /** used to signup the client\r\n   * save the user data into the store and encrypt it into a cookie for 1 day\r\n   * @param {Object} user\r\n   */\r\n  static signup = user => {\r\n    if (typeof user === 'object') {\r\n      Auth.saveUser(user);\r\n    }\r\n  }\r\n\r\n  /** used to login the client\r\n   * save the user data into the store and encrypt it into a cookie for 1 day\r\n   * @param {Object} user\r\n   */\r\n  static login = user => {\r\n    if (!user) {\r\n      user = Auth.decrypt(Cookies.get(Auth.cookieName));\r\n    }\r\n\r\n    if (!user) {\r\n      return;\r\n    }\r\n\r\n    Auth.saveUser(user);\r\n  }\r\n\r\n  /** used to logout the client\r\n   * remove the cookie and the user data from the store\r\n   */\r\n  static logout = () => {\r\n    Cookies.remove(Auth.cookieName);\r\n    actions.login({});\r\n    //Auth.forceAppUpdate();\r\n  }\r\n\r\n  /** used the save the client\r\n   * save the user data into the store and encrypt it into a cookie\r\n   * @param {Object} user\r\n   */\r\n  static saveUser = user => {\r\n    user.logged = true;\r\n\r\n    Auth.addRolesValue(user);\r\n\r\n    actions.login(user);\r\n    Auth.setCookieSession(user);\r\n  }\r\n\r\n  /** set a cookie to save the client\r\n   * encrypt the user data and save it into a cookie\r\n   * @param {Object} user\r\n   */\r\n  static setCookieSession = user => {\r\n    const encryptedData = Auth.encrypt(user);\r\n    Cookies.set(Auth.cookieName, encryptedData, { expires: 1 });\r\n  }\r\n\r\n}\r\n\r\nexport default Auth;\r\n","import { DynamicState } from 'dynamic-redux';\r\n\r\nconst galleryState = new DynamicState('gallery', {\r\n  showOverlay: ['text', 'draw'],\r\n  images: [],\r\n  filteredImages: [],\r\n  filter: ['*'],\r\n  currentPage: 1,\r\n  currentUser: '',\r\n  requestReceived: false,\r\n  searchOptions: {\r\n    search: '',\r\n    haveOverlays: ['*'],\r\n    rating: ['general', 'suggestive', 'nsfw'],\r\n    sort: {\r\n      criteria: 'date',\r\n      order: 'ASC'\r\n    }\r\n  },\r\n  currentImage: null,\r\n  searchOptionsPanel: false,\r\n});\r\n\r\ngalleryState.createState({\r\n  setShowOverlay: {\r\n    type: 'SET_SHOW_OVERLAY_ON_IMAGES',\r\n    prop: 'showOverlay'\r\n  },\r\n  setImages: 'SET_IMAGES',\r\n  setFilteredImages: 'SET_FILTERED_IMAGES',\r\n  setFilter: 'SET_FILTER',\r\n  setCurrentPage: 'SET_CURRENT_PAGE',\r\n  setCurrentUser: 'SET_CURRENT_USER',\r\n  setCurrentImage: 'SET_CURRENT_IMAGE',\r\n  setRequestReceived: 'SET_REQUEST_RECEIVED',\r\n  setSearchOptions: 'SET_SEARCH_OPTIONS',\r\n  setSearchOptionsPanel: 'SET_SEARCH_OPTIONS_PANEL',\r\n});\r\n\r\nexport default galleryState;\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _TextField = _interopRequireDefault(require(\"./TextField\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nvar _Range = _interopRequireDefault(require(\"./Range\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Field = function Field(props) {\n  var elementType = props.elementType,\n      name = props.name;\n  elementType = elementType || 'text';\n\n  var textField = function textField() {\n    var name = props.name,\n        label = props.label,\n        field = props.field,\n        placeholder = props.placeholder;\n    placeholder = placeholder || label;\n\n    var htmlAttributes = _objectSpread({}, props);\n\n    delete htmlAttributes.elementType;\n    delete htmlAttributes.rangeField;\n    delete htmlAttributes.selectField;\n    return _react.default.createElement(_TextField.default, _extends({}, htmlAttributes, {\n      placeholder: field ? placeholder : '',\n      id: name,\n      className: name\n    }));\n  };\n\n  var displayMessage = function displayMessage() {\n    var validation = props.validation,\n        name = props.name;\n    return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"br\", null), validation && validation[name] && _react.default.createElement(\"span\", {\n      className: \"help-block\"\n    }, validation[name].message), _react.default.createElement(\"br\", null));\n  };\n\n  return _react.default.createElement(\"span\", null, elementType === 'text' && textField(), elementType === 'select' && _react.default.createElement(_Select.default, _extends({}, props, {\n    id: name,\n    className: name\n  })), elementType === 'range' && _react.default.createElement(_Range.default, props), displayMessage());\n};\n\nvar _default = Field;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _TextField = _interopRequireDefault(require(\"@material-ui/core/TextField\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Field = function Field(props) {\n  var content = props.content,\n      field = props.field,\n      placeholder = props.placeholder;\n  var Field = field || _TextField.default;\n  placeholder = placeholder || content;\n  return _react.default.createElement(Field, _extends({}, props, {\n    inputProps: _objectSpread({}, props),\n    placeholder: placeholder\n  }));\n};\n\nvar _default = Field;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Select = _interopRequireDefault(require(\"@material-ui/core/Select\"));\n\nvar _FormControl = _interopRequireDefault(require(\"@material-ui/core/FormControl\"));\n\nvar _InputLabel = _interopRequireDefault(require(\"@material-ui/core/InputLabel\"));\n\nvar _MenuItem = _interopRequireDefault(require(\"@material-ui/core/MenuItem\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Select = function Select(props) {\n  var selectField = props.selectField,\n      options = props.options,\n      name = props.name,\n      label = props.label;\n  var Select2 = selectField || _Select.default;\n\n  var htmlAttributes = _objectSpread({}, props);\n\n  delete htmlAttributes.selectField;\n  delete htmlAttributes.elementType;\n  delete htmlAttributes.rangeField;\n  return _react.default.createElement(_FormControl.default, null, _react.default.createElement(_InputLabel.default, {\n    htmlFor: name\n  }, label), _react.default.createElement(Select2, _extends({}, htmlAttributes, {\n    inputProps: {\n      name: name,\n      id: name\n    }\n  }), options.map(function (option) {\n    return _react.default.createElement(_MenuItem.default, {\n      key: option.value,\n      value: option.value\n    }, option.text);\n  })));\n};\n\nvar _default = Select;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Slider = _interopRequireDefault(require(\"@material-ui/core/Slider\"));\n\nvar _Typography = _interopRequireDefault(require(\"@material-ui/core/Typography\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Range = function Range(props) {\n  var rangeField = props.rangeField,\n      label = props.label,\n      name = props.name,\n      _onChange = props.onChange,\n      min = props.min,\n      max = props.max,\n      value = props.value;\n  var Range = rangeField || _Slider.default;\n\n  var htmlAttributes = _objectSpread({}, props);\n\n  delete htmlAttributes.rangeField;\n  delete htmlAttributes.elementType;\n  delete htmlAttributes.selectField;\n  return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_Typography.default, {\n    id: \"label-\".concat(name)\n  }, label), _react.default.createElement(Range, _extends({}, htmlAttributes, {\n    min: min || 0,\n    max: max || 100,\n    value: value || 0,\n    onChange: function onChange(e, value) {\n      return _onChange(e, value, name);\n    },\n    style: !rangeField ? {\n      padding: '10px 0'\n    } : {},\n    \"aria-labelledby\": \"label-\".concat(name)\n  })));\n};\n\nvar _default = Range;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fields = void 0;\nvar fields = {\n  username: {\n    name: 'username',\n    label: 'Username',\n    validations: ['required', 'length:3-40']\n  },\n  password: {\n    name: 'password',\n    label: 'Password',\n    type: 'password',\n    validations: ['required', 'length:8-100']\n  },\n  confirmPassword: {\n    name: 'confirmPassword',\n    label: 'Password confirmation',\n    type: 'password',\n    validations: ['required', 'passwordMatch']\n  },\n  email: {\n    name: 'email',\n    label: 'Email',\n    validations: ['email']\n  }\n};\nexports.fields = fields;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validations = void 0;\n\nvar _utils = require(\"./utils\");\n\nvar validations = {\n  required: {\n    method: 'isEmpty',\n    validWhen: false,\n    message: '<label> is required.'\n  },\n  length: {\n    method: 'isLength',\n    args: [{\n      min: '<min>',\n      max: '<max>'\n    }],\n    validWhen: true,\n    message: '<label> must have between <min> and <max> characters.'\n  },\n  passwordMatch: {\n    method: _utils.equals,\n    args: [{\n      field: 'password'\n    }],\n    validWhen: true,\n    message: 'Both passwords doesn\\'t match.'\n  },\n  equals: {\n    method: _utils.equals,\n    validWhen: true,\n    args: [{\n      field: '<match>'\n    }],\n    message: '<label> and <match> <not> match.'\n  },\n  email: {\n    method: 'isEmail',\n    validWhen: true,\n    message: 'You must provide a valid email address.'\n  },\n  range: {\n    method: _utils.isInRange,\n    validWhen: true,\n    args: [{\n      min: '<min>',\n      max: '<max>'\n    }],\n    message: '<label> must be between <min> and <max>'\n  }\n};\nexports.validations = validations;","import Auth from '../../../../services/Auth';\r\n\r\n/**\r\n * lists of links to display in the menu\r\n */\r\n\r\n// menu for guests\r\nexport const guest = [\r\n  {\r\n    to: '/',\r\n    label: 'home'\r\n  },\r\n  {\r\n    to: '/signup',\r\n    label: 'signup'\r\n  },\r\n  {\r\n    to: '/login',\r\n    label: 'login'\r\n  }\r\n];\r\n\r\n// menu for logged users\r\nexport const user = [\r\n  {\r\n    to: '/',\r\n    label: 'home'\r\n  },\r\n  {\r\n    to: '/upload',\r\n    label: 'upload'\r\n  },\r\n  {\r\n    to: () => '/gallery/' + Auth.getUser().slug,\r\n    label: 'my gallery'\r\n  },\r\n  {\r\n    to: '/profile',\r\n    label: 'profile'\r\n  },\r\n  {\r\n    label: 'logout',\r\n    onClick: Auth.logout,\r\n    className: 'color-red-darken-2'\r\n  }\r\n];\r\n","import React from 'react';\r\nimport MuiMenuItem from '@material-ui/core/MenuItem';\r\nimport { Link } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\n\r\nclass MenuItem extends React.Component {\r\n\r\n  /**\r\n   * @returns {Object}\r\n   */\r\n  getProps = () => {\r\n    const { onClick, to, ...rest } = this.props;\r\n\r\n    const props = { ...rest };\r\n\r\n    if (typeof onClick === 'function') {\r\n      props.onClick = onClick;\r\n    }\r\n\r\n    if (typeof to === 'function') {\r\n      props.to = to();\r\n    } else if(to) {\r\n      props.to = to;\r\n    }\r\n\r\n    return props;\r\n  }\r\n\r\n  /**\r\n   * @returns {String | ReactElement}\r\n   */\r\n  getComponent = () => {\r\n    const { to } = this.props;\r\n\r\n    if (to) {\r\n      return Link;\r\n    }\r\n\r\n    return 'div';\r\n  }\r\n\r\n  render() {\r\n    const { onClose, children, className } = this.props;\r\n    const Component = this.getComponent();\r\n\r\n    return (\r\n      <MuiMenuItem onClick={onClose} className=\"p-0\">\r\n        <Component\r\n          {...this.getProps()}\r\n          className={classNames('color-black d-block h-100 w-100 nav-link', className)}\r\n        >\r\n          {children}\r\n        </Component>\r\n      </MuiMenuItem>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MenuItem;\r\n","import React from 'react';\r\nimport MuiMenu from '@material-ui/core/Menu';\r\n\r\nimport Auth from '../../../../services/Auth';\r\nimport * as data from './data';\r\nimport MenuItem from './MenuItem';\r\n\r\nclass Menu extends React.Component {\r\n\r\n  state = {\r\n    // wether or no the menu is opened\r\n    menu: null\r\n  }\r\n\r\n  /**\r\n   * get the menu contents\r\n   * @returns {ReactElement[]}\r\n   */\r\n  getMenu = () => {\r\n    const dataLinks = this.getDataLinks();\r\n\r\n    return this.parseDataToMenu(dataLinks);\r\n  }\r\n\r\n  /**\r\n   * get the data links depending on the user data\r\n   * @returns {ReactElement[]}\r\n   */\r\n  getDataLinks = () => {\r\n    let dataLinks = [];\r\n\r\n    if (!Auth.isLogged()) {\r\n      dataLinks = [...data.guest];\r\n\r\n      return dataLinks;\r\n    }\r\n\r\n    if (Auth.isUser()) {\r\n      dataLinks = [...data.user];\r\n    }\r\n\r\n    return dataLinks;\r\n  }\r\n\r\n  /**\r\n   * parse the data links into jsx\r\n   * @param {Object[]} dataLinks\r\n   * @param {String} dataLinks[].to\r\n   * @param {String} dataLinks[].label\r\n   * @param {String} dataLinks[].className\r\n   * @param {Function} dataLinks[].onClick\r\n   * @returns {ReactElement[]}\r\n   */\r\n  parseDataToMenu = dataLinks => {\r\n    let links = [];\r\n\r\n    dataLinks.forEach(link => {\r\n      links[links.length] = (\r\n        <MenuItem key={link.label} onClose={this.handleClose} {...link} >\r\n          {link.label}\r\n        </MenuItem>\r\n      );\r\n    });\r\n\r\n    return links;\r\n  }\r\n\r\n  // open the menu\r\n  handleClick = e => this.setState({ menu: e.currentTarget });\r\n  // close the menu\r\n  handleClose = () => this.setState({ menu: null });\r\n\r\n  render() {\r\n    const { menu } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <i\r\n          className=\"fa fa-bars fa-2x color-white pointer\"\r\n          aria-label=\"more\"\r\n          aria-controls=\"long-menu\"\r\n          aria-haspopup=\"true\"\r\n          onClick={this.handleClick}\r\n        ></i>\r\n        <MuiMenu\r\n          id=\"navbar-menu\"\r\n          keepMounted\r\n          anchorEl={menu}\r\n          open={Boolean(menu)}\r\n          onClose={this.handleClose}\r\n          MenuListProps={{\r\n            className: 'bg-color-grey-lighten-1'\r\n          }}\r\n        >\r\n          {this.getMenu()}\r\n        </MuiMenu>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nimport Auth from '../../../services/Auth';\r\nimport Menu from './Menu';\r\nimport './Navbar.scss';\r\n\r\nconst mapStateToProps = mapDynamicState('auth: user');\r\n\r\nclass Navbar extends React.Component {\r\n\r\n  render() {\r\n    const { user } = this.props;\r\n\r\n    return (\r\n      <AppBar\r\n        position=\"fixed\"\r\n        className=\"navbar\"\r\n        id=\"Navbar\"\r\n      >\r\n        <Toolbar>\r\n          <Grid container justify=\"space-between\" alignItems=\"center\">\r\n            <Grid item>\r\n              <Typography variant=\"h6\">\r\n                <Link className=\"color-white\" to=\"/\">Dorg gallery</Link>\r\n              </Typography>\r\n            </Grid>\r\n\r\n            <Grid item>\r\n              {\r\n                Auth.isLogged() && <Link to=\"/upload\"></Link>\r\n              }\r\n              <Menu user={user} />\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </AppBar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Navbar);\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Route, Redirect, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport authState from '../../../store/states/auth';\r\nimport Auth from '../../../services/Auth';\r\n\r\nconst mapStateToProps = mapDynamicState('auth: user');\r\nconst mapDispatchToProps = mapDynamicDispatch(authState.actions, 'setDeniedPage');\r\n\r\nclass ProtectedRoute extends React.Component {\r\n\r\n  state = {\r\n    redirect: false,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setDeniedPageIfAccessDenied();\r\n  }\r\n\r\n  /**\r\n   * set denied page data if the client doesn't have access to the page\r\n   */\r\n  setDeniedPageIfAccessDenied = () => {\r\n    const { setDeniedPage, role } = this.props;\r\n\r\n    if (Auth.hasRole(role)) {\r\n      return;\r\n    }\r\n\r\n    setDeniedPage({\r\n      path: window.location.href,\r\n      require: role,\r\n    });\r\n\r\n    this.setState({ redirect: true });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { user } = this.props;\r\n\r\n    if (!_.isEqual(prevProps.user, user)) {\r\n      this.setDeniedPageIfAccessDenied();\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    const { redirect } = this.state;\r\n    const { role, ...rest } = this.props;\r\n\r\n    // if the client have the required role, they can access the route\r\n    // otherwise we redirect them to the login page\r\n    if (Auth.hasRole(role)) {\r\n      return <Route {...rest} />;\r\n    } else {\r\n      return redirect && <Redirect to=\"/login\" />;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ProtectedRoute));\r\n","import React from 'react';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport './Home.scss';\r\n\r\nclass Home extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <Grid container className=\"Home\" justify=\"center\">\r\n        <h1 className=\"color-white\">\r\n          There is nothing here yet \\_()_/\r\n        </h1>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\nimport Checkbox from './';\r\n\r\nclass Multiple extends React.Component {\r\n\r\n  /**\r\n   * is called when a checkbox trigger the `onChange` event\r\n   */\r\n  handleChange = e => {\r\n    const { value: propsValue, onChange, name } = this.props;\r\n    const value = this.getCheckboxValue(e.target);\r\n\r\n    let newValue = [...propsValue];\r\n\r\n    // if the value of the component has the value of the triggered checkbox\r\n    // then we take it off\r\n    // otherwise we add it\r\n    if (newValue.includes(value)) {\r\n      newValue = newValue.filter(v => v !== value);\r\n    } else {\r\n      newValue = [...newValue, value];\r\n    }\r\n\r\n    // then trigger the onChange handler of the user\r\n    onChange(newValue, name);\r\n  }\r\n\r\n  /**\r\n   * get the checkbox value\r\n   * @param {Object} checkbox\r\n   * @param {String} checkbox.name\r\n   * @param {any} checkbox.value\r\n   */\r\n  getCheckboxValue = checkbox => {\r\n    return checkbox.value || checkbox.name;\r\n  }\r\n\r\n  render() {\r\n    const { data, name, value, className } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {data.map(checkbox => (\r\n          <Checkbox\r\n            key={this.getCheckboxValue(checkbox)}\r\n            label={checkbox.label}\r\n            value={this.getCheckboxValue(checkbox)}\r\n            name={name + '-' + checkbox.name}\r\n            onChange={this.handleChange}\r\n            checked={value.includes(this.getCheckboxValue(checkbox))}\r\n            className={className}\r\n          />\r\n        ))}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Multiple;\r\n","import React from 'react';\r\n\r\nimport Checkbox from './';\r\n\r\nclass YesNo extends React.Component {\r\n\r\n  checkboxData = [{\r\n    label: 'Yes',\r\n    name: 'yes',\r\n  }, {\r\n    label: 'No',\r\n    name: 'no',\r\n  }]\r\n\r\n  render() {\r\n    const { name, value, onChange } = this.props;\r\n\r\n    return (\r\n      <Checkbox.Multiple\r\n        data={this.checkboxData}\r\n        name={name}\r\n        value={value}\r\n        onChange={onChange}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default YesNo;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport MuiCheckbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nimport Multiple from './Multiple';\r\nimport YesNo from './YesNo';\r\nimport './Checkbox.scss';\r\n\r\nclass Checkbox extends React.Component {\r\n\r\n  static Multiple = Multiple;\r\n  static YesNo = YesNo;\r\n\r\n  render() {\r\n    const { value, label, checked, name, onChange, className } = this.props;\r\n\r\n    return (\r\n      <FormControlLabel\r\n        className={classNames('checkbox-control-label', className)}\r\n        value={value}\r\n        control={\r\n          <MuiCheckbox\r\n            onChange={onChange}\r\n            checked={checked}\r\n            name={name}\r\n            id={name}\r\n          />\r\n        }\r\n        label={label}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Checkbox;\r\n","import openSocket from 'socket.io-client';\r\n\r\nlet url;\r\nlet port;\r\n\r\nif (process.env.NODE_ENV === 'production') port = 8001;\r\nelse port = 8000;\r\n\r\nif (/localhost/.test(window.location)) url = 'http://localhost:' + port;\r\nelse url = 'https://dorg-gallery.zougui.fr:' + port;\r\n\r\nconst socket = openSocket(url, { secure: true });\r\n\r\nexport default socket;\r\n","import React from 'react';\r\nimport { FormGroup, Button } from '@material-ui/core';\r\n\r\nimport Checkbox from '../../../../../Partials/Checkbox';\r\n\r\nclass NonEditableFields extends React.Component {\r\n\r\n  /**\r\n   * is called when the client select one file or more\r\n   */\r\n  handleFiles = e => {\r\n    const { files } = e.target;\r\n\r\n    this.changeFormData('image', files[0]);\r\n  }\r\n\r\n  /**\r\n   * is called when the client check/uncheck a checkbox\r\n   */\r\n  handleCheckboxChange = e => {\r\n    const { name, checked } = e.target;\r\n\r\n    this.changeFormData(name, checked);\r\n  }\r\n\r\n  /**\r\n   * change the value of one property in the `formData`\r\n   */\r\n  changeFormData = (name, value) => {\r\n    const { changeFormData } = this.props;\r\n\r\n    changeFormData({ [name]: value });\r\n  }\r\n\r\n  render() {\r\n    const { formData } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        <FormGroup row className=\"justify-content-center\">\r\n          <Checkbox\r\n            onChange={this.handleCheckboxChange}\r\n            checked={formData.withOverlay}\r\n            name=\"withOverlay\"\r\n            label=\"Draw an overlay over the image?\"\r\n          />\r\n        </FormGroup>\r\n\r\n        <FormGroup row className=\"justify-content-center\">\r\n          <input\r\n            type=\"file\"\r\n            id=\"image\"\r\n            className=\"d-none\"\r\n            accept=\"image/*\"\r\n            onChange={this.handleFiles}\r\n          />\r\n          <label htmlFor=\"image\">\r\n            <Button variant=\"contained\" component=\"span\" className=\"bg-color-grey-darken-1 color-white\">Browse</Button>\r\n          </label>\r\n        </FormGroup>\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NonEditableFields;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { FormGroup, Button } from '@material-ui/core';\r\n\r\nclass FormWrapper extends React.Component {\r\n\r\n  state = {\r\n    error: ''\r\n  };\r\n\r\n  /**\r\n   * called when the `submit` event is triggered from the form\r\n   */\r\n  submit = e => {\r\n    const { onSubmit, formData, validate } = this.props;\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (validate(formData)) {\r\n        onSubmit(e, formData);\r\n      }\r\n    } catch (error) {\r\n      if (!_.isError(error)) {\r\n        throw new Error(`validate must throw an Error. Got \"${error}\"`);\r\n      }\r\n\r\n      this.setState({ error: error.message });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { error } = this.state;\r\n    const { formData, changeFormData, Form } = this.props;\r\n\r\n    return (\r\n      <form onSubmit={this.submit} className=\"d-flex justify-content-center flex-column w-100\">\r\n        <Form formData={formData} changeFormData={changeFormData} />\r\n\r\n        <FormGroup row className=\"d-flex justify-content-center mt-3\">\r\n          <Button color=\"primary\" variant=\"contained\" type=\"submit\">\r\n            submit\r\n          </Button>\r\n        </FormGroup>\r\n\r\n        <FormGroup row className=\"d-flex justify-content-center mt-3\">\r\n          <p className=\"color-red-darken-1\">{error}</p>\r\n        </FormGroup>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FormWrapper;\r\n","import React from 'react';\r\n\r\nimport NonEditableFields from './NonEditableFields';\r\nimport FormWrapper from '../FormWrapper';\r\n\r\nclass NonEditableForm extends React.Component {\r\n\r\n  /**\r\n   * validate the form\r\n   * @throws {Error} if the `formData` is not valid\r\n   * @returns {Boolean}\r\n   */\r\n  validate = formData => {\r\n    // the image is required\r\n    if (!formData.image) {\r\n      throw new Error('You must choose an image');\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const { formData, changeFormData, onSubmit } = this.props;\r\n\r\n    return (\r\n      <FormWrapper\r\n        formData={formData}\r\n        changeFormData={changeFormData}\r\n        Form={NonEditableFields}\r\n        onSubmit={onSubmit}\r\n        validate={this.validate}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default NonEditableForm;\r\n","export const fields = [\r\n  {\r\n    name: 'title',\r\n    label: 'Title',\r\n    //fullWidth: true\r\n  },\r\n  {\r\n    name: 'artistName',\r\n    label: 'Artist name'\r\n  },\r\n  {\r\n    name: 'artistLink',\r\n    label: 'Artist link'\r\n  },\r\n  {\r\n    name: 'tags',\r\n    label: 'Keywords',\r\n  },\r\n  {\r\n    name: 'description',\r\n    label: 'Description',\r\n    multiline: true,\r\n    rows: 5,\r\n  }\r\n];\r\n","import React from 'react';\r\nimport { FormGroup, Select, MenuItem, InputLabel, FormControl } from '@material-ui/core';\r\n\r\nimport Input from '../../../../../Partials/Input';\r\nimport { fields } from './fields';\r\nimport './EditableFields.scss';\r\n\r\nclass EditableFields extends React.Component {\r\n\r\n  /**\r\n   * is called when `onChange` is triggered on the inputs\r\n   */\r\n  handleChange = e => {\r\n    const { name, value } = e.target;\r\n\r\n    this.changeFormData(name, value);\r\n  }\r\n\r\n  /**\r\n   * change the value of one property in the `formData`\r\n   */\r\n  changeFormData = (name, value) => {\r\n    const { changeFormData } = this.props;\r\n\r\n    changeFormData({ [name]: value });\r\n  }\r\n\r\n  render() {\r\n    const { formData } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n\r\n        {fields.map(field => (\r\n          <FormGroup row key={field.name} className=\"justify-content-center\">\r\n            <Input\r\n              {...field}\r\n              fullWidth\r\n              value={formData[field.name]}\r\n              onChange={this.handleChange}\r\n            />\r\n          </FormGroup>\r\n        ))}\r\n\r\n        <FormGroup row className=\"justify-content-center\">\r\n            <Select\r\n              className=\"svg-color-white\"\r\n              fullWidth\r\n              value={formData.rate}\r\n              onChange={this.handleChange}\r\n              input={<Input name=\"rate\" label=\"Rate\" />}\r\n              MenuProps={{\r\n                MenuListProps: {\r\n                  className: 'bg-color-grey color-grey-darken-4'\r\n                }\r\n              }}\r\n            >\r\n              <MenuItem value=\"general\">General</MenuItem>\r\n              <MenuItem value=\"suggestive\">Suggestive</MenuItem>\r\n              <MenuItem value=\"nsfw\">NSFW</MenuItem>\r\n            </Select>\r\n        </FormGroup>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditableFields;\r\n","import React from 'react';\r\n\r\nimport EditableFields from './EditableFields';\r\nimport FormWrapper from '../FormWrapper';\r\n\r\nclass EditableForm extends React.Component {\r\n\r\n  /**\r\n   * validate the form\r\n   * @throws {Error} if the `formData` is not valid\r\n   * @returns {Boolean}\r\n   */\r\n  validate = formData => {\r\n    // the image is required\r\n    if (!formData.rate) {\r\n      throw new Error('You must rate your image!');\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const { formData, changeFormData, onSubmit } = this.props;\r\n\r\n    return (\r\n      <FormWrapper\r\n        formData={formData}\r\n        changeFormData={changeFormData}\r\n        Form={EditableFields}\r\n        onSubmit={onSubmit}\r\n        validate={this.validate}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditableForm;\r\n","import React from 'react';\r\n\r\nimport NonEditableForm from './Forms/NonEditableFields/index';\r\nimport EditableForm from './Forms/EditableFields/index';\r\n\r\nclass FormDisplayer extends React.Component {\r\n\r\n  state = {\r\n    title: '',\r\n    artistName: '',\r\n    artistLink: '',\r\n    tags: [],\r\n    withOverlay: false,\r\n    rate: 'general',\r\n    image: null,\r\n    step: 1,\r\n  }\r\n\r\n  /**\r\n   * get the form depending on the step\r\n   * @returns {ReactComponent}\r\n   * @throws {Error} if the step is invalid\r\n   */\r\n  getForm = () => {\r\n    const { step } = this.state;\r\n\r\n    switch (step) {\r\n      case 1:\r\n        return NonEditableForm;\r\n      case 2:\r\n        return EditableForm;\r\n      default:\r\n        throw new Error(`Invalid step. got \"${step}\"`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is called when the form has been submited and validated\r\n   */\r\n  submit = e => {\r\n    const { step } = this.state;\r\n    const { onSubmit } = this.props;\r\n\r\n    if (step === 2) {\r\n      onSubmit(this.state, e);\r\n    } else {\r\n      this.setState({ step: step + 1 });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * give the form the possibility to edit the state\r\n   */\r\n  _setState = obj => this.setState(obj);\r\n\r\n  render() {\r\n    const Form = this.getForm();\r\n\r\n    return (\r\n      <Form formData={this.state} changeFormData={this._setState} onSubmit={this.submit} />\r\n    );\r\n  }\r\n}\r\n\r\nexport default FormDisplayer;\r\n","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport './Loader.scss';\r\n\r\nclass Loader extends React.Component {\r\n\r\n  state = {\r\n    canRedirect: false\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { redirection, success, timeout } = this.props;\r\n\r\n    /**\r\n     * if there is a redirection and the loading is completed\r\n     * we make the redirection after a timeout\r\n     */\r\n    if (redirection && success && success !== prevProps.success) {\r\n      setTimeout(() => this.setState({ canRedirect: true }), timeout == null ? 1500 : timeout);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      color,\r\n      size,\r\n      thickness,\r\n      successMessage,\r\n      success,\r\n      loading,\r\n      redirection,\r\n      error,\r\n      errorMessage,\r\n      empty,\r\n      emptyMessage\r\n    } = this.props;\r\n    const { canRedirect } = this.state;\r\n\r\n    if (loading && !success && !error) {\r\n      return (\r\n        <div>\r\n          <CircularProgress color={color || 'primary'} size={size || 40} thickness={thickness || 5} />\r\n        </div>\r\n      );\r\n    } else if (success && !empty) {\r\n      return (\r\n        <p className=\"success\">\r\n          {successMessage}\r\n          {canRedirect && <Redirect to={redirection} />}\r\n        </p>\r\n      );\r\n    } else if (error) {\r\n      return (\r\n        <p className=\"error\">\r\n          { errorMessage }\r\n        </p>\r\n      );\r\n    } else if (empty && success) {\r\n      return (\r\n        <p>\r\n          { emptyMessage }\r\n        </p>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default Loader;\r\n","import socket from '../../../../socket/config';\r\n\r\nclass On {\r\n  static imageUploaded = callback => {\r\n    return socket.on('imageUploaded', callback);\r\n  }\r\n\r\n  static imageUploadFailed = callback => {\r\n    return socket.on('imageUploadFailed', callback);\r\n  }\r\n}\r\n\r\nclass Emit {\r\n  static uploadImage = data => {\r\n    return socket.emit('uploadImage', data);\r\n  }\r\n}\r\n\r\nclass Remove {\r\n  static imageUploaded = callback => {\r\n    return socket.removeListener('imageUploaded', callback);\r\n  }\r\n\r\n  static imageUploadFailed = callback => {\r\n    return socket.removeListener('imageUploadFailed', callback);\r\n  }\r\n}\r\n\r\nexport default {\r\n  On,\r\n  Emit,\r\n  Remove\r\n};\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Grid } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport FormDisplayer from './FormDisplayer';\r\nimport Loader from '../../../Partials/Loader';\r\nimport Section from '../../../Partials/Section';\r\nimport uploaderState from '../../../../store/states/uploader';\r\nimport socket from './socket';\r\n\r\nconst mapStateToProps = mapDynamicState({\r\n  misc: 'tags',\r\n  auth: 'user',\r\n});\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setFormView setImageData');\r\n\r\nclass Uploader extends React.Component {\r\n\r\n  state = {\r\n    error: '',\r\n\r\n    loader: {\r\n      loading: false,\r\n      success: false,\r\n      error: false,\r\n      errorMessage: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    socket.On.imageUploaded(this.imageUploaded);\r\n    socket.On.imageUploadFailed(this.imageUploadFailed);\r\n  }\r\n\r\n\r\n  componentWillUnmount() {\r\n    socket.Remove.imageUploaded(this.imageUploaded);\r\n    socket.Remove.imageUploadFailed(this.imageUploadFailed);\r\n  }\r\n\r\n  /**\r\n   * is called when the user submit the form\r\n   */\r\n  submit = formData => {\r\n    const { setImageData, setFormView, user } = this.props;\r\n\r\n    this.setState({ loader: { loading: true } });\r\n\r\n    this.transformFormData(formData)\r\n      .then(formData => {\r\n        // if the user want to draw an overlay we don't upload the image but display the\r\n        // view to draw an overlay\r\n        // other we upload the image\r\n        if (formData.withOverlay) {\r\n          setImageData(formData);\r\n          setFormView('Overlay');\r\n        } else {\r\n\r\n          socket.Emit.uploadImage({\r\n            ...formData,\r\n            tags: formData.tags,\r\n            user\r\n          });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n\r\n        this.setState({ loader: { error: true, errorMessage: 'An error occured and your image couldn\\'t be uploaded' } });\r\n      });\r\n  }\r\n\r\n  /**\r\n   * is used to transform the data from the form before we upload them\r\n   * @param {Object} formData\r\n   * @returns {Promise<Object>} data of the form ready to be send to the server\r\n   */\r\n  transformFormData = formData => new Promise(resolve => {\r\n\r\n    const newFormData = { ...formData };\r\n\r\n    if (newFormData.artistLink) {\r\n      newFormData.artistLink = newFormData.artistLink.trim();\r\n    }\r\n\r\n    if (!/^https?:\\/\\//.test(formData.artistLink)) {\r\n      newFormData.artistLink = 'http://' + newFormData.artistLink;\r\n    }\r\n\r\n    if (_.isString(newFormData.tags)) {\r\n      // transform the tags into an array and delete whitespaces\r\n      newFormData.tags = newFormData.tags.trim().split(' ').filter(str => str.trim());\r\n    }\r\n\r\n    // we change the structure of the artist data\r\n    // to match the model used in the database\r\n    newFormData.artist = {\r\n      name: newFormData.artistName,\r\n      link: newFormData.artistLink,\r\n    };\r\n\r\n    // those 2 values or now useless so we delete them\r\n    delete newFormData.artistName;\r\n    delete newFormData.artistLink;\r\n\r\n    const reader = new FileReader();\r\n\r\n    // we want the image as a base64 string\r\n    reader.readAsDataURL(newFormData.image);\r\n    reader.addEventListener('load', () => {\r\n      newFormData.image = formData.image;\r\n      newFormData.imageBase64 = reader.result;\r\n\r\n      resolve(newFormData);\r\n    });\r\n  });\r\n\r\n  /**\r\n   * is called if the upload succeeded\r\n   */\r\n  imageUploaded = () => {\r\n    this.setState({ loader: { success: true } });\r\n  }\r\n\r\n  /**\r\n   * is called if the upload failed\r\n   * @param {Object} data from the server\r\n   * @param {String} data.error error message\r\n   */\r\n  imageUploadFailed = data => {\r\n    this.setState({ loader: { error: true, errorMessage: data.error } });\r\n  }\r\n\r\n  render() {\r\n    const { loader, error } = this.state;\r\n\r\n    return (\r\n      <div className=\"Uploader d-flex justify-content-center text-center\">\r\n\r\n        <Grid container item xs={11} md={6} sm={9} className=\"d-flex flex-column align-items-center\">\r\n          <Section>\r\n            <FormDisplayer onSubmit={this.submit} />\r\n\r\n            <Loader\r\n              {...loader}\r\n              redirection=\"/\"\r\n              errorMessage={error || loader.errorMessage}\r\n              successMessage=\"The image has been uploaded\"\r\n            />\r\n          </Section>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Uploader);\r\n","import React from 'react';\r\nimport { throttle } from 'lodash';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\nimport uploaderState from '../../../../store/states/uploader';\r\n\r\nimport './Canvas.scss';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: canvasData imageData inputs labels');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData setCanvasField setCanvasLabel');\r\n\r\nclass Canvas extends React.Component {\r\n\r\n  draggingOut = false;\r\n\r\n  state = {\r\n    inputId: 0,\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.body.addEventListener('dragover', e => throttle(this.dragOverHandler, 200)(e, true));\r\n    document.body.addEventListener('drop', this.dropHandler);\r\n    document.body.addEventListener('mouseup', this.mouseUpHandler);\r\n  }\r\n\r\n  /**\r\n   * calculate a position relative to the canvas from an absolute position\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  calculateRelativePosition = (x, y) => {\r\n    const { top, left } = this.props.canvasData.imageBounds;\r\n\r\n    return {\r\n      x: x - left + window.pageXOffset,\r\n      y: y - top + window.pageYOffset,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * do an action on the canvas depending to the context action\r\n   * @param {Number} x0\r\n   * @param {Number} y0\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   */\r\n  canvasAction = (x0, y0, x1, y1) => {\r\n    const { canvasData } = this.props;\r\n\r\n    let pos = this.calculateRelativePosition(x0, y0);\r\n    x0 = pos.x;\r\n    y0 = pos.y;\r\n\r\n    pos = this.calculateRelativePosition(x1, y1);\r\n    x1 = pos.x;\r\n    y1 = pos.y;\r\n\r\n    if (canvasData.contextAction === 'draw') {\r\n      this.drawLine(x0, y0, x1, y1);\r\n    } else if (canvasData.contextAction === 'erase') {\r\n      this.eraseArea(x0, y0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * draw a line on the canvas\r\n   * @param {Number} x0\r\n   * @param {Number} y0\r\n   * @param {Number} x1\r\n   * @param {Number} y1\r\n   */\r\n  drawLine = (x0, y0, x1, y1) => {\r\n    const { canvasData } = this.props;\r\n    const { context, lineWidth, color } = canvasData;\r\n\r\n    context.beginPath();\r\n\r\n    // draw the line\r\n    context.moveTo(x0, y0);\r\n    context.lineTo(x1, y1);\r\n\r\n    context.strokeStyle = color;\r\n    context.lineWidth = lineWidth;\r\n    context.lineCap = 'butt';\r\n    context.stroke();\r\n\r\n    context.closePath();\r\n  }\r\n\r\n  /**\r\n   * erase an area on the canvas\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   */\r\n  eraseArea = (x, y) => {\r\n    const { canvasData } = this.props;\r\n    const { context, eraseSize } = canvasData;\r\n\r\n    x -= eraseSize / 2;\r\n    y -= eraseSize / 2;\r\n\r\n    context.clearRect(x, y, eraseSize, eraseSize);\r\n  }\r\n\r\n  /**\r\n   * set the client position in the canvas data\r\n   * and specify in the data that the user is drawing\r\n   */\r\n  mouseDownHandler = e => {\r\n    const { setCanvasData, canvasData } = this.props;\r\n\r\n    canvasData.x = e.clientX;\r\n    canvasData.y = e.clientY;\r\n    canvasData.drawing = true;\r\n\r\n    // update the canvasData\r\n    setCanvasData(canvasData);\r\n  }\r\n\r\n  /**\r\n   * is called when the user release the mouse\r\n   */\r\n  mouseUpHandler = e => {\r\n    const { setCanvasData, canvasData } = this.props;\r\n\r\n    // if the user isn't drawing we don't want to do anything\r\n    if (!canvasData.drawing) {\r\n      return;\r\n    }\r\n\r\n    // update the canvasData\r\n    setCanvasData({\r\n      ...canvasData,\r\n      drawing: false,\r\n    });\r\n\r\n    // do an action on the canvas\r\n    this.canvasAction(canvasData.x, canvasData.y, e.clientX, e.clientY);\r\n  }\r\n\r\n  /**\r\n   * is called when the mouse move\r\n   */\r\n  mouseMoveHandler = e => {\r\n    const { setCanvasData, canvasData } = this.props;\r\n\r\n    // if the user isn't drawing we don't want to do anything\r\n    if (!canvasData.drawing) {\r\n      return;\r\n    }\r\n\r\n    // do an action on the canvas\r\n    this.canvasAction(canvasData.x, canvasData.y, e.clientX, e.clientY);\r\n    canvasData.x = e.clientX;\r\n    canvasData.y = e.clientY;\r\n\r\n    // update the canvasData\r\n    setCanvasData(canvasData);\r\n  }\r\n\r\n  /**\r\n   * is called to persist an event and call a function that'll use the persisted event\r\n   * @param {Function} callback\r\n   * @returns {Function}\r\n   *\r\n   * @param {Boolean} boolean\r\n   */\r\n  persister = callback => e => {\r\n    e.persist();\r\n    return callback(e);\r\n  }\r\n\r\n  /**\r\n   * cast a pixel string into a number\r\n   * @param {String}\r\n   * @returns {Number}\r\n   */\r\n  pixelToNumber = str => {\r\n    return +str.replace('px', '');\r\n  }\r\n\r\n  /**\r\n   * is called when an input is dragged over the canvas\r\n   * @param {Boolean} preventUpdate\r\n   */\r\n  dragOverHandler = (e, preventUpdate) => {\r\n    e.preventDefault();\r\n    console.log('dragOver')\r\n\r\n    if (!preventUpdate && this.draggingOut) {\r\n      this.draggingOut = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is called when an input is dragged outside of the canvas\r\n   */\r\n  dragLeaveHandler = () => {\r\n    if (!this.draggingOut) {\r\n      this.draggingOut = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is called when an input is dropped\r\n   */\r\n  dropHandler = e => {\r\n    let { inputs, labels, setCanvasField, setCanvasLabel } = this.props;\r\n    const id = +e.dataTransfer.getData('id');\r\n\r\n    // if the input is not dragged outside of the canvas\r\n    // we want to change its position\r\n    // otherwise we want to delete it\r\n    if (!this.draggingOut) {\r\n      for (let i = 0; i < inputs.length; i++) {\r\n        const input = inputs[i];\r\n\r\n        if ((input && input.id !== id) || !input) {\r\n          continue;\r\n        }\r\n\r\n        const { x, y } = this.calculateRelativePosition(e.clientX, e.clientY);\r\n        const { label } = input;\r\n\r\n        const prevY = this.pixelToNumber(label.style.top);\r\n        const prevX = this.pixelToNumber(label.style.left);\r\n\r\n        // calculate the new position of the label\r\n        label.style.top = (prevY + (y - prevY) + 82) + 'px';\r\n        label.style.left = (prevX + (x - prevX)) + 'px';\r\n\r\n        // update the inputs and labels\r\n        setCanvasField(inputs);\r\n        setCanvasLabel(labels);\r\n        break;\r\n      }\r\n    } else {\r\n      const inputsUpdate = inputs.filter(input => input.id !== id);\r\n      const labelsUpdate = labels.filter((_, i) => i !== id);\r\n\r\n      setCanvasField(inputsUpdate);\r\n      setCanvasLabel(labelsUpdate);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { canvasData, inputs: _inputs } = this.props;\r\n    const { width, height } = canvasData.imageBounds;\r\n\r\n    const inputs = _inputs.map(input => input.element);\r\n\r\n    return (\r\n      <div>\r\n        <div\r\n          className=\"select-none canvas-container\"\r\n          onDragLeave={this.dragLeaveHandler}\r\n          onDragOver={this.persister(throttle(this.dragOverHandler, 100))}\r\n        >\r\n          <canvas\r\n            className=\"select-none canvas droppable\"\r\n            id=\"canvas\"\r\n            width={width && width - 300}\r\n            height={height}\r\n            onMouseDown={this.mouseDownHandler}\r\n            onMouseMove={this.persister(throttle(this.mouseMoveHandler, 20))}\r\n          >\r\n\r\n          </canvas>\r\n          {inputs}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);\r\n","const swatches = [\r\n  {\r\n    id: 1,\r\n    color: 'rgba(255,255,255,1)'\r\n  },\r\n  {\r\n    id: 2,\r\n    color: 'rgba(255,251,13,1)'\r\n  },\r\n  {\r\n    id: 3,\r\n    color: 'rgba(5,50,255,1)'\r\n  },\r\n  {\r\n    id: 4,\r\n    color: 'rgba(255,147,0,1)'\r\n  },\r\n  {\r\n    id: 5,\r\n    color: 'rgba(0,249,26,1)'\r\n  },\r\n  {\r\n    id: 6,\r\n    color: 'rgba(255,39,0,1)'\r\n  },\r\n  {\r\n    id: 7,\r\n    color: 'rgba(0,0,0,1)'\r\n  },\r\n  {\r\n    id: 8,\r\n    color: 'rgba(104,104,104,1)'\r\n  },\r\n  {\r\n    id: 9,\r\n    color: 'rgba(210,122,238,1)'\r\n  },\r\n  {\r\n    id: 10,\r\n    color: 'rgba(91,168,196,1)'\r\n  },\r\n  {\r\n    id: 11,\r\n    color: 'rgba(230,74,169,1)'\r\n  },\r\n  {\r\n    id: 12,\r\n    color: 'erase'\r\n  }\r\n];\r\n\r\nexport default swatches;\r\n","import React from 'react';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nconst PanelSlider = ({ name, label, value, step, min, max, onChange }) => (\r\n  <React.Fragment>\r\n    <label className=\"color-white\" htmlFor={name}>\r\n      {label}\r\n    </label>\r\n\r\n    <Slider\r\n      style={{ padding: '10px 0' }}\r\n      id={name}\r\n      name={name}\r\n      value={value}\r\n      step={step}\r\n      min={min}\r\n      max={max}\r\n      onChange={onChange}\r\n    />\r\n  </React.Fragment>\r\n);\r\n\r\nexport default PanelSlider;\r\n","import React from 'react';\r\n\r\nconst show = Component => ({ show, ...props }) => {\r\n  return show\r\n    ? <Component {...props} />\r\n    : null;\r\n}\r\n\r\nexport default show;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FaEraser as _FaEraser } from 'react-icons/fa';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport './ColorPanel.scss';\r\n\r\nimport swatches from '../ColorPanel/swatches';\r\nimport PanelSlider from '../PanelSlider';\r\nimport uploaderState from '../../../../../../store/states/uploader';\r\nimport show from '../../../../../../containers/show';\r\n\r\nconst FaEraser = show(_FaEraser);\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: canvasData imageData inputs labels imagesToUpload');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData resetReducer');\r\n\r\nclass ColorPanel extends React.Component {\r\n\r\n  state = {\r\n    alpha: this.props.canvasData.alpha\r\n  };\r\n\r\n  /**\r\n   * update the variable `canvasData` in the store\r\n   * @param {Object} newData\r\n   */\r\n  updateCanvasData = newData => {\r\n    const { canvasData, setCanvasData } = this.props;\r\n\r\n    setCanvasData({\r\n      ...canvasData,\r\n      ...newData\r\n    });\r\n  }\r\n\r\n  /**\r\n   * is called each time the color is changed\r\n   * @param {String} color\r\n   */\r\n  onColorUpdate = (e, color) => {\r\n    const { canvasData } = this.props;\r\n    const { alpha } = this.state;\r\n\r\n    if (e) {\r\n      // erase isn't a color but the context action\r\n      if (color !== 'erase') {\r\n        canvasData.color = color;\r\n        canvasData.contextAction = 'draw';\r\n      } else {\r\n        canvasData.contextAction = 'erase';\r\n      }\r\n    }\r\n\r\n    // change the alpha\r\n    let newColor = canvasData.color.replace(/[0-1]+([.][0-9]*)?\\)$/, alpha + ')');\r\n    canvasData.color = newColor;\r\n\r\n    this.updateCanvasData(canvasData);\r\n  }\r\n\r\n  /**\r\n   * is called each time the alpha is changed, then update the color\r\n   * @param {String} value\r\n   */\r\n  onAlphaChange = (e, value) => {\r\n    const { canvasData } = this.props;\r\n\r\n    this.setState({ alpha: value });\r\n    canvasData.alpha = value;\r\n\r\n    this.onColorUpdate();\r\n  }\r\n\r\n  /**\r\n   * return an rgba color with the opacity to 1\r\n   * @param {String} color\r\n   * @returns {String}\r\n   */\r\n  getUnifiedColor = color => {\r\n    const { canvasData } = this.props;\r\n\r\n    if (canvasData.contextAction === 'draw') {\r\n      if (color.indexOf('rgba') >= 0) {\r\n        color = color.replace(/ /g, '').substring(0, color.lastIndexOf(','));\r\n        color += ',1)';\r\n      }\r\n    } else {\r\n      color = canvasData.contextAction;\r\n    }\r\n\r\n    return color;\r\n  }\r\n\r\n  render() {\r\n    const { canvasData } = this.props;\r\n    const { alpha } = this.state;\r\n\r\n    const color = this.getUnifiedColor(canvasData.color, true);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"panel-row\">\r\n          {swatches.map(swatch => (\r\n            <div\r\n              key={swatch.color}\r\n              className={`c${swatch.id} swatch color ${color === swatch.color ? 'active' : ''}`}\r\n              onClick={e => this.onColorUpdate(e, swatch.color)}\r\n            >\r\n              <FaEraser\r\n                show={swatch.color === 'erase'}\r\n                className=\"color-black p-0 m-0 eraser-icon\"\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"panel-row\">\r\n          <PanelSlider\r\n            name=\"alpha\"\r\n            label=\"Alpha\"\r\n            value={alpha}\r\n            onChange={this.onAlphaChange}\r\n            step={0.05}\r\n            min={0.05}\r\n            max={1}\r\n          />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPanel);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport PanelSlider from '../PanelSlider';\r\nimport uploaderState from '../../../../../../store/states/uploader';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: canvasData imageData inputs labels imagesToUpload');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData resetReducer');\r\n\r\nclass SizesPanel extends React.Component {\r\n\r\n  state = {\r\n    fontSize: this.props.canvasData.fontSize,\r\n    eraseSize: this.props.canvasData.eraseSize,\r\n  }\r\n\r\n  /**\r\n   * update the variable 'canvasData' in the store\r\n   */\r\n  updateCanvasData = () => {\r\n    const { canvasData, setCanvasData } = this.props;\r\n\r\n    setCanvasData(canvasData);\r\n  }\r\n\r\n  /**\r\n   * is called each time a slider is changed\r\n   *\r\n   * @param {String} slider name\r\n   * @returns {Function}\r\n   *\r\n   * @param {Number} value\r\n   */\r\n  onSlideChange = slider => (e, value) => {\r\n    const { canvasData } = this.props;\r\n\r\n    this.setState({ [slider]: value });\r\n\r\n    // we want to update the canvasData\r\n    canvasData[slider] = value;\r\n    this.updateCanvasData();\r\n  }\r\n\r\n  render() {\r\n    const { canvasData } = this.props;\r\n    const { fontSize, eraseSize } = this.state;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <PanelSlider\r\n          label=\"Font size\"\r\n          name=\"fontSize\"\r\n          value={fontSize}\r\n          onChange={this.onSlideChange('fontSize')}\r\n          step={1}\r\n          min={16}\r\n          max={100}\r\n        />\r\n\r\n        {\r\n          canvasData.contextAction === 'erase' && (\r\n            <PanelSlider\r\n              show={canvasData.contextAction === 'erase'}\r\n              label=\"Erase size\"\r\n              name=\"eraseSize\"\r\n              value={eraseSize}\r\n              onChange={this.onSlideChange('eraseSize')}\r\n              step={1}\r\n              min={10}\r\n              max={100}\r\n            />\r\n          )\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SizesPanel);\r\n","import React from 'react';\r\nimport MUICheckbox from '@material-ui/core/Checkbox';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nconst Checkbox = ({ label, checked, name, onChange }) => (\r\n  <FormGroup row className=\"d-flex justify-content-center\">\r\n    <FormControlLabel\r\n      control={\r\n        <MUICheckbox\r\n          onChange={onChange}\r\n          checked={checked}\r\n          name={name}\r\n          id={name}\r\n        />\r\n      }\r\n      label={label}\r\n    />\r\n  </FormGroup>\r\n);\r\n\r\nexport default Checkbox;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport Checkbox from './Checkbox';\r\nimport uploaderState from '../../../../../../store/states/uploader';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: canvasData imageData inputs labels imagesToUpload');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData resetReducer');\r\n\r\nclass DisplayPanel extends React.Component {\r\n\r\n  /**\r\n   * update the variable `canvasData` in the store\r\n   * @param {Object} newData\r\n   */\r\n  updateCanvasData = newData => {\r\n    const { canvasData, setCanvasData } = this.props;\r\n\r\n    setCanvasData({\r\n      ...canvasData,\r\n      ...newData\r\n    });\r\n  }\r\n\r\n  /**\r\n   * display or no the layer where the user writes\r\n   */\r\n  displayInputs = () => {\r\n    const { canvasData } = this.props;\r\n\r\n    const overlayContainer = document.getElementById('overlay-container');\r\n\r\n    if (canvasData.displayInputs) { // hide the text\r\n      overlayContainer.classList.add('hideInputs');\r\n    } else { // show the text\r\n      overlayContainer.classList.remove('hideInputs');\r\n    }\r\n\r\n    // update the value\r\n    this.updateCanvasData({ displayInputs: !canvasData.displayInputs });\r\n  }\r\n\r\n  /**\r\n   * display or no the layer where the user draws\r\n   */\r\n  displayMainLayer = () => {\r\n    const { canvasData } = this.props;\r\n\r\n    if (canvasData.displayMainLayer) { // hide the drawing\r\n      canvasData.context.canvas.classList.add('d-none');\r\n    } else { // show the drawing\r\n      canvasData.context.canvas.classList.remove('d-none');\r\n    }\r\n\r\n    // update the value\r\n    this.updateCanvasData({ displayMainLayer: !canvasData.displayMainLayer });\r\n  }\r\n\r\n  // clear the whole canvas\r\n  clearCanvas = () => {\r\n    const { canvasData } = this.props;\r\n    const { context, imageBounds } = canvasData;\r\n\r\n    context.clearRect(0, 0, imageBounds.width, imageBounds.height);\r\n  }\r\n\r\n  render() {\r\n    const { canvasData } = this.props;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"panel-row\">\r\n          <Checkbox\r\n            label=\"Display text\"\r\n            name=\"displayInputs\"\r\n            checked={canvasData.displayInputs}\r\n            onChange={this.displayInputs}\r\n          />\r\n\r\n          <Checkbox\r\n            label=\"Display drawing\"\r\n            name=\"displayMainLayer\"\r\n            checked={canvasData.displayMainLayer}\r\n            onChange={this.displayMainLayer}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"panel-row\">\r\n          <Button\r\n            className=\"color-white\"\r\n            id=\"clear\"\r\n            onClick={this.clearCanvas}\r\n          >\r\n            Clear overlay\r\n          </Button>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DisplayPanel);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\nimport uploaderState from '../../../../store/states/uploader';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: imageData canvasSize canvasData imagesToUpload inputs labels');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasLabel setCanvasField setImageData setCanvasData');\r\n\r\nclass CanvasField extends React.Component {\r\n\r\n  componentDidMount() {\r\n    let { setCanvasLabel, inputs, labels, setCanvasField } = this.props;\r\n\r\n    // set the label element in the array\r\n    const updatedLabels = labels.map((label, i) => {\r\n      if (i === this.props.id) label = document.getElementById('label-' + this.props.id);\r\n      return label;\r\n    });\r\n\r\n    // set the label element in the array\r\n    const updatedFields = inputs.map((field, i) => {\r\n      if (i === this.props.id) field.label = document.getElementById('label-' + this.props.id);\r\n      return field;\r\n    });\r\n\r\n    // update the labels and inputs\r\n    setCanvasLabel(updatedLabels);\r\n    setCanvasField(updatedFields);\r\n  }\r\n\r\n  shouldComponentUpdate = nextProps => {\r\n    return nextProps.inputs !== this.props.inputs;\r\n  }\r\n\r\n  /**\r\n   * cast a pixel string into a number\r\n   */\r\n  pixelToNumber = str => {\r\n    return +str.replace('px', '');\r\n  }\r\n\r\n  getHeight = fontSize => {\r\n    if (fontSize >= 35) {\r\n      fontSize -= 10;\r\n\r\n      return fontSize;\r\n    } else {\r\n      return 25;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is called when the user click on a input\r\n   * is used to change the input's style with the style saved in the canvasData\r\n   */\r\n  onInputClick = e => {\r\n    const { inputs, setCanvasField, canvasData } = this.props;\r\n    const id = +e.target.getAttribute('data-id');\r\n\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      if (inputs[i].id !== id) {\r\n        continue;\r\n      }\r\n\r\n      const label = inputs[i].label;\r\n      const input = label.childNodes[1];\r\n\r\n      // change the style of the field\r\n      input.style.color = canvasData.color;\r\n      label.style.color = canvasData.color;\r\n      input.style.borderColor = canvasData.color;\r\n      input.style.fontSize = canvasData.fontSize + 'px';\r\n      label.style.fontSize = canvasData.fontSize + 'px';\r\n      input.style.height = this.getHeight(canvasData.fontSize) + 'px';\r\n\r\n      // update the fields\r\n      setCanvasField(inputs);\r\n      break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is called when the value of an input change\r\n   */\r\n  inputChangeHandler = e => {\r\n    const { inputs } = this.props;\r\n    let { value } = e.target;\r\n    value = value.trim();\r\n\r\n    const id = +e.target.getAttribute('data-id');\r\n\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      if (inputs[i].id !== id) {\r\n        continue;\r\n      }\r\n\r\n      let labelContent = inputs[i].label.childNodes[0];\r\n\r\n      // if the input has text written in it we don't want the label to have content\r\n      if (value.length > 0) {\r\n        labelContent.textContent = '';\r\n      } else {\r\n        labelContent.textContent = 'Input';\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is called when the user start to drag the field\r\n   */\r\n  dragStartHandler = e => {\r\n    const id = e.target.getAttribute('data-id');\r\n    e.dataTransfer.setData('id', id);\r\n  }\r\n\r\n  render() {\r\n    const { id, client, currentCanvasData } = this.props;\r\n\r\n    return (\r\n      <label\r\n        htmlFor={'input-' + id}\r\n        draggable\r\n        id={'label-' + id}\r\n        style={{ top: client.y, left: client.x, color: currentCanvasData.color, fontSize: currentCanvasData.fontSize + 'px' }}\r\n        className=\"canvas-label draggable\"\r\n        data-id={id}\r\n        onClick={this.onInputClick}\r\n        onDragStart={this.dragStartHandler}\r\n        //onDrop={this.dropHandler}\r\n      >\r\n        <span>Input</span>\r\n        <input\r\n          id={'input-' + id}\r\n          data-id={id}\r\n          style={{\r\n            borderColor: currentCanvasData.color,\r\n            color: currentCanvasData.color,\r\n            fontSize: currentCanvasData.fontSize + 'px',\r\n            height: this.getHeight(currentCanvasData.fontSize) + 'px'\r\n          }}\r\n          className=\"canvas-input\"\r\n          onChange={this.inputChangeHandler}\r\n          //onFocus={this.focusInputHandler}\r\n          //onBlur={this.blurInputHandler}\r\n        />\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasField);\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport uploaderState from '../../../../../../store/states/uploader';\r\nimport CanvasField from '../../CanvasField';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: canvasData imageData inputs labels imagesToUpload');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData setCanvasField setCanvasLabel resetReducer');\r\n\r\nclass InputCreator extends React.Component {\r\n\r\n  state = {\r\n    inputId: 0,\r\n  };\r\n\r\n  /**\r\n   * update the variable 'canvasData' in the store\r\n   */\r\n  updateCanvasData = () => {\r\n    const { canvasData, setCanvasData } = this.props;\r\n\r\n    setCanvasData(canvasData);\r\n  }\r\n\r\n  /**\r\n   * create an input on the canvas\r\n   */\r\n  createInput = () => {\r\n    const { inputId } = this.state;\r\n    let { inputs, canvasData, labels, setCanvasLabel, setCanvasField } = this.props;\r\n    const { x, y } = canvasData.imageBounds;\r\n    const client = { x: x + 10, y: y + 10 };\r\n\r\n    // avoid to use the references to their source (the store)\r\n    inputs = inputs.slice();\r\n    labels = [...labels].slice();\r\n\r\n    labels[inputId] = React.createRef();\r\n    console.log(labels);\r\n    setCanvasLabel(labels);\r\n\r\n    const field = (\r\n      <CanvasField\r\n        key={inputId}\r\n        id={inputId}\r\n        client={client}\r\n        currentCanvasData={canvasData}\r\n      />\r\n    );\r\n\r\n    const input = {\r\n      element: field,\r\n      id: inputId,\r\n      label: labels[inputId]\r\n    };\r\n\r\n    inputs[inputId] = input;\r\n\r\n    setCanvasField(inputs);\r\n    this.setState({ inputId: inputId + 1, lastInput: input })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Button className=\"color-white\" onClick={this.createInput}>\r\n          Create a textbox\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InputCreator);\r\n","import React from 'react';\r\nimport _Button from '@material-ui/core/Button';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport uploaderState from '../../../../../store/states/uploader';\r\nimport show from '../../../../../containers/show';\r\nimport socket from '../../Uploader/socket';\r\nimport Loader from '../../../../Partials/Loader';\r\n\r\nconst Button = show(_Button);\r\n\r\nconst mapStateToProps = mapDynamicState({\r\n  uploader: 'canvasData imageData inputs labels imagesToUpload',\r\n  auth: 'user'\r\n});\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData setImagesToUpload resetReducer');\r\n\r\nclass Uploader extends React.Component {\r\n\r\n  state = {\r\n    loader: {\r\n      loading: false,\r\n      redirection: '/',\r\n      success: false,\r\n      error: false,\r\n      errorMessage: '',\r\n    },\r\n\r\n    uploading: false\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    socket.Remove.imageUploaded(this.imageUploaded);\r\n    socket.Remove.imageUploadFailed(this.imageUploadFailed);\r\n  }\r\n\r\n  /**\r\n   * update the variable 'canvasData' in the store\r\n   */\r\n  updateCanvasData = () => {\r\n    const { canvasData, setCanvasData } = this.props;\r\n\r\n    setCanvasData(canvasData);\r\n  }\r\n\r\n  /**\r\n   * cast a pixel string into a number\r\n   * @param {String} str\r\n   * @returns {Number}\r\n   */\r\n  pixelToNumber = str => {\r\n    return +str.replace('px', '');\r\n  }\r\n\r\n  /**\r\n   * is called when the user click on the upload button\r\n   */\r\n  uploadHanler = () => {\r\n    this.setState({\r\n      loader: {\r\n        ...this.state.loader,\r\n        loading: true\r\n      }, uploading: true\r\n    });\r\n\r\n    this.setImagesToUpload();\r\n\r\n    this.upload();\r\n  }\r\n\r\n  /**\r\n   * is used to set the existing layers into na object as image to upload\r\n   */\r\n  setImagesToUpload = () => {\r\n    let { imagesToUpload, setImagesToUpload, canvasData } = this.props;\r\n\r\n    const textCanvas = this.createTextCanvas();\r\n    const drawingCanvas = this.getDrawingCanvas();\r\n\r\n    // drawingCanvas may not exist\r\n    if (drawingCanvas) {\r\n      imagesToUpload.draw = drawingCanvas.toDataURL();\r\n    } else {\r\n      // we set in the canvasData that there is no drawing\r\n      canvasData.hasDrawingCanvas = false;\r\n    }\r\n\r\n    // textCanvas may not exist\r\n    if (textCanvas) {\r\n      imagesToUpload.text = textCanvas.toDataURL();\r\n    } else {\r\n      // we set in the canvasData that there is no text\r\n      canvasData.hasTextCanvas = false;\r\n    }\r\n\r\n    this.updateCanvasData();\r\n    setImagesToUpload(imagesToUpload);\r\n  }\r\n\r\n  /**\r\n   * get the drawing canvas if the user has drawn on it\r\n   */\r\n  getDrawingCanvas = () => {\r\n    const { canvasData } = this.props;\r\n    const { width, height } = canvasData.imageBounds;\r\n\r\n    const pixelBuffer = new Uint32Array(\r\n      canvasData.context.getImageData(0, 0, width, height).data.buffer\r\n    );\r\n\r\n\r\n    if (pixelBuffer.some(color => color !== 0)) {\r\n      return canvasData.canvas;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * create a canvas and write the text of all the textboxes the user has created with their positions, color and font size\r\n   */\r\n  createTextCanvas = () => {\r\n    const { canvasData, inputs } = this.props;\r\n\r\n    // if there's no input we don't want to create a canvas\r\n    if (!inputs.length) {\r\n      console.log('no input');\r\n      return;\r\n    }\r\n\r\n    const { width, height } = canvasData.imageBounds;\r\n    const canvas = document.createElement('canvas');\r\n    const context = canvas.getContext('2d');\r\n\r\n    // set the new canvas size to the same as the image\r\n    canvas.width = width - 300;\r\n    canvas.height = height;\r\n\r\n    inputs.forEach(field => {\r\n      const label = field.label;\r\n      const style = label.style;\r\n      // get the input within the current label\r\n      const input = label.getElementsByClassName('canvas-input')[0];\r\n\r\n      // get the font size and increase it\r\n      let fontSize = this.pixelToNumber(input.style.fontSize);\r\n      fontSize = (fontSize + 3) + 'px';\r\n\r\n      // get the label's position\r\n      const left = this.pixelToNumber(style.left);\r\n      // since the label top position is higher than the position\r\n      // of the text inside the input, we increase it to make it lower\r\n      const top = this.pixelToNumber(style.top) + 12;\r\n\r\n      context.fillStyle = style.color;\r\n      context.font = fontSize + ' sans-serif';\r\n      // write the text in the canvas\r\n      context.fillText(input.value, left, top);\r\n    });\r\n\r\n    return canvas;\r\n  }\r\n\r\n  /**\r\n   * upload the images to the server\r\n   */\r\n  upload = () => {\r\n    setTimeout(() => {\r\n      const { imagesToUpload , canvasData, user } = this.props;\r\n      const { hasTextCanvas, hasDrawingCanvas } = canvasData;\r\n      const { draw, text } = imagesToUpload;\r\n\r\n      // 1 image have to be uploaded\r\n      const upload1Image = !draw && !text && !hasTextCanvas && !hasDrawingCanvas;\r\n\r\n      // there's drawing but no text\r\n      const uploadWithDrawing = draw && hasDrawingCanvas && !text && !hasTextCanvas;\r\n      // there's text but no drawing\r\n      const uploadWithText = text && hasTextCanvas && !draw && !hasDrawingCanvas;\r\n\r\n      // 2 images have to be uploaded\r\n      const upload2Images = uploadWithDrawing || uploadWithText;\r\n\r\n      // 3 images have to be uploaded\r\n      const upload3Images = draw && text && hasTextCanvas;\r\n\r\n      console.log(canvasData);\r\n      console.log(imagesToUpload);\r\n      if (upload1Image || upload2Images || upload3Images) {\r\n        console.log('uploading');\r\n        const { imageData } = this.props;\r\n        const images = { ...imageData, ...imagesToUpload, user };\r\n\r\n        socket.Emit.uploadImage(images);\r\n        socket.On.imageUploaded(this.imageUploaded);\r\n        socket.On.imageUploadFailed(this.imageUploadFailed);\r\n      } else {\r\n        console.log('not uploading');\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  imageUploaded = () => this.setState({\r\n    loader: {\r\n      ...this.state.loader,\r\n      success: true\r\n    }\r\n  });\r\n  imageUploadFailed = () => this.setState({\r\n    loader: {\r\n      ...this.state.loader,\r\n      error: true\r\n    }\r\n  });\r\n\r\n  render() {\r\n    const { uploading, loader } = this.state;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Button className=\"color-white\" show={!uploading} onClick={this.uploadHanler}>\r\n          Upload\r\n        </Button>\r\n        <Loader {...loader} successMessage=\"The image has been uploaded\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Uploader);\r\n","import React from 'react';\r\nimport {\r\n  DialogContent,\r\n  DialogContentText as MuiDialogContentText,\r\n} from '@material-ui/core';\r\n\r\nclass DialogContentText extends React.Component {\r\n\r\n  render() {\r\n    const { children, contentProps, textProps } = this.props;\r\n\r\n    return (\r\n      <DialogContent {...contentProps}>\r\n        <MuiDialogContentText {...textProps}>{children}</MuiDialogContentText>\r\n      </DialogContent>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogContentText;\r\n","import React from 'react';\r\nimport {\r\n  Grid,\r\n  Tooltip\r\n} from '@material-ui/core';\r\n\r\nclass DialogTitleCloser extends React.Component {\r\n\r\n  render() {\r\n    const { children, onClose } = this.props;\r\n\r\n    return (\r\n      <Grid container justify=\"space-between\">\r\n        <Grid item>\r\n          <span>{children}</span>\r\n        </Grid>\r\n\r\n        <Grid item>\r\n          <Tooltip title=\"Close\">\r\n            <i className=\"fas fa-times pointer\" onClick={onClose}></i>\r\n          </Tooltip>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogTitleCloser;\r\n","import React from 'react';\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport DialogTitleCloser from './DialogTitleCloser';\r\n\r\nclass DialogTitle extends React.Component {\r\n\r\n  childrenWrapper = () => {\r\n    const { closer } = this.props;\r\n\r\n    if (closer) {\r\n      return DialogTitleCloser;\r\n    }\r\n\r\n    return ({ children }) => children;\r\n  }\r\n\r\n  render() {\r\n    const { children, onClose, closer, ...props } = this.props;\r\n\r\n    const ChildrenWrapper = this.childrenWrapper();\r\n\r\n    return (\r\n      <MuiDialogTitle {...props}>\r\n        <ChildrenWrapper onClose={onClose}>\r\n          {children}\r\n        </ChildrenWrapper>\r\n      </MuiDialogTitle>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogTitle;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\n\r\nclass OverrideReactElement extends React.Component {\r\n\r\n  /**\r\n   * display a single children\r\n   * @param {ReactElement} children\r\n   * @returns {Function | Object}\r\n   */\r\n  getChildrenElement = children => {\r\n    // if the component is a function, type will be a function\r\n    // otherwise it will be an object with its type that would be a function\r\n    if (_.isFunction(children.type)) {\r\n      return children.type;\r\n    } else if (_.isObject(children.type)) {\r\n      return children.type.type;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * create a unique key for a single children\r\n   * @param {ReactElement} children\r\n   * @param {Number} i\r\n   * @returns {String}\r\n   */\r\n  getUniqueKey = (children, i) => {\r\n    return i;\r\n  }\r\n\r\n  /**\r\n   * display a single children\r\n   * @param {ReactElement} children\r\n   * @param {Number} i\r\n   * @returns {ReactElement}\r\n   */\r\n  singleChildren = (children, i) => {\r\n    const { children: _, ...props } = this.props;\r\n\r\n    const key = this.getUniqueKey(children, i);\r\n    const Component = this.getChildrenElement(children);\r\n\r\n    return <Component\r\n      // restore its original props\r\n      {...children.props}\r\n      // add/override the original props\r\n      {...props}\r\n      // set a unique key\r\n      key={key}\r\n    />\r\n  }\r\n\r\n  /**\r\n   * display the children\r\n   * @returns {ReactElement[]}\r\n   */\r\n  overrideChildren = () => {\r\n    const { children, index } = this.props\r\n\r\n    // children can be an array\r\n    // as well as it can be an object\r\n    if (_.isArray(children)) {\r\n      // the elements can be ReactElements as well\r\n      // as they can be a simple string (in case of spaces)\r\n      const childrens = children.filter(_.isObject);\r\n\r\n      // if the user wants to override only a single element out of an array\r\n      if (_.isSafeInteger(index)) {\r\n        // override the current children only if the index match with the iteration\r\n        return childrens.map((c, i) => i  === index ? this.singleChildren(c, i) : c);\r\n      }\r\n\r\n      return childrens.map(this.singleChildren);\r\n    } else if (_.isObject(children)) {\r\n      return this.singleChildren(children, 0);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    return this.overrideChildren();\r\n  }\r\n}\r\n\r\nexport default OverrideReactElement;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport {\r\n  Dialog as MuiDialog,\r\n  DialogContent,\r\n  DialogContentText as MuiDialogContentText,\r\n} from '@material-ui/core';\r\n\r\nimport DialogContentText from './DialogContentText';\r\nimport DialogTitle from './DialogTitle';\r\nimport OverrideReactElement from '../OverrideReactElement';\r\n\r\nclass Dialog extends React.Component {\r\n\r\n  // Material-ui's `DialogContent` component\r\n  static Content = DialogContent;\r\n  // Material-ui's `DialogContentText` component\r\n  static Text = MuiDialogContentText;\r\n  // custom component wrapping Material-ui's `DialogContentText` within `DialogContent`\r\n  static ContentText = DialogContentText;\r\n  // custom component for the Title component\r\n  static Title = DialogTitle;\r\n\r\n  /**\r\n   * override the children if the first children is DialogTitle\r\n   * and has the props `closer` set to `true`\r\n   * @returns {ReactElement}\r\n   */\r\n  getChildren = () => {\r\n    const { children, onClose } = this.props;\r\n\r\n    if (!_.isArray(children) || !_.isObject(children[0])) {\r\n      return children;\r\n    }\r\n\r\n    if (children[0].type.name === 'DialogTitle' && children[0].props.closer === true) {\r\n      return (\r\n        <OverrideReactElement onClose={onClose} index={0}>{children}</OverrideReactElement>\r\n      );\r\n    }\r\n\r\n    return children;\r\n  }\r\n\r\n  render() {\r\n    const { children, ...props } = this.props;\r\n\r\n    return (\r\n      <MuiDialog {...props}>{this.getChildren()}</MuiDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dialog;\r\n","import React from 'react';\r\nimport { withMobileDialog } from '@material-ui/core';\r\n\r\nimport Dialog from '../../../../../Partials/Dialog';\r\nimport './CanvasHelper.scss';\r\n\r\nconst CanvasHelper = ({ onClose, open }) => (\r\n  <Dialog\r\n    aria-labelledby=\"simple-dialog-title\"\r\n    open={open}\r\n    onClose={onClose}\r\n    PaperProps={{\r\n      className: 'bg-color-grey-darken-3 color-grey-lighten-4'\r\n    }}\r\n  >\r\n    <Dialog.Title closer>Tutorial</Dialog.Title>\r\n    <Dialog.ContentText textProps={{ component: 'div' }}>\r\n      <div className=\"text-content color-grey-lighten-1\">\r\n        <span className=\"subtitle\">You can:</span>\r\n        <ul>\r\n          <li>\r\n            Change the color/alpha of the brush/text\r\n          </li>\r\n          <li>\r\n            Create a textbox\r\n          </li>\r\n          <li>\r\n            Move the textboxes\r\n          </li>\r\n          <li>\r\n            To remove a textbox you must drop it out of the image, re-drag it and quickly re-drop it\r\n          </li>\r\n          <li>\r\n            Change the text size\r\n          </li>\r\n          <li>\r\n            Erase what you drew\r\n          </li>\r\n          <li>\r\n            Change the eraser size\r\n          </li>\r\n          <li>\r\n            Remove everything you drew\r\n          </li>\r\n          <li>\r\n            Display/hide the textboxes and/or the drawing\r\n          </li>\r\n        </ul>\r\n        <p>\r\n          The textboxes are created on the top left of the image,\r\n        </p>\r\n      </div>\r\n    </Dialog.ContentText>\r\n  </Dialog>\r\n);\r\n\r\nexport default withMobileDialog()(CanvasHelper);\r\n","import React from 'react';\r\n\r\nimport CanvasHelper from './CanvasHelper';\r\n\r\nclass HelperPanel extends React.Component {\r\n\r\n  state = {\r\n    open: false\r\n  };\r\n\r\n  handleOpen = () => this.setState({ open: true });\r\n  handleClose = () => this.setState({ open: false });\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <CanvasHelper onClose={this.handleClose} open={open} />\r\n\r\n        <span className=\"pointer\" onClick={this.handleOpen}>Need help to draw an overlay?</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default HelperPanel;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport uploaderState from '../../../../../../store/states/uploader';\r\nimport EditableForm from '../../../Uploader/Forms/EditableFields';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: imageData');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setImageData');\r\n\r\nclass Form extends React.Component {\r\n\r\n  state = {\r\n    title: '',\r\n    artistLink: '',\r\n    artistName: '',\r\n    tags: '',\r\n    rate: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateState();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { imageData } = this.props;\r\n\r\n    if (!_.isEqual(imageData, prevProps.imageData)) {\r\n      this.updateState();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * update the state with the data stored in `imageData`\r\n   */\r\n  updateState = () => {\r\n    const { imageData } = this.props;\r\n\r\n    const newState = {\r\n      ...imageData,\r\n      artistName: '',\r\n      artistLink: '',\r\n    };\r\n\r\n    if (_.isObject(imageData)) {\r\n      newState.artistName = imageData.artist.name;\r\n      newState.artistLink = imageData.artist.link;\r\n    }\r\n\r\n    this.setState(newState);\r\n  }\r\n\r\n  /**\r\n   * is called when the form has been submited and validated\r\n   */\r\n  submit = e => {\r\n    const { setImageData, onSubmit } = this.props;\r\n\r\n    const formData = this.transformFormData(this.state);\r\n\r\n    setImageData(formData);\r\n    onSubmit(e)\r\n  }\r\n\r\n  /**\r\n   * is used to transform the data from the form before we upload them\r\n   * @returns {Promise<Object>} data of the form ready to be send to the server\r\n   */\r\n  transformFormData = formData => {\r\n    const newFormData = { ...formData };\r\n\r\n    if (newFormData.artistLink) {\r\n      newFormData.artistLink = newFormData.artistLink.trim();\r\n\r\n      if (!/^https?:\\/\\//.test(newFormData.artistLink)) {\r\n        newFormData.artistLink = 'http://' + newFormData.artistLink;\r\n      }\r\n    }\r\n\r\n    newFormData.artist = {\r\n      name: newFormData.artistName,\r\n      link: newFormData.artistLink\r\n    };\r\n\r\n    // those 2 values or now useless so we delete them\r\n    delete newFormData.artistName;\r\n    delete newFormData.artistLink;\r\n\r\n    return newFormData;\r\n  }\r\n\r\n  /**\r\n   * give the form the possibility to edit the state\r\n   */\r\n  _setState = obj => this.setState(obj);\r\n\r\n  render() {\r\n    return (\r\n      <EditableForm formData={this.state} changeFormData={this._setState} onSubmit={this.submit} />\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);\r\n","import React from 'react';\r\nimport { withMobileDialog } from '@material-ui/core';\r\n\r\nimport Form from './Form';\r\nimport Dialog from '../../../../../Partials/Dialog';\r\nimport './FormDialog.scss';\r\n\r\nconst FormDialog = ({ open, onClose, onSubmit }) => (\r\n  <Dialog\r\n    className=\"form-dialog\"\r\n    classes={{ paper: 'paper' }}\r\n    aria-labelledby=\"form of edition of the data associated to the image\"\r\n    open={open}\r\n    onClose={onClose}\r\n    PaperProps={{\r\n      className: 'bg-color-grey-darken-3 color-grey-lighten-4'\r\n    }}\r\n  >\r\n    <Dialog.Title closer>Change infos</Dialog.Title>\r\n\r\n    <Dialog.Content>\r\n      <Form onSubmit={onSubmit} />\r\n    </Dialog.Content>\r\n  </Dialog>\r\n);\r\n\r\nexport default withMobileDialog()(FormDialog);\r\n","import React from 'react';\r\n\r\nimport FormDialog from './FormDialog';\r\nimport { Button } from '@material-ui/core';\r\n\r\nclass DataEditionDialog extends React.Component {\r\n\r\n  state = {\r\n    open: false,\r\n  }\r\n\r\n  /**\r\n   * is called when the form is submited\r\n   */\r\n  submit = () => {\r\n    this.handleClose();\r\n  }\r\n\r\n  handleClick = () => this.setState({ open: true });\r\n  handleClose = () => this.setState({ open: false });\r\n\r\n  render() {\r\n    const { open } = this.state;\r\n\r\n    return (\r\n      <span className=\"panel-row\">\r\n        <FormDialog open={open} onClose={this.handleClose} onSubmit={this.submit} />\r\n\r\n        <Button className=\"color-white\" onClick={this.handleClick}>Change infos</Button>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataEditionDialog;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport uploaderState from '../../../../../store/states/uploader';\r\nimport ColorPanel from './ColorPanel';\r\nimport SizesPanel from './SizesPanel';\r\nimport DisplayPanel from './DisplayPanel';\r\nimport InputCreator from './InputCreator';\r\nimport Uploader from './Uploader';\r\nimport HelperPanel from './HelperPanel';\r\nimport DataEditionDialog from './DataEditionDialog';\r\n\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setCanvasData');\r\n\r\nconst Panel = () => (\r\n  <div className=\"ColorPanel colors color-picker-panel color-white text-center\">\r\n    <ColorPanel />\r\n    <SizesPanel />\r\n    <DisplayPanel />\r\n    <InputCreator />\r\n    <DataEditionDialog />\r\n    <Uploader />\r\n    <HelperPanel />\r\n  </div>\r\n);\r\n\r\nexport default connect(null, mapDispatchToProps)(Panel);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\nimport uploaderState from '../../../../store/states/uploader';\r\n\r\nimport Canvas from './Canvas';\r\nimport Panel from './Panel';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: imageData canvasSize canvasData imagesToUpload inputs');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'setImageData setCanvasData resetReducer');\r\n\r\nclass Overlay extends React.Component {\r\n\r\n  canvas = null;\r\n  img = React.createRef();\r\n\r\n  state = {\r\n    imageBounds: {},\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.canvas = document.getElementById('canvas');\r\n\r\n    this.setImageSize();\r\n\r\n    document.body.addEventListener('click', this.handleModalClose);\r\n  }\r\n\r\n  /**\r\n   * reset the reducer once the user is done with the overlay\r\n   */\r\n  componentWillUnmount() {\r\n    const { resetReducer } = this.props;\r\n    resetReducer();\r\n  }\r\n\r\n  setImageSize = () => {\r\n    const { imageData, setImageData, canvasData, setCanvasData } = this.props;\r\n\r\n    this.img.addEventListener('load', () => {\r\n      const imageBounds = this.img.getBoundingClientRect();\r\n      this.setState({ imageBounds });\r\n\r\n      setImageData({\r\n        ...imageData,\r\n        width: imageBounds.width,\r\n        height: imageBounds.height,\r\n      });\r\n\r\n      setCanvasData({\r\n        ...canvasData,\r\n        context: this.canvas.getContext('2d'),\r\n        imageBounds: imageBounds,\r\n        canvas: this.canvas,\r\n        img: this.img,\r\n      });\r\n\r\n      this.setCanvasPosition(imageBounds);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set the position of the canvas\r\n   * @param {Object} position\r\n   * @param {Number} position.top\r\n   * @param {Number} position.left\r\n   */\r\n  setCanvasPosition = position => {\r\n    this.canvas.style.top = position.top + 'px';\r\n    this.canvas.style.left = position.left + 'px';\r\n  }\r\n\r\n  render() {\r\n    const { imageData } = this.props;\r\n\r\n    return (\r\n      <div id=\"overlay-container\">\r\n        <img className=\"draw-on\" src={imageData.imageBase64} ref={e => this.img = e} alt=\"\" />\r\n        <Canvas />\r\n\r\n        <Panel modalOpen={this.modalOpen} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Overlay);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport Uploader from './Uploader';\r\nimport Overlay from './Overlay';\r\nimport uploaderState from '../../../store/states/uploader';\r\n\r\nconst mapStateToProps = mapDynamicState('uploader: formView');\r\nconst mapDispatchToProps = mapDynamicDispatch(uploaderState.actions, 'resetReducer');\r\n\r\nclass Upload extends React.Component {\r\n\r\n  components = {\r\n    Uploader,\r\n    Overlay,\r\n  };\r\n\r\n  componentDidMount() {\r\n    // reset the reducer before doing anything\r\n    this.props.resetReducer();\r\n  }\r\n\r\n  render() {\r\n    const Component = this.components[this.props.formView];\r\n\r\n    return <Component />\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Upload);\r\n","import socket from '../../../socket/config';\r\n\r\nexport class On {\r\n  static signupSuccess = callback => {\r\n    return socket.on('signupSuccess', callback);\r\n  }\r\n\r\n  static signupFailed = callback => {\r\n    return socket.on('signupFailed', callback);\r\n  }\r\n}\r\n\r\nexport class Emit {\r\n  static signup = data => {\r\n    return socket.emit('signup', data);\r\n  }\r\n}\r\n\r\nexport class Remove {\r\n  static signupSuccess = callback => {\r\n    return socket.removeListener('signupSuccess', callback);\r\n  }\r\n\r\n  static signupFailed = callback => {\r\n    return socket.removeListener('signupFailed', callback);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Form from 'dynamic-form';\r\n\r\nimport './Signup.scss';\r\n\r\nimport Input from '../../Partials/Input';\r\nimport Loader from '../../Partials/Loader';\r\nimport Section from '../../Partials/Section';\r\nimport Auth from '../../../services/Auth';\r\nimport * as socket from './socket';\r\n\r\nclass Signup extends React.Component {\r\n\r\n  state = {\r\n    loader: {\r\n      loading: false,\r\n      success: false,\r\n      error: false,\r\n      errorMessage: '',\r\n      redirection: '/',\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    socket.Remove.signupSuccess(data => this.signupSuccess(data.user));\r\n    socket.Remove.signupFailed(this.signupFailed);\r\n  }\r\n\r\n  /**\r\n   * used to change the data in the loader object of the state\r\n   * @param {Object} data\r\n   */\r\n  changeLoader = data => {\r\n    this.setState({\r\n      loader: {\r\n        ...this.state.loader,\r\n        ...data\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * is called when a submit event get triggered with all the fields in the form valid\r\n   * @param {Object} formData the data of all the fields in the form\r\n   */\r\n  submit = formData => {\r\n    this.changeLoader({ loading: true });\r\n\r\n    socket.Emit.signup(formData);\r\n    socket.On.signupSuccess(data => this.signupSuccess(data.user));\r\n    socket.On.signupFailed(this.signupFailed);\r\n  }\r\n\r\n  /**\r\n   * called if the server could sign up the user\r\n   * @param {Object} userData all the data of the user from the DB\r\n   */\r\n  signupSuccess = userData => {\r\n    this.changeLoader({ success: true });\r\n    Auth.signup(userData);\r\n  }\r\n\r\n  /**\r\n   * called if the server couldn't sign up the user\r\n   * @param {Object} data from the server\r\n   * @param {String} data.error error message\r\n   */\r\n  signupFailed = data => {\r\n    this.changeLoader({ error: true, errorMessage: data.error });\r\n  }\r\n\r\n  render() {\r\n    const { loader } = this.state;\r\n\r\n    return (\r\n      <Grid container className=\"text-center Signup\" justify=\"center\">\r\n        <Section md={8}>\r\n          <Grid container className=\"text-center Signup\" justify=\"center\">\r\n            <Form\r\n              onSubmit={this.submit}\r\n              field={Input.Override}\r\n              title=\"Signup\"\r\n              fields={['username', 'password', 'confirmPassword']}\r\n              submitText=\"Signup\"\r\n              errorMessage=\"\"\r\n            >\r\n              <Grid container className=\"mt-2\" justify=\"center\">\r\n                <Loader {...loader} successMessage=\"Your account has been created\" />\r\n              </Grid>\r\n            </Form>\r\n          </Grid>\r\n        </Section>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Signup;\r\n","import socket from '../../../socket/config';\r\n\r\nexport class On {\r\n  /**\r\n   * called if the user can log in\r\n   * @param {Function} callback\r\n   */\r\n  static loginSuccess = callback => {\r\n    return socket.on('loginSuccess', callback);\r\n  }\r\n\r\n  /**\r\n   * called if the user can't log in\r\n   * @param {Function} callback\r\n   */\r\n  static loginFailed = callback => {\r\n    return socket.on('loginFailed', callback);\r\n  }\r\n}\r\n\r\nexport class Emit {\r\n  /**\r\n   * called when the user submit the form with all the fields valid\r\n   * @param {Object} data\r\n   */\r\n  static login = data => {\r\n    return socket.emit('login', data);\r\n  }\r\n}\r\n\r\nexport class Remove {\r\n  /**\r\n   * called to remove the event listener\r\n   * @param {Function} callback\r\n   */\r\n  static loginSuccess = callback => {\r\n    return socket.removeListener('loginSuccess', callback);\r\n  }\r\n\r\n  /**\r\n   * called to remove the event listener\r\n   * @param {Function} callback\r\n   */\r\n  static loginFailed = callback => {\r\n    return socket.removeListener('loginFailed', callback);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, Grid, Tooltip, IconButton } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nimport './Alert.scss';\r\n\r\nconst mapStateToProps = mapDynamicState('auth: deniedPage');\r\n\r\nclass Alert extends React.Component {\r\n\r\n  state = {\r\n    // keep the deniedPage the user tried to access, in the state\r\n    // if we don't, the time for the dialog to be fully closed, the text change\r\n    // due to the data changed in the store\r\n    deniedPage: this.props.deniedPage\r\n  }\r\n\r\n  supplementText = () => {\r\n    const { deniedPage } = this.state;\r\n\r\n    // if the required role to access the page is 'ROLE_USER', we tell the client\r\n    // that they need to be logged to access the page\r\n    if (deniedPage.require === 'ROLE_USER') {\r\n      return 'You must be logged to access this page.';\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { deniedPage } = this.state;\r\n    const { open, onClose } = this.props;\r\n\r\n    return (\r\n      <Dialog\r\n        className=\"Alert\"\r\n        open={open}\r\n        onClose={onClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle className=\"py-2\" id=\"alert-dialog-title\">\r\n          <Grid container justify=\"space-between\" alignItems=\"center\">\r\n            <span>Access denied!</span>\r\n            <Tooltip title=\"Close\" aria-label=\"close\">\r\n              <IconButton onClick={onClose} className=\"pointer bg-color-transparent-and-hover\">\r\n                <i className=\"fas fa-times square-icon\"></i>\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Grid>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            You do not have access to <span className=\"bb-1\">{deniedPage.path}</span>\r\n            <br />\r\n            {this.supplementText()}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Alert);\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Form from 'dynamic-form';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport authState from '../../../store/states/auth';\r\nimport Input from '../../Partials/Input';\r\nimport Loader from '../../Partials/Loader';\r\nimport Auth from '../../../services/Auth';\r\nimport Section from '../../Partials/Section';\r\nimport * as socket from './socket';\r\nimport Alert from './Alert';\r\n\r\nconst mapStateToProps = mapDynamicState('auth: deniedPage');\r\nconst mapDispatchToProps = mapDynamicDispatch(authState.actions, 'setDeniedPage');\r\n\r\nclass Login extends React.Component {\r\n\r\n  state = {\r\n    deniedAlert: false,\r\n\r\n    loader: {\r\n      loading: false,\r\n      success: false,\r\n      error: false,\r\n      errorMessage: '',\r\n      redirection: '/',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { deniedPage } = this.props;\r\n\r\n    // if true this means the user got redirected from a page they don't have access to\r\n    // so we want deniedAlert to be true\r\n    if (deniedPage.require) {\r\n      this.setState({ deniedAlert: true });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.handleClose();\r\n    socket.Remove.loginSuccess(data => this.loginSuccess(data.user));\r\n    socket.Remove.loginFailed(this.loginFailed);\r\n  }\r\n\r\n\r\n  /**\r\n   * used to change the data in the loader object of the state\r\n   * @param {Object} data\r\n   */\r\n  changeLoader = data => {\r\n    this.setState({\r\n      loader: {\r\n        ...this.state.loader,\r\n        ...data\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * is called when a submit event get triggered with all the fields in the form valid\r\n   * @param {Object} formData the data of all the fields in the form\r\n   */\r\n  submit = formData => {\r\n    this.changeLoader({ loading: true });\r\n\r\n    socket.Emit.login(formData);\r\n    socket.On.loginSuccess(data => this.loginSuccess(data.user));\r\n    socket.On.loginFailed(this.loginFailed);\r\n  }\r\n\r\n  /**\r\n   * called if the user can log in\r\n   * @param {Object} userData all the data of the user from the DB\r\n   */\r\n  loginSuccess = userData => {\r\n    this.changeLoader({ success: true });\r\n    Auth.login(userData);\r\n  }\r\n\r\n  /**\r\n   * called if the user can't log in\r\n   * @param {Object} data from the server\r\n   * @param {String} data.error error message\r\n   */\r\n  loginFailed = data => {\r\n    this.changeLoader({ error: true, errorMessage: data.error });\r\n  }\r\n\r\n  /**\r\n   * called when the user close the dialog\r\n   */\r\n  handleClose = () => {\r\n    const { setDeniedPage } = this.props;\r\n\r\n    this.setState({ deniedAlert: false });\r\n    setDeniedPage({});\r\n  }\r\n\r\n  render() {\r\n    const { loader, deniedAlert } = this.state;\r\n\r\n    return (\r\n      <Grid container className=\"text-center Login\" justify=\"center\">\r\n        <Section md={8}>\r\n          <Grid container className=\"text-center Login\" justify=\"center\">\r\n            <Alert open={deniedAlert} onClose={this.handleClose} />\r\n            <Form\r\n              onSubmit={this.submit}\r\n              field={Input.Override}\r\n              title=\"Login\"\r\n              fields={['username', 'password']}\r\n              submitText=\"Login\"\r\n              errorMessage=\"\"\r\n            >\r\n              <Grid container direction=\"column\" className=\"mt-2\" justify=\"center\">\r\n                <Link className=\"color-blue-lighten-1 mb-2\" to=\"/signup\">You do not have an account yet?</Link>\r\n                <Loader {...loader} timeout={0} />\r\n              </Grid>\r\n            </Form>\r\n          </Grid>\r\n        </Section>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React from 'react';\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nimport './Pagination.scss';\r\n\r\nclass Pagination extends React.Component {\r\n\r\n  render() {\r\n    let { currentPage } = this.props;\r\n    currentPage = (+currentPage) - 1;\r\n\r\n    return <ReactPaginate forcePage={currentPage} {...this.props} />;\r\n  }\r\n}\r\n\r\nPagination.defaultProps = {\r\n  currentPage: 1,\r\n  previousLabel: (\r\n    <React.Fragment>\r\n      <i className=\"fas fa-angle-left translate-y-11\"></i>\r\n      <span className=\"ml-2\">previous</span>\r\n    </React.Fragment>\r\n  ),\r\n  nextLabel: (\r\n    <React.Fragment>\r\n      <span className=\"mr-2\">next</span>\r\n      <i className=\"fas fa-angle-right translate-y-11\"></i>\r\n    </React.Fragment>\r\n  ),\r\n  breakLabel: '...',\r\n  breakClassName: 'break',\r\n  marginPagesDisplayed: 1,\r\n  pageRangeDisplayed: 5,\r\n  containerClassName: 'pagination',\r\n  subContainerClassName: 'pages pagination',\r\n  activeClassName: 'active'\r\n};\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage showOverlay');\r\nclass OverlayedImage extends React.Component {\r\n\r\n  /**\r\n   * render the overlays if necessary\r\n   * @param {Object} image\r\n   * @param {String} image.draw link to the drawing overlay\r\n   * @param {String} image.text link to the text overlay\r\n   * @returns {ReactElement[]}\r\n   */\r\n  renderOverlays = image => {\r\n    const { showOverlay } = this.props;\r\n    let overlays = [];\r\n\r\n    if(image.canvas) {\r\n      const { canvas } = image;\r\n\r\n      for (const key in canvas) {\r\n        if (!showOverlay.includes(key) || !canvas[key]) {\r\n          continue;\r\n        }\r\n\r\n        const imageElement = (\r\n          <img key={canvas[key]} className={'image overlay ' + key} src={canvas[key]} alt=\"\" />\r\n        );\r\n        overlays.push(imageElement);\r\n      }\r\n    }\r\n\r\n    return overlays\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  loadHandler = e => {\r\n    const { onLoad } = this.props;\r\n\r\n    if (_.isFunction(onLoad)) {\r\n      onLoad(e);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { image, src } = this.props;\r\n\r\n    if (!image) {\r\n      return null;\r\n    }\r\n\r\n    console.log(this.renderOverlays(image))\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <img\r\n          onLoad={this.loadHandler}\r\n          src={src}\r\n          className={`image mainImage ${image.rate}`}\r\n          alt=\"\"\r\n        />\r\n        {this.renderOverlays(image)}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OverlayedImage);\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport classNames from 'classnames';\r\n\r\nimport OverrideReactElement from '../OverrideReactElement';\r\n\r\nclass ImageContainer extends React.Component {\r\n\r\n  loadHandler = e => {\r\n    const { onLoad } = this.props;\r\n\r\n    console.log('loadHandler')\r\n    const self = e.target;\r\n\r\n    self.offsetParent.style.height = self.naturalHeight + 'px';\r\n    self.offsetParent.style.width = self.naturalWidth + 'px';\r\n\r\n    if (_.isFunction(onLoad)) {\r\n      onLoad(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get the subcontainer if it is defined in the props, otherwise return `React.Fragment`\r\n   * @returns {ReactElement}\r\n   */\r\n  getSubContainer = () => {\r\n    const { subContainer } = this.props;\r\n\r\n    if (_.isFunction(subContainer)) {\r\n      return subContainer;\r\n    }\r\n\r\n    return React.Fragment;\r\n  }\r\n\r\n  render() {\r\n    const { children, className } = this.props;\r\n\r\n    const SubContainer = this.getSubContainer();\r\n\r\n    return (\r\n      <div className={classNames('image-container', className)}>\r\n        <SubContainer>\r\n          <OverrideReactElement onLoad={this.loadHandler}>\r\n            {children}\r\n          </OverrideReactElement>\r\n        </SubContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageContainer;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Link } from 'react-router-dom';\r\nimport { Grid, Hidden } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport galleryState from '../../../../store/states/gallery';\r\nimport Pagination from '../../Pagination';\r\nimport OverlayedImage from '../../OverlayedImage';\r\nimport ImageContainer from '../../ImageContainer';\r\nimport Section from '../../Section';\r\nimport './Images.scss';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: images showOverlay currentPage currentUser');\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setImages setCurrentPage setSearchOptionsPanel');\r\n\r\nclass Displayer extends React.Component {\r\n\r\n  state = {\r\n    pageCount: 150,\r\n  }\r\n\r\n  /**\r\n   * called when the client change of page\r\n   */\r\n  handlePageChange = e => {\r\n    const { history, currentUser, setCurrentPage, setImages } = this.props;\r\n    // remove all the images\r\n    setImages([]);\r\n    // update the URL\r\n    history.push(`/gallery/${currentUser}/${e.selected + 1}`);\r\n    // update the current page\r\n    setCurrentPage(e.selected + 1);\r\n  }\r\n\r\n  /**\r\n   * is called when the client click on div\r\n   * set `searchOptionsPanel` to true\r\n   */\r\n  openPanel = () => {\r\n    const { setSearchOptionsPanel } = this.props;\r\n\r\n    setSearchOptionsPanel(true);\r\n  }\r\n\r\n  render() {\r\n    const { pageCount } = this.state;\r\n    let { images, currentPage, size } = this.props;\r\n\r\n    if (!_.isArray(images)) {\r\n      images = [];\r\n    }\r\n\r\n    return (\r\n      <Grid container justify=\"center\" className=\"Images\">\r\n        <Section>\r\n          <Grid container alignItems=\"center\" direction=\"column\">\r\n            <Hidden mdUp>\r\n              <Grid container item justify=\"flex-end\">\r\n                <Grid item className=\"px-5 mt-4\">\r\n                  <div onClick={this.openPanel} className=\"pointer\">\r\n                    <span className=\"mr-2\">Search options</span>\r\n                    <i className=\"fas fa-caret-right lg\"></i>\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n            </Hidden>\r\n            <Grid item container direction=\"row\" wrap=\"wrap\" justify=\"center\" className=\"px-2 mt-4\">\r\n              {images.map(image => (\r\n                <ImageContainer\r\n                  className=\"z-elevation-3 z-elevation-7-hover shadow-trans\"\r\n                  subContainer={({ children }) => <Link to={'/image/' + image._id}>{children}</Link>}\r\n                  key={image._id}\r\n                >\r\n                  <OverlayedImage src={image.thumb} image={image} />\r\n                </ImageContainer>\r\n              ))}\r\n            </Grid>\r\n            <Grid item>\r\n              <Pagination\r\n                onPageChange={this.handlePageChange}\r\n                currentPage={currentPage}\r\n                pageCount={pageCount}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Section>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Displayer);\r\n","import socket from '../../../../socket/config';\r\n\r\nexport class On {\r\n  static sendImage = callback => {\r\n    return socket.on('sendImage', callback);\r\n  }\r\n\r\n  static getImageFailed = callback => {\r\n    return socket.on('getImageFailed', callback);\r\n  }\r\n\r\n  static sendImagesCount = callback => {\r\n    return socket.on('sendImagesCount', callback);\r\n  }\r\n\r\n  static getImagesCountFailed = callback => {\r\n    return socket.on('getImagesCountFailed', callback);\r\n  }\r\n}\r\n\r\nexport class Emit {\r\n  static getImagesPage = data => {\r\n    return socket.emit('getImagesPage', data);\r\n  }\r\n\r\n  static getImagesCount = data => {\r\n    return socket.emit('getImagesCount', data);\r\n  }\r\n}\r\n\r\nexport class Remove {\r\n  static sendImage = callback => {\r\n    return socket.removeListener('sendImage', callback);\r\n  }\r\n\r\n  static getImageFailed = callback => {\r\n    return socket.removeListener('getImageFailed', callback);\r\n  }\r\n\r\n  static sendImagesCount = callback => {\r\n    return socket.removeListener('sendImagesCount', callback);\r\n  }\r\n\r\n  static getImagesCountFailed = callback => {\r\n    return socket.removeListener('getImagesCountFailed', callback);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport galleryState from '../../../../store/states/gallery';\r\nimport * as socket from './socket';\r\n\r\nconst mapStateToProps = mapDynamicState({\r\n  gallery: 'searchOptions currentPage currentUser',\r\n  auth: 'user'\r\n});\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setImages');\r\n\r\nclass Requester extends React.Component {\r\n\r\n  state = {\r\n    pageCount: 150,\r\n  }\r\n\r\n  componentDidMount() {\r\n    socket.On.sendImage(data => this.setImages(data.images));\r\n    this.request();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { user, searchOptions, currentPage, currentUser } = this.props;\r\n\r\n    // we want to do a request only if\r\n    // the user object has changed\r\n    let canRequest = !_.isEqual(prevProps.user, user);\r\n    // or if the searchOptions has changed\r\n    canRequest = canRequest || !_.isEqual(prevProps.searchOptions, searchOptions);\r\n    // or if the page has changed\r\n    canRequest = canRequest || currentPage !== prevProps.currentPage;\r\n    // or if the currentUser has changed\r\n    canRequest = canRequest || currentUser !== prevProps.currentUser;\r\n\r\n    if (canRequest) {\r\n      this.request();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    socket.Remove.sendImage(data => this.setImages(data.images));\r\n  }\r\n\r\n\r\n  request = () => {\r\n    let { user, currentPage, searchOptions, currentUser } = this.props;\r\n\r\n    if (typeof searchOptions.search === 'string') {\r\n      // avoid spaces\r\n      searchOptions.search = searchOptions.search.trim().split(' ').filter(str => str);\r\n    }\r\n\r\n    // data used to make the query\r\n    const emitData = {\r\n      tags: [...searchOptions.search],\r\n      page: currentPage,\r\n      searchOptions: {\r\n        ...searchOptions,\r\n        match: {\r\n          user: {\r\n            slug: currentUser\r\n          }\r\n        },\r\n      },\r\n      user: user,\r\n    }\r\n\r\n    socket.Emit.getImagesPage(emitData);\r\n  }\r\n\r\n  /**\r\n   * @param {Object[]} images\r\n   */\r\n  setImages = images => {\r\n    const { setImages } = this.props;\r\n    setImages(images);\r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Requester);\r\n","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport Checkbox from '../../Checkbox';\r\nimport galleryState from '../../../../store/states/gallery';\r\n\r\nconst mapStateToProps = mapDynamicState({\r\n  gallery: 'showOverlay',\r\n  auth: 'user'\r\n});\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setShowOverlay');\r\n\r\nclass DisplayRow extends React.Component {\r\n\r\n  /**\r\n   * handler when the checkboxes trigger the event `onChange`\r\n   * @param {String[]} value\r\n   */\r\n  handleChange = value => {\r\n    const { setShowOverlay } = this.props;\r\n    setShowOverlay(value);\r\n  }\r\n\r\n  render() {\r\n    const { showOverlay } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Typography variant=\"h6\" className=\"color-blue-darken-3\">Display overlays</Typography>\r\n\r\n        <Checkbox.Multiple\r\n            name=\"display\"\r\n            value={showOverlay}\r\n            data={[\r\n              { label: 'Drawing', name: 'draw' },\r\n              { label: 'Text', name: 'text' }\r\n            ]}\r\n            onChange={this.handleChange}\r\n          />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DisplayRow);\r\n","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nclass Field extends React.Component {\r\n\r\n  render() {\r\n    let { name, type, label, field, className = '', ...rest } = this.props;\r\n    let Field = field || TextField;\r\n\r\n    return (\r\n      <Field\r\n        {...rest}\r\n        name={name}\r\n        label={label}\r\n        id={name}\r\n        className={name + ' ' + className}\r\n        type={type || 'text'}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Field;\r\n","import React from 'react';\r\nimport { Typography, Button } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport Field from '../../Field';\r\nimport galleryState from '../../../../store/states/gallery';\r\n\r\nconst mapStateToProps = mapDynamicState({\r\n  gallery: 'showOverlay images filter currentPage',\r\n  auth: 'user'\r\n});\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setFilter setImages setSearchOptions');\r\n\r\nclass SearchRow extends React.Component {\r\n\r\n  /**\r\n   * is called when the form is submit\r\n   */\r\n  submit = e => {\r\n    const { search, searchOptions, setSearchOptions } = this.props;\r\n    e.preventDefault();\r\n\r\n    setSearchOptions({ ...searchOptions, search });\r\n  }\r\n\r\n  /**\r\n   * set the images into the store\r\n   * @param {Object[]} images\r\n   */\r\n  setImages = images => {\r\n    const { setImages } = this.props;\r\n    setImages(images);\r\n  }\r\n\r\n  /**\r\n   * is called when the input trigger the event `onChange`\r\n   */\r\n  handleChange = e => {\r\n    const { value } = e.target;\r\n\r\n    this.props.setState({ search: value });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Typography variant=\"h6\" className=\"color-blue-darken-3\">Search</Typography>\r\n\r\n        <form onSubmit={this.submit} className=\"d-flex\">\r\n          <Field\r\n            className=\"field\"\r\n            label=\"Search\"\r\n            name=\"search\"\r\n            type=\"text\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <Button className=\"color-white bold-nested\">Search</Button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchRow);\r\n","import update from 'immutability-helper';\r\nimport _ from 'lodash';\r\n\r\nexport const functionUpdate = object => prevState => update(prevState, object);\r\nexport const execIfFunc = (func, ...params) => _.isFunction(func) && func(...params);\r\n","import React from 'react';\r\nimport { Typography, NativeSelect } from '@material-ui/core';\r\n\r\nimport { functionUpdate } from '../../../../utils';\r\n\r\nclass SortRow extends React.Component {\r\n\r\n  /**\r\n   * is called when a select trigger the event `onChange`\r\n   * @param {String} prop the name of the property to change\r\n   * @returns {Function}\r\n   */\r\n  handleChange = prop => e => {\r\n    this.props.setState(functionUpdate({\r\n      searchOptions: { $merge: { sort: { [prop]: e.target.value } } }\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const { searchOptions } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Typography variant=\"h6\" className=\"color-blue-darken-3\">Sorting</Typography>\r\n\r\n        <NativeSelect\r\n          className=\"field\"\r\n          value={searchOptions.sort.criteria}\r\n          onChange={this.handleChange('criteria')}\r\n        >\r\n          <option className=\"color-black\" value=\"date\">date</option>\r\n          {/*<option className=\"color-black\" value=\"relevancy\">relevancy</option>*/}\r\n        </NativeSelect>\r\n\r\n        <span>in the</span>\r\n\r\n        <NativeSelect\r\n          className=\"field ml-2\"\r\n          value={searchOptions.sort.order}\r\n          onChange={this.handleChange('order')}\r\n        >\r\n          <option className=\"color-black\" value=\"ASC\">ascending</option>\r\n          <option className=\"color-black\" value=\"DESC\">descending</option>\r\n        </NativeSelect>\r\n\r\n        <span>order</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SortRow;\r\n","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport Checkbox from '../../Checkbox';\r\n\r\nclass HaveOverlaysRow extends React.Component {\r\n\r\n  /**\r\n   * called when the checkboxes trigger the event `onChange`\r\n   * @param {String[]} value\r\n   */\r\n  handleChange = value => {\r\n    this.props.setState(prevState => {\r\n      const newSearchOptions = { ...prevState.searchOptions };\r\n      const includedAll = prevState.searchOptions.haveOverlays.includes('*');\r\n\r\n      // if `haveOverlays` previously included `*`\r\n      if (includedAll) {\r\n        // and if the value now has a length greater than 1\r\n        if (value.length > 1) {\r\n          // we don't want to keep the `*` value\r\n          newSearchOptions.haveOverlays = value.filter(str => str !== '*');\r\n        } else {\r\n          // otherwise we now set the new value. value that can be an empty array\r\n          newSearchOptions.haveOverlays = value;\r\n        }\r\n      } else {\r\n        // otherwise if the value includes `*`\r\n        // we want the value to only be `*` so we explicitely set it\r\n        // in an array\r\n        // otherwise we simple set to the value\r\n        if (value.includes('*')) {\r\n          newSearchOptions.haveOverlays = ['*'];\r\n        } else {\r\n          newSearchOptions.haveOverlays = value;\r\n        }\r\n      }\r\n\r\n      return { searchOptions: newSearchOptions };\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { searchOptions } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Typography variant=\"h6\" className=\"color-blue-darken-3\">Have overlays</Typography>\r\n\r\n        <div className=\"d-flex justify-content-between\">\r\n          <Checkbox.Multiple\r\n            name=\"have\"\r\n            value={searchOptions.haveOverlays}\r\n            className=\"resize scale-1 m-0\"\r\n            data={[\r\n              { label: 'Drawing', name: 'draw' },\r\n              { label: 'Text', name: 'text' },\r\n              { label: 'No matter', name: 'no matter', value: '*' }\r\n            ]}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HaveOverlaysRow;\r\n","import React from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nimport Checkbox from '../../Checkbox';\r\nimport { functionUpdate } from '../../../../utils';\r\n\r\nclass RatingRow extends React.Component {\r\n\r\n  /**\r\n   * is called when a checkbox trigger the event `onChange`\r\n   * @param {Object[]} value\r\n   */\r\n  handleChange = value => {\r\n    this.props.setState(functionUpdate({\r\n      searchOptions: { $merge: { rating: value } }\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const { searchOptions } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-row\">\r\n        <Typography variant=\"h6\" className=\"color-blue-darken-3\">Rating</Typography>\r\n\r\n        <div className=\"d-flex justify-content-between\">\r\n          <Checkbox.Multiple\r\n            name=\"rating\"\r\n            value={searchOptions.rating}\r\n            className=\"resize scale-1 m-0\"\r\n            data={[\r\n              { label: 'General', name: 'general' },\r\n              { label: 'Suggestive', name: 'suggestive' },\r\n              { label: 'NSFW', name: 'nsfw' }\r\n            ]}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RatingRow;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nimport OverrideReactElement from '../../OverrideReactElement';\r\nimport './RightPanel.scss';\r\n\r\nimport DisplayRow from './DisplayRow';\r\nimport SearchRow from './SearchRow';\r\nimport SortRow from './SortRow';\r\nimport HaveOverlaysRow from './HaveOverlaysRow';\r\nimport RatingRow from './RatingRow';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: searchOptionsPanel');\r\n\r\nclass RightPanel extends React.Component {\r\n\r\n  static DisplayRow = DisplayRow;\r\n  static SearchRow = SearchRow;\r\n  static SortRow = SortRow;\r\n  static HaveOverlaysRow = HaveOverlaysRow;\r\n  static RatingRow = RatingRow;\r\n\r\n  state = {\r\n    inputTags: [],\r\n    search: '',\r\n\r\n    searchOptions: {\r\n      haveOverlays: ['*'],\r\n      rating: ['general', 'suggestive', 'nsfw'],\r\n      sort: {\r\n        criteria: 'date',\r\n        order: 'ASC'\r\n      }\r\n    },\r\n  }\r\n\r\n  /**\r\n   * used to set state of this component\r\n   * @param {Object} obj\r\n   */\r\n  _setState = obj => {\r\n    this.setState(obj);\r\n  }\r\n\r\n  render() {\r\n    const { searchOptions, search } = this.state;\r\n    const { children, size, searchOptionsPanel: openPanel } = this.props;\r\n\r\n    return (\r\n      <div className={classNames('RightPanel color-white h-100', size, { open: openPanel })}>\r\n        <OverrideReactElement\r\n          setState={this._setState}\r\n          searchOptions={searchOptions}\r\n          search={search}\r\n          size={size}\r\n        >\r\n          {children}\r\n        </OverrideReactElement>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RightPanel);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport galleryState from '../../../../../store/states/gallery';\r\n\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setSearchOptionsPanel');\r\n\r\nclass CloseRow extends React.Component {\r\n\r\n  handleClose = () => {\r\n    const { setSearchOptionsPanel } = this.props;\r\n\r\n    setSearchOptionsPanel(false);\r\n  }\r\n\r\n  render() {\r\n    const { size } = this.props;\r\n\r\n    if (size === 'large') {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"panel-row d-flex justify-content-end px-2\">\r\n        <i className=\"fas fa-times fa-2x pointer\" onClick={this.handleClose}></i>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(CloseRow);\r\n","import React from 'react';\r\nimport MainRightPanel from '../../RightPanel';\r\n\r\nimport CloseRow from './CloseRow';\r\n\r\nconst RightPanel = ({ setState, searchOptions, search, size, ...rest }) => (\r\n  <React.Fragment>\r\n    <CloseRow size={size} />\r\n    <MainRightPanel.DisplayRow {...rest} />\r\n    <MainRightPanel.SearchRow {...rest} setState={setState} searchOptions={searchOptions} search={search} />\r\n    <MainRightPanel.SortRow {...rest} setState={setState} searchOptions={searchOptions} />\r\n    <MainRightPanel.HaveOverlaysRow {...rest} setState={setState} searchOptions={searchOptions} />\r\n    <MainRightPanel.RatingRow {...rest} setState={setState} searchOptions={searchOptions} />\r\n  </React.Fragment>\r\n);\r\n\r\nexport default RightPanel;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage');\r\n\r\nconst Header = ({ currentImage: image }) => (\r\n  <Grid container item justify=\"space-between\">\r\n    <Grid item>\r\n      <Typography variant=\"h6\">{image.user.name}</Typography>\r\n    </Grid>\r\n    <Grid item>\r\n      <span className={`rating ${image.rate}`}>{_.capitalize(image.rate)}</span>\r\n    </Grid>\r\n  </Grid>\r\n);\r\n\r\nexport default connect(mapStateToProps)(Header);\r\n","import React from 'react';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage');\r\n\r\nconst Content = ({ currentImage: image }) => (\r\n  <Grid container direction=\"column\">\r\n    <Grid item>\r\n      <Typography variant=\"h5\">{image.title}</Typography>\r\n    </Grid>\r\n    <Grid item>\r\n      <p>\r\n        {image.description}\r\n      </p>\r\n    </Grid>\r\n  </Grid>\r\n);\r\n\r\nexport default connect(mapStateToProps)(Content);\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport Header from './Header';\r\nimport Content from './Content';\r\nimport './Description.scss';\r\n\r\nconst Description = () => (\r\n  <Grid container item className=\"bg-color-grey-darken-1 color-white pt-2 px-3 Description\">\r\n    <Header />\r\n    <hr className=\"gradient color-grey my-2\" />\r\n    <Content />\r\n  </Grid>\r\n);\r\n\r\nexport default Description;\r\n","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Grid } from '@material-ui/core';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nimport Description from './Description/index';\r\nimport OverlayedImage from '../../../OverlayedImage';\r\nimport ImageContainer from '../../../ImageContainer';\r\nimport './Image.scss';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage showOverlay');\r\n//const mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setImages setCurrentPage');\r\n\r\nclass Displayer extends React.Component {\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', e => this.resizeContainer(e, true));\r\n  }\r\n\r\n  /**\r\n   * get the image size\r\n   * @param {Boolean} useOffsetSize\r\n   * @returns { { width: Number, height: Number} }\r\n   */\r\n  getImgSize = (img, useOffsetSize) => {\r\n    let width, height;\r\n\r\n    if (!_.isObject(img)) {\r\n      return { width: 0, height: 0 };\r\n    }\r\n\r\n    if (useOffsetSize) {\r\n      width = img.offsetWidth;\r\n      height = img.offsetHeight;\r\n    } else {\r\n      width = img.naturalWidth;\r\n      height = img.naturalHeight;\r\n    }\r\n\r\n    return { width, height };\r\n  }\r\n\r\n  /**\r\n   * is called when an image has loaded\r\n   * used to resize the container of the image to the height of the image\r\n   * so the container can shrink with the image\r\n   * @param {Boolean} useOffsetSize\r\n   */\r\n  resizeContainer = (_, useOffsetSize) => {\r\n    const img = document.getElementsByClassName('mainImage')[0];\r\n    const imgContainer = document.getElementsByClassName('image-container')[0];\r\n\r\n    const { height } = this.getImgSize(img, useOffsetSize);\r\n\r\n    // redefine the height of the `imgContainer`\r\n    imgContainer.style.height = height + 'px';\r\n  }\r\n\r\n  render() {\r\n    const { currentImage: image } = this.props;\r\n\r\n    if (!image) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Grid container className=\"Image\">\r\n        <Grid container item justify=\"center\" className=\"bg-color-grey-darken-4\">\r\n          <ImageContainer>\r\n            <OverlayedImage src={image.link} image={image} />\r\n          </ImageContainer>\r\n        </Grid>\r\n        <Grid container item justify=\"center\" className=\"bg-color-grey-darken-3 p-2\">\r\n          <Description />\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Displayer);\r\n","const Requester = () => null;\r\n\r\nexport default Requester;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nimport './Tags.scss';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage');\r\n\r\nclass Tags extends React.Component {\r\n\r\n  render() {\r\n    const { currentImage } = this.props;\r\n\r\n    if (!currentImage) {\r\n      return null;\r\n    }\r\n\r\n    currentImage.tags = currentImage.tags.filter(t => t.name !== '*');\r\n\r\n    return (\r\n      <div className=\"panel-row Tags\">\r\n        <Grid container>\r\n          {currentImage.tags.map(tag => (\r\n            <span className=\"tag py-1 px-3 m-1 bg-color-grey-darken-2\" key={tag._id}>{tag.name}</span>\r\n          ))}\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Tags);\r\n","import React from 'react';\r\nimport validator from 'validator';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState } from 'dynamic-redux';\r\n\r\nimport './Tags.scss';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage');\r\n\r\nclass Tags extends React.Component {\r\n\r\n  getValidElement = () => {\r\n    const { currentImage } = this.props;\r\n\r\n    if (validator.isURL(currentImage.artist.link)) {\r\n      return ({ children, ...rest }) => <a {...rest} rel=\"noreferrer\" href={currentImage.artist.link}>{children}</a>;\r\n    }\r\n\r\n    return ({ children, ...rest }) => <span {...rest}>{children}</span>;\r\n  }\r\n\r\n  render() {\r\n    const { currentImage } = this.props;\r\n\r\n    if (!currentImage) {\r\n      return null;\r\n    }\r\n\r\n    const Link = this.getValidElement();\r\n\r\n    return (\r\n      <div className=\"panel-row AdditionalData\">\r\n        <span className=\"fw-500\">Artist name:</span> <Link className=\"color-white\">{currentImage.artist.name}</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Tags);\r\n","import React from 'react';\r\n\r\nimport MainRightPanel from '../../RightPanel';\r\nimport Tags from './Tags';\r\nimport AdditionalData from './AdditionalData';\r\n\r\nconst RightPanel = ({ setState, searchOptions, search, ...rest }) => (\r\n  <React.Fragment>\r\n    <MainRightPanel.DisplayRow {...rest} />\r\n    <Tags />\r\n    <AdditionalData />\r\n  </React.Fragment>\r\n);\r\n\r\nexport default RightPanel;\r\n","import React from 'react';\r\nimport * as Space from 'react-spaces';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport './Gallery.scss';\r\n\r\nimport galleryState from '../../../store/states/gallery';\r\nimport * as Images from './Images/';\r\nimport * as Image from './Image/';\r\nimport RightPanel from './RightPanel';\r\nimport { Hidden } from '@material-ui/core';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: showOverlay filteredImages images');\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setCurrentPage');\r\n\r\nclass Gallery extends React.Component {\r\n\r\n  static kind = {\r\n    multiple: 0,\r\n    single: 1,\r\n  }\r\n\r\n  state = {\r\n    topSize: '0px'\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setTopSize();\r\n    window.addEventListener('resize', this.setTopSize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.setTopSize);\r\n  }\r\n\r\n  /**\r\n   * set `topSize` to the height of the navbar\r\n   */\r\n  setTopSize = () => {\r\n    const navbar = document.getElementById('Navbar');\r\n    const navbarHeight = navbar.offsetHeight + 'px';\r\n\r\n    this.setState({ topSize: navbarHeight });\r\n  }\r\n\r\n  render() {\r\n    const { topSize } = this.state;\r\n    const { history, kind } = this.props;\r\n\r\n    let GalleryKind = Images;\r\n\r\n    const isMultiple = kind === Gallery.kind.multiple;\r\n    const isSingle = kind === Gallery.kind.single;\r\n\r\n    if (isMultiple) {\r\n      GalleryKind = Images;\r\n    } else if (isSingle) {\r\n      GalleryKind = Image;\r\n    } else {\r\n      throw new Error(`Kind must be of value \"Gallery.kind\", got \"${kind}\"`);\r\n    }\r\n\r\n    return (\r\n      <div className=\"Gallery\">\r\n        <GalleryKind.Requester />\r\n        <Space.Fill>\r\n          <Space.Top size={topSize} />\r\n          <Space.Fill>\r\n\r\n            <Space.Fill scrollable>\r\n              <GalleryKind.Displayer history={history} />\r\n            </Space.Fill>\r\n\r\n            <Hidden smDown>\r\n              <Space.Right size=\"297px\">\r\n                <RightPanel size=\"large\">\r\n                  <GalleryKind.RightPanel />\r\n                </RightPanel>\r\n              </Space.Right>\r\n            </Hidden>\r\n\r\n            {\r\n              isMultiple && (\r\n                <Hidden mdUp>\r\n                  <RightPanel size=\"small\">\r\n                    <GalleryKind.RightPanel />\r\n                  </RightPanel>\r\n                </Hidden>\r\n              )\r\n            }\r\n\r\n          </Space.Fill>\r\n        </Space.Fill>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nGallery.defaultProps = {\r\n  currentPage: 1,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Gallery);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport PGallery from '../../Partials/Gallery';\r\nimport galleryState from '../../../store/states/gallery';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentPage');\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setCurrentPage setCurrentUser');\r\n\r\nclass Gallery extends React.Component {\r\n\r\n  componentDidMount() {\r\n    this.initGallery();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { match, setCurrentUser } = this.props;\r\n\r\n    if (match.params.user_slug !== prevProps.match.params.user_slug) {\r\n      setCurrentUser(match.params.user_slug);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * used to set the data used by the gallery\r\n   */\r\n  initGallery = () => {\r\n    const { match, setCurrentPage, setCurrentUser } = this.props;\r\n\r\n    if (match.params.page) {\r\n      setCurrentPage(match.params.page);\r\n    }\r\n\r\n    setCurrentUser(match.params.user_slug);\r\n  }\r\n\r\n  render() {\r\n    const { history } = this.props;\r\n\r\n    return <PGallery history={history} kind={PGallery.kind.multiple} />\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Gallery);\r\n","import socket from '../../../../socket/config';\r\n\r\nexport class On {\r\n  static sendImage = callback => {\r\n    return socket.on('sendImage', callback);\r\n  }\r\n\r\n  static getImageFailed = callback => {\r\n    return socket.on('getImageFailed', callback);\r\n  }\r\n}\r\n\r\nexport class Emit {\r\n  static getImageById = data => {\r\n    return socket.emit('getImageById', data);\r\n  }\r\n}\r\n\r\nexport class Remove {\r\n  static sendImage = callback => {\r\n    return socket.removeListener('sendImage', callback);\r\n  }\r\n\r\n  static getImageFailed = callback => {\r\n    return socket.removeListener('getImageFailed', callback);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { mapDynamicState, mapDynamicDispatch } from 'dynamic-redux';\r\n\r\nimport galleryState from '../../../store/states/gallery';\r\nimport Gallery from '../../Partials/Gallery';\r\nimport * as socket from '../../Partials/Gallery/Image/socket';\r\n\r\nconst mapStateToProps = mapDynamicState('gallery: currentImage showOverlay');\r\nconst mapDispatchToProps = mapDynamicDispatch(galleryState.actions, 'setCurrentImage setShowOverlay');\r\n\r\nclass Show extends React.Component {\r\n\r\n  componentDidMount() {\r\n    const { match, setCurrentImage } = this.props;\r\n    socket.On.sendImage(data => setCurrentImage(data.image));\r\n\r\n    if (match.params.id) {\r\n      this.request();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { match } = this.props;\r\n\r\n    if (match.params.id !== prevProps.match.params.id) {\r\n      this.request();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { setCurrentImage } = this.props;\r\n    socket.Remove.sendImage(data => setCurrentImage(data.image));\r\n  }\r\n\r\n  request = () => {\r\n    const { match } = this.props;\r\n\r\n    socket.Emit.getImageById({ id: match.params.id });\r\n  }\r\n\r\n  /**\r\n   * @param {Object[]} images\r\n   */\r\n  setImages = images => {\r\n    const { setImages } = this.props;\r\n    setImages(images);\r\n  }\r\n\r\n  render() {\r\n    const { history } = this.props;\r\n\r\n    return <Gallery history={history} kind={Gallery.kind.single} />;\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Show);\r\n","import React from 'react';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport './NotFound.scss';\r\n\r\nconst NotFound = () => (\r\n  <Grid container className=\"NotFound\" justify=\"center\">\r\n    <h1 className=\"py-2 by-2 border-gradient color-blue\">\r\n      <span className=\"color-black\">The page you're trying to acces doesn't exists</span>\r\n    </h1>\r\n  </Grid>\r\n);\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport roles from './data/roles';\r\nimport ProtectedRoute from './components/Partials/ProtectedRoute';\r\n\r\nimport Home from './components/Pages/Home';\r\nimport Upload from './components/Pages/Upload';\r\nimport Signup from './components/Pages/Signup';\r\nimport Login from './components/Pages/Login';\r\nimport Gallery from './components/Pages/Gallery';\r\nimport Show from './components/Pages/Show';\r\nimport Profile from './components/Pages/Profile';\r\n//import Image from './components/Pages/Image';\r\nimport NotFound from './components/Pages/NotFound';\r\n\r\n\r\nconst Router = () => (\r\n  <Switch>\r\n    <Route exact path={['/', '/home']} component={Home} />\r\n    <ProtectedRoute exact path=\"/upload\" role={roles.user} component={Upload} />\r\n    <Route exact path=\"/signup\" component={Signup} />\r\n    <Route exact path=\"/login\" component={Login} />\r\n    <Route exact path=\"/gallery/:user_slug/:page?\" component={Gallery} />\r\n    <Route exact path=\"/image/:id\" component={Show} />\r\n    <Route exact path=\"/profile\" component={Profile} />\r\n    {/*<Route exact path=\"/user/:username\" component={User} />\r\n    <Route exact path=\"/user/:username/:page\" component={User} />*/}\r\n    <Route exact component={NotFound} />\r\n  </Switch>\r\n);\r\n\r\nexport default Router;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { mapDynamicDispatch } from 'dynamic-redux';\n\nimport './index.scss';\n\nimport store from './store';\nimport miscState from './store/states/misc';\nimport Navbar from './components/Globals/Navbar';\nimport Router from './Router';\nimport Auth from './services/Auth';\nimport socket from './socket/config';\n\nconst actions = mapDynamicDispatch(miscState.actions, 'setTags')(store.dispatch);\n\nclass Root extends React.Component {\n\n  componentDidMount() {\n    Auth.login();\n\n    socket.emit('getAllTags');\n    socket.on('sendTags', data => {\n      actions.setTags(data.tags);\n    });\n  }\n\n  render() {\n   return (\n      <Provider store={store}>\n       <BrowserRouter>\n         <React.Fragment>\n           <Navbar />\n           <Router />\n          </React.Fragment>\n        </BrowserRouter>\n      </Provider>\n    );\n  }\n}\n\nReactDOM.render(<Root />, document.getElementById('root'));\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Grid, Typography } from '@material-ui/core';\r\n\r\nimport SubSection from './SubSection';\r\n\r\nconst Section = ({ children, title, className, ...rest }) => (\r\n  <Grid\r\n    {...rest}\r\n    sm={11}\r\n    container\r\n    item\r\n    className={classNames('bg-color-grey-darken-4 color-grey-lighten-2 p-4 border-gradient by-1 my-2', className)}\r\n  >\r\n    <Typography variant=\"h5\">{title}</Typography>\r\n    {children}\r\n  </Grid>\r\n);\r\n\r\nSection.Sub = SubSection;\r\n\r\nexport default Section;\r\n","import React from 'react';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nconst SubSection = ({ children }) => (\r\n  <Grid container item alignItems=\"center\">\r\n    <Grid md={4} item>\r\n      {children[0]}\r\n    </Grid>\r\n    <Grid item>\r\n      {children[1]}\r\n    </Grid>\r\n  </Grid>\r\n);\r\n\r\nexport default SubSection;\r\n","import React from 'react';\r\n\r\nimport Input from '.';\r\n\r\nconst InputOverride = ({ name, label, value, onChange, type, fullWidth, elevation }) => (\r\n  <Input\r\n    name={name}\r\n    label={label}\r\n    value={value}\r\n    onChange={onChange}\r\n    type={type}\r\n    fullWidth={fullWidth}\r\n    elevation={elevation}\r\n  />\r\n);\r\n\r\nexport default InputOverride;\r\n","import React from 'react';\r\nimport { FormControl, InputLabel, Input as MuiInput, FormHelperText } from '@material-ui/core';\r\nimport classNames from 'classnames';\r\n\r\nimport InputOverride from './InputOverride';\r\nimport './Input.scss';\r\n\r\nclass Input extends React.Component {\r\n\r\n  static Override = InputOverride;\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      elevation,\r\n      name,\r\n      label,\r\n      error,\r\n      type,\r\n      value,\r\n      helperText,\r\n      errorMessage,\r\n      fullWidth,\r\n      onChange,\r\n      ...rest\r\n    } = this.props;\r\n\r\n    const helperName = `${name}-helper`;\r\n\r\n    return (\r\n      <FormControl className=\"custom-field\" error={error} fullWidth={fullWidth}>\r\n        <InputLabel variant=\"standard\" htmlFor={name}>{label}</InputLabel>\r\n\r\n        <MuiInput\r\n          {...rest}\r\n          value={value}\r\n          onChange={onChange}\r\n          type={type}\r\n          fullWidth={fullWidth}\r\n          name={name}\r\n          id={name}\r\n          aria-describedby={helperName}\r\n          className={classNames(`custom-input z-elevation-${elevation}`, className)}\r\n        />\r\n\r\n        <FormHelperText className=\"helper\" id={helperName}>\r\n          {error ? errorMessage : helperText}\r\n        </FormHelperText>\r\n      </FormControl>\r\n    );\r\n  }\r\n}\r\n\r\nInput.defaultProps = {\r\n  elevation: 2,\r\n};\r\n\r\nexport default Input;\r\n","import { DynamicState } from 'dynamic-redux';\r\n\r\nconst authState = new DynamicState('auth', {\r\n  user: {},\r\n  deniedPage: {},\r\n});\r\n\r\nauthState.createState({\r\n  login: { type: 'LOGIN', prop: 'user' },\r\n  setDeniedPage: 'SET_DENIED_PAGE',\r\n});\r\n\r\nexport default authState;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport galleryState from './gallery';\r\nimport miscState from './misc';\r\nimport authState from './auth';\r\nimport uploaderState from './uploader';\r\n\r\nconst reducers = combineReducers({\r\n  miscReducer: miscState.reducer,\r\n  uploaderReducer: uploaderState.reducer,\r\n  galleryReducer: galleryState.reducer,\r\n  authReducer: authState.reducer,\r\n});\r\n\r\nexport default reducers;\r\n","import { createStore } from 'dynamic-redux';\r\n\r\nimport reducers from './states';\r\n\r\nexport default createStore(reducers);\r\n","export default {\r\n  user: 'ROLE_USER',\r\n};\r\n","\"use strict\";\n\nexports.mapDynamicState = require('./mapDynamicState');\nexports.mapDynamicDispatch = require('./mapDynamicDispatch');\nexports.createStore = require('./createStore');\nexports.DynamicState = require('./DynamicState');","import { DynamicState } from 'dynamic-redux';\r\n\r\nconst miscState = new DynamicState('misc', {\r\n  tags: []\r\n});\r\n\r\nmiscState.createState({\r\n  setTags: 'SET_TAGS',\r\n});\r\n\r\nexport default miscState;\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _formValidator = _interopRequireDefault(require(\"form-validator\"));\n\nvar _Field = _interopRequireDefault(require(\"./Field\"));\n\nvar _reactRouter = require(\"react-router\");\n\nvar _Button = _interopRequireDefault(require(\"@material-ui/core/Button\"));\n\nvar _fields = require(\"./fields\");\n\nvar _validations2 = require(\"./validations\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Form =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Form, _React$Component); // retrieve the pre-defined validations\n\n\n  function Form(_props) {\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Form).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getFields\", function (props) {\n      _this.fields = [];\n      var _validations = [];\n      props && props.fields && props.fields.forEach(function (field) {\n        var currentField; // get a pre-defined field without modifying it\n\n        if (typeof field === 'string') currentField = _fields.fields[field]; // get a pre-defined field and the modify the defined properties\n        else if (field.constructor.name === 'Object') currentField = _objectSpread({}, _fields.fields[field.name], field);else currentField = {};\n        if (!currentField) return console.error(new Error(\"\\\"\".concat(field, \"\\\" is not a pre-defined field\")));\n        currentField.label = currentField.label || currentField.name; // get the pre-defined validations\n\n        if (currentField && Array.isArray(currentField.validations)) {\n          currentField.validations = _objectSpread({}, Form.validations(currentField.label, currentField.validations));\n        } else currentField.validations = {}; // get the defined validations, if there is\n\n\n        if (field.validations && field.validations.constructor.name === 'Object') {\n          currentField = _objectSpread({}, currentField, field, {\n            validations: _objectSpread({}, currentField.validations, field.validations)\n          });\n        }\n\n        _this.fields.push(currentField); // the validations shall be apart from the fields, and in an array\n\n\n        for (var key in currentField.validations) {\n          if (currentField.validations.hasOwnProperty(key)) {\n            var validation = currentField.validations[key];\n            validation.field = currentField.name;\n\n            _validations.push(validation);\n          }\n        }\n      });\n      _this.validator = new _formValidator.default(_validations);\n      _this.submitted = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (fieldOnChange) {\n      return function (e, value, name) {\n        e.preventDefault(); // let the user to get the event\n\n        var onChange = _this.props.onChange;\n        if (fieldOnChange) fieldOnChange(e, value, name);else if (onChange) onChange(e, value, name);\n\n        _this.setState(_defineProperty({}, name || e.target.name, value || e.target.value));\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (e) {\n      e.preventDefault();\n\n      var validation = _this.validator.validate(_this.state);\n\n      _this.setState({\n        validation: validation\n      });\n\n      _this.submitted = true; // user action for when the form is valid\n\n      if (validation.isValid) _this.props.onSubmit(_this.state, e);\n    });\n\n    _this.getFields(_props);\n\n    var fieldsName = {};\n\n    _this.fields.forEach(function (field) {\n      return fieldsName[field.name] = field.value || '';\n    });\n\n    _this.state = _objectSpread({}, fieldsName, {\n      validation: _this.validator.valid()\n    });\n    return _this;\n  } // get the pre-defined fields, and modify them if specified\n\n\n  _createClass(Form, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          submitText = _this$props.submitText,\n          redirection = _this$props.redirection,\n          title = _this$props.title,\n          _field = _this$props.field,\n          errorMessage = _this$props.errorMessage,\n          redirect = _this$props.redirect,\n          children = _this$props.children,\n          rangeField = _this$props.rangeField,\n          selectField = _this$props.selectField,\n          onFocus = _this$props.onFocus,\n          onBlur = _this$props.onBlur;\n      var validation = this.submitted ? this.validator.validate(this.state) : this.state.validation;\n      return _react.default.createElement(\"form\", {\n        onSubmit: this.handleSubmit\n      }, _react.default.createElement(\"h1\", null, title), this.fields.map(function (field) {\n        return _react.default.createElement(_Field.default, {\n          key: field.name,\n          value: _this2.state[field.name],\n          name: field.name,\n          label: field.label,\n          type: field.type || 'text',\n          validation: validation,\n          onFocus: field.onFocus || onFocus,\n          onBlur: field.onBlur || onBlur,\n          onChange: _this2.handleChange(field.onChange),\n          field: field.field || _field,\n          placeholder: field.placeholder,\n          elementType: field.elementType,\n          options: field.options,\n          min: field.min,\n          max: field.max,\n          step: field.step,\n          rangeField: field.field || rangeField,\n          selectField: field.field || selectField,\n          minlength: field.minlength,\n          maxlength: field.maxlength\n        });\n      }), _react.default.createElement(_Button.default, {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\"\n      }, submitText || 'Submit'), _react.default.createElement(\"br\", null), _react.default.createElement(\"span\", {\n        className: \"externalError\"\n      }, errorMessage), redirect && redirection && _react.default.createElement(_reactRouter.Redirect, {\n        to: redirection\n      }), children);\n    }\n  }]);\n\n  return Form;\n}(_react.default.Component);\n\n_defineProperty(Form, \"validations\", function (label, validationsArr) {\n  // temp object for validations\n  var validationsObj = {};\n  validationsArr.forEach(function (validationAndArg) {\n    // after \":\" it's considered as arguments\n    var _validationAndArg$spl = validationAndArg.split(':'),\n        _validationAndArg$spl2 = _slicedToArray(_validationAndArg$spl, 2),\n        validation = _validationAndArg$spl2[0],\n        args = _validationAndArg$spl2[1];\n\n    var not = false;\n\n    if (validation.charAt(0) === '!') {\n      validation = validation.substring(1);\n      not = true;\n    } // get the validation object of the wanted one\n    // we do NOT want a reference of the object\n    // spread operator partially solve the problem by copying the object\n    // but it still get a reference of the objects and arrays it contains and we don't want that\n\n\n    validationsObj[validation] = (0, _utils.copyNestedObject)(_validations2.validations[validation]);\n    if (not) validationsObj[validation].validWhen = !validationsObj[validation].validWhen;\n\n    for (var key in validationsObj[validation]) {\n      if (validationsObj[validation].hasOwnProperty(key) && key !== 'method') {\n        // a range over 2 numbers\n        var validationRange = args ? args.split('-') : []; // the value after \"$\" is the input's name\n        // it's used to match the value of the input that has the \"match\" rule\n        // and the value of the targeted input\n\n        var match = args ? args.split('$')[1] : ''; // there's some texts that need to be replaced\n\n        validationsObj[validation] = (0, _utils.deepReplace)(validationsObj[validation], /<.+>/, {\n          label: label,\n          min: validationRange[0],\n          max: validationRange[1],\n          match: match,\n          not: (not ? 'should' : 'does') + 'n\\'t'\n        });\n      }\n    }\n  });\n  return validationsObj;\n});\n\nvar _default = Form;\nexports.default = _default;"],"sourceRoot":""}